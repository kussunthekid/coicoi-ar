"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{1065:(e,t,r)=>{e.exports=r.p+"static/media/face_mesh_face_model.fa315231.zbin"},1142:(e,t,r)=>{r.d(t,{p8:()=>i,tb:()=>a});var i=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},2138:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(9946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2771:(e,t,r)=>{e.exports=r.p+"static/media/face_mesh_full_head_simplified_model.a7bd99f8.zbin"},4355:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(9946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4559:(e,t,r)=>{let i,a,s,n,o,l,c,h;r.d(t,{i7:()=>tL,ru:()=>tM,_z:()=>tR,tu:()=>tU,hb:()=>tS,jR:()=>tf});class d{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(){for(let e=0,t=this._funcs.length;e<t;e++)this._funcs[e]()}}class u{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(e){for(let t=0,r=this._funcs.length;t<r;t++)this._funcs[t](e)}}!function(e){e[e.UNKNOWN=131072]="UNKNOWN",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=4]="CODE_39",e[e.CODE_93=8]="CODE_93",e[e.CODE_128=16]="CODE_128",e[e.DATA_MATRIX=32]="DATA_MATRIX",e[e.EAN_8=64]="EAN_8",e[e.EAN_13=128]="EAN_13",e[e.ITF=256]="ITF",e[e.MAXICODE=512]="MAXICODE",e[e.PDF_417=1024]="PDF_417",e[e.QR_CODE=2048]="QR_CODE",e[e.RSS_14=4096]="RSS_14",e[e.RSS_EXPANDED=8192]="RSS_EXPANDED",e[e.UPC_A=16384]="UPC_A",e[e.UPC_E=32768]="UPC_E",e[e.UPC_EAN_EXTENSION=65536]="UPC_EAN_EXTENSION",e[e.ALL=131071]="ALL"}(_||(_={})),function(e){e[e.EYE_LEFT=0]="EYE_LEFT",e[e.EYE_RIGHT=1]="EYE_RIGHT",e[e.EAR_LEFT=2]="EAR_LEFT",e[e.EAR_RIGHT=3]="EAR_RIGHT",e[e.NOSE_BRIDGE=4]="NOSE_BRIDGE",e[e.NOSE_TIP=5]="NOSE_TIP",e[e.NOSE_BASE=6]="NOSE_BASE",e[e.LIP_TOP=7]="LIP_TOP",e[e.LIP_BOTTOM=8]="LIP_BOTTOM",e[e.MOUTH_CENTER=9]="MOUTH_CENTER",e[e.CHIN=10]="CHIN",e[e.EYEBROW_LEFT=11]="EYEBROW_LEFT",e[e.EYEBROW_RIGHT=12]="EYEBROW_RIGHT"}(m||(m={})),function(e){e[e.WORLD=3]="WORLD",e[e.MINUS_Z_AWAY_FROM_USER=4]="MINUS_Z_AWAY_FROM_USER",e[e.MINUS_Z_HEADING=5]="MINUS_Z_HEADING",e[e.UNCHANGED=6]="UNCHANGED"}(p||(p={})),function(e){e[e.LOG_LEVEL_NONE=0]="LOG_LEVEL_NONE",e[e.LOG_LEVEL_ERROR=1]="LOG_LEVEL_ERROR",e[e.LOG_LEVEL_WARNING=2]="LOG_LEVEL_WARNING",e[e.LOG_LEVEL_VERBOSE=3]="LOG_LEVEL_VERBOSE"}(f||(f={})),function(e){e[e.FRAME_PIXEL_FORMAT_I420=0]="FRAME_PIXEL_FORMAT_I420",e[e.FRAME_PIXEL_FORMAT_I420A=1]="FRAME_PIXEL_FORMAT_I420A",e[e.FRAME_PIXEL_FORMAT_I422=2]="FRAME_PIXEL_FORMAT_I422",e[e.FRAME_PIXEL_FORMAT_I444=3]="FRAME_PIXEL_FORMAT_I444",e[e.FRAME_PIXEL_FORMAT_NV12=4]="FRAME_PIXEL_FORMAT_NV12",e[e.FRAME_PIXEL_FORMAT_RGBA=5]="FRAME_PIXEL_FORMAT_RGBA",e[e.FRAME_PIXEL_FORMAT_BGRA=6]="FRAME_PIXEL_FORMAT_BGRA",e[e.FRAME_PIXEL_FORMAT_Y=7]="FRAME_PIXEL_FORMAT_Y"}(g||(g={})),function(e){e[e.IMAGE_TRACKER_TYPE_PLANAR=0]="IMAGE_TRACKER_TYPE_PLANAR",e[e.IMAGE_TRACKER_TYPE_CYLINDRICAL=1]="IMAGE_TRACKER_TYPE_CYLINDRICAL",e[e.IMAGE_TRACKER_TYPE_CONICAL=2]="IMAGE_TRACKER_TYPE_CONICAL"}(v||(v={}));var _,m,p,f,g,v,b,y,A,T,E,w,x=r(8437),R=r(6050);class M{constructor(e){this._messageSender=e,this._globalState={log_level:1},this.serializer=new x.A(e=>{this._messageSender(e)}),this.deserializer=new R.X,this._latestId=1,this._pipeline_state_by_instance=new Map,this._camera_source_state_by_instance=new Map,this._sequence_source_state_by_instance=new Map,this._image_tracker_state_by_instance=new Map,this._face_tracker_state_by_instance=new Map,this._face_mesh_state_by_instance=new Map,this._face_landmark_state_by_instance=new Map,this._barcode_finder_state_by_instance=new Map,this._instant_world_tracker_state_by_instance=new Map,this.impl={log_level:()=>this._globalState.log_level,log_level_set:e=>{this.serializer.sendMessage(34,t=>{t.logLevel(e)})},analytics_project_id_set:(e,t)=>{this.serializer.sendMessage(31,r=>{r.string(e),r.string(t)})},pipeline_create:()=>{let e=this._latestId++,t={current_frame_user_data:0,camera_model:new Float32Array([300,300,160,120,0,0]),camera_pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_camera_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_device_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),frame_number:0};return this._pipeline_state_by_instance.set(e,t),this.serializer.sendMessage(27,t=>{t.type(e)}),e},pipeline_destroy:e=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this._pipeline_state_by_instance.delete(e),this.serializer.sendMessage(28,t=>{t.type(e)})},pipeline_frame_update:e=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(9,t=>{t.type(e)})},pipeline_frame_number:e=>{let t=this._pipeline_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.frame_number},pipeline_camera_model:e=>{let t=this._pipeline_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.camera_model},pipeline_camera_frame_user_data:e=>{let t=this._pipeline_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.current_frame_user_data},pipeline_camera_frame_submit:(e,t,r,i,a,s,n,o)=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(8,l=>{l.type(e),l.dataWithLength(t),l.int(r),l.int(i),l.int(a),l.matrix4x4(s),l.cameraModel(n),l.bool(o)})},pipeline_camera_frame_submit_raw_pointer:(e,t,r,i,a,s,n,o,l,c,h)=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed")},pipeline_camera_frame_camera_attitude:e=>{let t=this._pipeline_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.camera_frame_camera_attitude},pipeline_camera_frame_device_attitude:e=>{let t=this._pipeline_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.camera_frame_device_attitude},pipeline_motion_accelerometer_submit:(e,t,r,i,a)=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(10,s=>{s.type(e),s.timestamp(t),s.float(r),s.float(i),s.float(a)})},pipeline_motion_rotation_rate_submit:(e,t,r,i,a)=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(11,s=>{s.type(e),s.timestamp(t),s.float(r),s.float(i),s.float(a)})},pipeline_motion_attitude_submit:(e,t,r,i,a)=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(12,s=>{s.type(e),s.timestamp(t),s.float(r),s.float(i),s.float(a)})},pipeline_motion_attitude_matrix_submit:(e,t)=>{if(!this._pipeline_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(13,r=>{r.type(e),r.matrix4x4(t)})},camera_source_create:(e,t)=>{let r=this._latestId++;return this._camera_source_state_by_instance.set(r,{}),this.serializer.sendMessage(29,i=>{i.type(r),i.type(e),i.string(t)}),r},camera_source_destroy:e=>{if(!this._camera_source_state_by_instance.get(e))throw Error("This object has been destroyed");this._camera_source_state_by_instance.delete(e),this.serializer.sendMessage(30,t=>{t.type(e)})},sequence_source_create:e=>{let t=this._latestId++;return this._sequence_source_state_by_instance.set(t,{}),this.serializer.sendMessage(35,r=>{r.type(t),r.type(e)}),t},sequence_source_destroy:e=>{if(!this._sequence_source_state_by_instance.get(e))throw Error("This object has been destroyed");this._sequence_source_state_by_instance.delete(e),this.serializer.sendMessage(36,t=>{t.type(e)})},image_tracker_create:e=>{let t=this._latestId++;return this._image_tracker_state_by_instance.set(t,{enabled:!0,target_loaded_version:-1,anchor_count:0,anchor_id:[],anchor_pose:[]}),this.serializer.sendMessage(2,r=>{r.type(t),r.type(e)}),t},image_tracker_destroy:e=>{if(!this._image_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this._image_tracker_state_by_instance.delete(e),this.serializer.sendMessage(14,t=>{t.type(e)})},image_tracker_target_load_from_memory:(e,t)=>{if(!this._image_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(4,r=>{r.type(e),r.dataWithLength(t)})},image_tracker_target_loaded_version:e=>{let t=this._image_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.target_loaded_version},image_tracker_enabled:e=>{let t=this._image_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.enabled},image_tracker_enabled_set:(e,t)=>{if(!this._image_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(3,r=>{r.type(e),r.bool(t)})},image_tracker_anchor_count:e=>{let t=this._image_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.anchor_count},image_tracker_anchor_id:(e,t)=>{let r=this._image_tracker_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.anchor_id[t]},image_tracker_anchor_pose_raw:(e,t)=>{let r=this._image_tracker_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.anchor_pose[t]},face_tracker_create:e=>{let t=this._latestId++;return this._face_tracker_state_by_instance.set(t,{enabled:!0,model_loaded:-1,max_faces:1,anchor_count:0,anchor_id:[],anchor_pose:[],anchor_identity_coefficients:[],anchor_expression_coefficients:[]}),this.serializer.sendMessage(20,r=>{r.type(t),r.type(e)}),t},face_tracker_destroy:e=>{if(!this._face_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this._face_tracker_state_by_instance.delete(e),this.serializer.sendMessage(21,t=>{t.type(e)})},face_tracker_model_load_from_memory:(e,t)=>{if(!this._face_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(22,r=>{r.type(e),r.dataWithLength(t)})},face_tracker_model_loaded_version:e=>{let t=this._face_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.model_loaded},face_tracker_enabled_set:(e,t)=>{if(!this._face_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(23,r=>{r.type(e),r.bool(t)})},face_tracker_enabled:e=>{let t=this._face_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.enabled},face_tracker_max_faces_set:(e,t)=>{if(!this._face_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(24,r=>{r.type(e),r.int(t)})},face_tracker_max_faces:e=>{let t=this._face_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.max_faces},face_tracker_anchor_count:e=>{let t=this._face_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.anchor_count},face_tracker_anchor_id:(e,t)=>{let r=this._face_tracker_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.anchor_id[t]},face_tracker_anchor_pose_raw:(e,t)=>{let r=this._face_tracker_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.anchor_pose[t]},face_tracker_anchor_identity_coefficients:(e,t)=>{let r=this._face_tracker_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.anchor_identity_coefficients[t]},face_tracker_anchor_expression_coefficients:(e,t)=>{let r=this._face_tracker_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.anchor_expression_coefficients[t]},face_mesh_create:()=>{let e=this._latestId++;return this._face_mesh_state_by_instance.set(e,{}),this.serializer.sendMessage(25,t=>{t.type(e)}),e},face_mesh_destroy:e=>{if(!this._face_mesh_state_by_instance.get(e))throw Error("This object has been destroyed");this._face_mesh_state_by_instance.delete(e),this.serializer.sendMessage(26,t=>{t.type(e)})},face_landmark_create:e=>{let t=this._latestId++;return this._face_landmark_state_by_instance.set(t,{}),this.serializer.sendMessage(32,r=>{r.type(t),r.faceLandmarkName(e)}),t},face_landmark_destroy:e=>{if(!this._face_landmark_state_by_instance.get(e))throw Error("This object has been destroyed");this._face_landmark_state_by_instance.delete(e),this.serializer.sendMessage(33,t=>{t.type(e)})},barcode_finder_create:e=>{let t=this._latestId++;return this._barcode_finder_state_by_instance.set(t,{enabled:!0,number_found:0,found_text:[],found_format:[],formats:131071}),this.serializer.sendMessage(16,r=>{r.type(t),r.type(e)}),t},barcode_finder_destroy:e=>{if(!this._barcode_finder_state_by_instance.get(e))throw Error("This object has been destroyed");this._barcode_finder_state_by_instance.delete(e),this.serializer.sendMessage(17,t=>{t.type(e)})},barcode_finder_enabled_set:(e,t)=>{if(!this._barcode_finder_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(18,r=>{r.type(e),r.bool(t)})},barcode_finder_enabled:e=>{let t=this._barcode_finder_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.enabled},barcode_finder_found_number:e=>{let t=this._barcode_finder_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.number_found},barcode_finder_found_text:(e,t)=>{let r=this._barcode_finder_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.found_text[t]},barcode_finder_found_format:(e,t)=>{let r=this._barcode_finder_state_by_instance.get(e);if(!r)throw Error("This object has been destroyed");return r.found_format[t]},barcode_finder_formats:e=>{let t=this._barcode_finder_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.formats},barcode_finder_formats_set:(e,t)=>{if(!this._barcode_finder_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(19,r=>{r.type(e),r.barcodeFormat(t)})},instant_world_tracker_create:e=>{let t=this._latestId++,r={enabled:!0,pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};return this._instant_world_tracker_state_by_instance.set(t,r),this.serializer.sendMessage(5,r=>{r.type(t),r.type(e)}),t},instant_world_tracker_destroy:e=>{if(!this._instant_world_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this._instant_world_tracker_state_by_instance.delete(e),this.serializer.sendMessage(15,t=>{t.type(e)})},instant_world_tracker_enabled_set:(e,t)=>{if(!this._instant_world_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(6,r=>{r.type(e),r.bool(t)})},instant_world_tracker_enabled:e=>{let t=this._instant_world_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.enabled},instant_world_tracker_anchor_pose_raw:e=>{let t=this._instant_world_tracker_state_by_instance.get(e);if(!t)throw Error("This object has been destroyed");return t.pose},instant_world_tracker_anchor_pose_set_from_camera_offset_raw:(e,t,r,i,a)=>{if(!this._instant_world_tracker_state_by_instance.get(e))throw Error("This object has been destroyed");this.serializer.sendMessage(7,s=>{s.type(e),s.float(t),s.float(r),s.float(i),s.instantTrackerTransformOrientation(a)})}}}processMessages(e){this.deserializer.setData(e),this.deserializer.forMessages((e,t)=>{switch(e){case 7:{let e=t.type(),r=this._pipeline_state_by_instance.get(e);if(!r)return;r.frame_number=t.int();break}case 6:{let e=t.type(),r=this._pipeline_state_by_instance.get(e);if(!r)return;r.camera_model=t.cameraModel();break}case 5:{let e=t.type(),r=this._pipeline_state_by_instance.get(e);if(!r)return;r.current_frame_user_data=t.int();break}case 11:{let e=t.type(),r=this._pipeline_state_by_instance.get(e);if(!r)return;r.camera_frame_camera_attitude=t.matrix4x4();break}case 12:{let e=t.type(),r=this._pipeline_state_by_instance.get(e);if(!r)return;r.camera_frame_device_attitude=t.matrix4x4();break}case 19:{let e=t.type(),r=this._image_tracker_state_by_instance.get(e);if(!r)return;r.target_loaded_version=t.int();break}case 1:{let e=t.type(),r=this._image_tracker_state_by_instance.get(e);if(!r)return;r.anchor_count=t.int();break}case 2:{let e=t.type(),r=this._image_tracker_state_by_instance.get(e);if(!r)return;let i=t.int();r.anchor_id[i]=t.string();break}case 3:{let e=t.type(),r=this._image_tracker_state_by_instance.get(e);if(!r)return;let i=t.int();r.anchor_pose[i]=t.matrix4x4();break}case 18:{let e=t.type(),r=this._face_tracker_state_by_instance.get(e);if(!r)return;r.model_loaded=t.int();break}case 13:{let e=t.type(),r=this._face_tracker_state_by_instance.get(e);if(!r)return;r.anchor_count=t.int();break}case 14:{let e=t.type(),r=this._face_tracker_state_by_instance.get(e);if(!r)return;let i=t.int();r.anchor_id[i]=t.string();break}case 15:{let e=t.type(),r=this._face_tracker_state_by_instance.get(e);if(!r)return;let i=t.int();r.anchor_pose[i]=t.matrix4x4();break}case 16:{let e=t.type(),r=this._face_tracker_state_by_instance.get(e);if(!r)return;let i=t.int();r.anchor_identity_coefficients[i]=t.identityCoefficients();break}case 17:{let e=t.type(),r=this._face_tracker_state_by_instance.get(e);if(!r)return;let i=t.int();r.anchor_expression_coefficients[i]=t.expressionCoefficients();break}case 8:{let e=t.type(),r=this._barcode_finder_state_by_instance.get(e);if(!r)return;r.number_found=t.int();break}case 9:{let e=t.type(),r=this._barcode_finder_state_by_instance.get(e);if(!r)return;let i=t.int();r.found_text[i]=t.string();break}case 10:{let e=t.type(),r=this._barcode_finder_state_by_instance.get(e);if(!r)return;let i=t.int();r.found_format[i]=t.barcodeFormat();break}case 4:{let e=t.type(),r=this._instant_world_tracker_state_by_instance.get(e);if(!r)return;r.pose=t.matrix4x4()}}})}}var S=r(7896);let I={},C=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 projMatrix;
uniform mat4 cameraMatrix;
uniform mat4 modelViewMatrix;
attribute vec4 position;
attribute vec2 textureCoord;

varying highp vec2 vTextureCoord;

void main()
{
    gl_Position = projMatrix * cameraMatrix * modelViewMatrix * position;
    vTextureCoord = textureCoord;
}`,F=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
uniform sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2D(skinSampler, vTextureCoord);
}`;var k=r(6637),L=r(1142);function D(){var e=new L.tb(3);return L.tb!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function P(e,t,r){var i=t[0],a=t[1],s=t[2],n=r[3]*i+r[7]*a+r[11]*s+r[15];return n=n||1,e[0]=(r[0]*i+r[4]*a+r[8]*s+r[12])/n,e[1]=(r[1]*i+r[5]*a+r[9]*s+r[13])/n,e[2]=(r[2]*i+r[6]*a+r[10]*s+r[14])/n,e}D();var U=r(9682);function O(e,t,r,i=.01,a=100){let s=2*e[2],n=2*e[3],o=k.vt();k.$h(o,i*(-.5-e[2])/e[0],i*(s-.5-e[2])/e[0],i*(n-.5-e[3])/e[1],i*(-.5-e[3])/e[1],i,a),o[4]*=-1,o[5]*=-1,o[6]*=-1,o[7]*=-1;let l=k.vt();k.CV(l,[.5*s,.5*n,1]),k.lw(o,l,o),k.$0(l,B(!1)*Math.PI/180,[0,0,1]),k.lw(o,l,o);let c=D();c[0]=s,c[1]=n,c[2]=0,P(c,c,l);let h=Math.abs(c[0]),d=Math.abs(c[1]),u=1;return u=h/t>d/r?r/d:t/h,k.CV(l,[u,u,1]),k.lw(o,l,o),k.CV(l,[2/t,2/r,1]),k.lw(o,l,o),k.$0(l,-(B(!1)*Math.PI/180),[0,0,1]),k.lw(o,o,l),o}function B(e){if(window.screen.orientation&&!U.M.forceWindowOrientation)switch(window.screen.orientation.type){case"portrait-primary":return e?90:270;case"landscape-secondary":return 180;case"portrait-secondary":return e?270:90}else if(void 0!==window.orientation)switch(window.orientation){case 0:return e?90:270;case 90:break;case 180:return e?270:90;case -90:return 180}return 0}let N=new(r(1937)).L;var z=r(2401);!function(e){e[e.PermissionTitle=0]="PermissionTitle",e[e.PermissionDescription=1]="PermissionDescription",e[e.PermissionButton=2]="PermissionButton"}(b||(b={}));let[V,H]=function(e){let[t,r]=e.toLowerCase().split("-");return[t,r||""]}(navigator.language);function G(e){switch(V){case"es":switch(e){case b.PermissionTitle:return"Ya casi...";case b.PermissionDescription:return"Para brindar esta experiencia de realidad aumentada, necesitamos acceso a la c\xe1mara y los sensores de movimiento de su dispositivo.";case b.PermissionButton:return"Permitir acceso"}break;case"de":switch(e){case b.PermissionTitle:return"Fast am Ziel..";case b.PermissionDescription:return"Um dir dieses Augmented Reality Erlebnis zu liefern, brauchen wir Zugriff auf die Kamera und Bewegungssensoren deines Ger\xe4tes.";case b.PermissionButton:return"Gew\xe4hre Zugriff"}break;case"pt":switch(e){case b.PermissionTitle:return"Est\xe1 quase!";case b.PermissionDescription:return"Esta experi\xeancia de realidade aumentada precisa de acesso \xe0 c\xe2mera e aos sensores de movimento deste dispositivo.";case b.PermissionButton:return"Permitir acesso"}}switch(e){case b.PermissionTitle:return"Almost there...";case b.PermissionDescription:return"In order to provide this augmented reality experience, we need access to your device's camera and motion sensors.";case b.PermissionButton:return"Grant Access"}return""}var j=function(e,t,r,i){return new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})};let q=new z.UAParser,X=!1,Y=!1,W=!1,K=!1;function Z(){return j(this,void 0,void 0,function*(){if(navigator.permissions&&navigator.permissions.query)try{let e=yield navigator.permissions.query({name:"camera"});W="denied"===e.state,X="granted"===e.state}catch(e){}})}function Q(){return X}function $(){return Y}function J(){return W}function ee(){return K}function et(){return W||K}function er(){return X&&Y}function ei(){return j(this,void 0,void 0,function*(){yield es(),yield ea()})}function ea(){return j(this,void 0,void 0,function*(){try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),X=!0,W=!1}catch(e){X=!1,W=!0}})}function es(){return j(this,void 0,void 0,function*(){if(window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission&&"granted"!==(yield window.DeviceOrientationEvent.requestPermission()))return Y=!1,K=!0,!1;Y=!0,K=!1})}function en(){return j(this,void 0,void 0,function*(){if(yield Z(),er())return!0;let e=document.createElement("div");e.classList.add("zappar-permission-request"),e.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            max-width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">${G(b.PermissionTitle)}</div>
        <div class="zappar-text">${G(b.PermissionDescription)}</div>
        <button id="zappar-permission-request-button">${G(b.PermissionButton)}</button>
    </div>
`,document.body.append(e);let t=e.querySelector("#zappar-permission-request-button");return yield new Promise(r=>{null==t||t.addEventListener("click",()=>j(this,void 0,void 0,function*(){for(yield ei(),e.remove();;){if(yield new Promise(e=>requestAnimationFrame(()=>e())),et())return void r(!1);if(er())return void r(!0)}}))})})}function eo(){let e,t,r,i;"Chrome"===q.getBrowser().name?((e=document.createElement("div")).classList.add("zappar-permission-request"),e.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Permission is Needed</div>
        <div class="zappar-text">Permission to access your device's camera and motion sensors is necessary for this experience.<br/><br/>To grant access, please tap the ! button in the address bar of your browser, then "Site settings", and finally "Clear and reset". You can then reload the page to try again.</div>
        <button id="zappar-permission-reload-button">Reload</button>
    </div>
`,document.body.append(e),null==(t=e.querySelector("#zappar-permission-reload-button"))||t.addEventListener("click",()=>window.location.reload())):((r=document.createElement("div")).classList.add("zappar-permission-request"),r.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            max-width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Permission is Needed</div>
        <div class="zappar-text">Permission to access your device's camera and motion sensors is necessary for this experience. Please reload the page to try again.</div>
        <button id="zappar-permission-reload-button">Reload</button>
    </div>
`,document.body.append(r),null==(i=r.querySelector("#zappar-permission-reload-button"))||i.addEventListener("click",()=>window.location.reload()))}window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission||(Y=!0),Z();let el=f.LOG_LEVEL_ERROR;function ec(...e){el>=f.LOG_LEVEL_VERBOSE&&console.log("[Zappar] INFO",...e)}function eh(...e){el>=f.LOG_LEVEL_ERROR&&console.error("[Zappar] ERROR",...e)}function ed(...e){el>=f.LOG_LEVEL_VERBOSE&&console.log("[Zappar] WARN",...e)}let eu=1,e_=new Map;function em(e){return e_.get(e)}class ep{constructor(){this.render_mean_=new Float32Array,this.render_identity_=new Float32Array(50),this.render_expression_=new Float32Array(29),this.render_uvs_=new Float32Array,this.render_indices_=new Uint16Array,this.vertices_=new Float32Array,this.normals_=new Float32Array,this.normalsCalculated_=!1,this.modelVersion_=-1,this.mirrored_=!1}loadFromMemory(e,t,r,i,a){let s=0,n=new Uint16Array(e),o=new Int32Array(e),l=new Float32Array(e),c=()=>{let e=o[s++]*o[s++],t=l.subarray(s,s+e);return s+=e,t},h=()=>{let e=o[s++],t=n.subarray(2*s,2*s+e);return s+=e/2,t};this.render_mean_=c(),this.render_identity_=c(),this.render_expression_=c(),this.render_uvs_=c();let d=h(),u=s<o.length?h():new Uint16Array,_=s<o.length?h():new Uint16Array,m=s<o.length?h():new Uint16Array,p=s<o.length?h():new Uint16Array;if(t||r||i||a){let e=d.length;t&&(e+=u.length),r&&(e+=_.length),i&&(e+=m.length),a&&(e+=p.length),this.render_indices_=new Uint16Array(e),this.render_indices_.set(d,0);let s=d.length;t&&(this.render_indices_.set(u,s),s+=u.length),r&&(this.render_indices_.set(_,s),s+=_.length),i&&(this.render_indices_.set(m,s),s+=m.length),a&&(this.render_indices_.set(p,s),s+=p.length)}else this.render_indices_=d;this.vertices_=new Float32Array(this.render_mean_),this.normals_=new Float32Array(this.vertices_.length),this.modelVersion_++}getVertices(){return this.vertices_}getUVs(){return this.render_uvs_}getIndices(){if(this.mirrored_){if(!this.render_indices_reversed){this.render_indices_reversed=new Uint16Array(this.render_indices_.length);for(let e=0;e<this.render_indices_.length;e+=3)this.render_indices_reversed[e]=this.render_indices_[e+2],this.render_indices_reversed[e+1]=this.render_indices_[e+1],this.render_indices_reversed[e+2]=this.render_indices_[e]}return this.render_indices_reversed}return this.render_indices_}getNormals(){return this.normalsCalculated_||this.calculateNormals(),this.normals_}getModelVersion(){return this.modelVersion_}getLandmarkDataForVertex(e){let t=[this.render_mean_[3*e],this.render_mean_[3*e+1],this.render_mean_[3*e+2]],r=[];for(let t=0;t<50;t++)r.push(this.render_identity_[3*e*50+t]),r.push(this.render_identity_[(3*e+1)*50+t]),r.push(this.render_identity_[(3*e+2)*50+t]);let i=[];for(let t=0;t<29;t++)i.push(this.render_expression_[3*e*29+t]),i.push(this.render_expression_[(3*e+1)*29+t]),i.push(this.render_expression_[(3*e+2)*29+t]);return{mean:t,identity:r,expression:i}}update(e,t,r){if(0!==this.render_mean_.length&&0!==this.render_identity_.length&&0!==this.render_expression_.length){this.mirrored_=r,this.vertices_.set(this.render_mean_);for(let t=0;t<e.length;t++)for(let r=0;r<this.vertices_.length;r++)this.vertices_[r]+=e[t]*this.render_identity_[r*e.length+t];for(let e=0;e<t.length;e++)for(let r=0;r<this.vertices_.length;r++)this.vertices_[r]+=t[e]*this.render_expression_[r*t.length+e];if(r)for(let e=0;e<this.vertices_.length;e+=3)this.vertices_[e]*=-1;this.normalsCalculated_=!1}}calculateNormals(){let e=this.getIndices(),t=this.vertices_,r=new Float32Array(e.length);if(!t)return;let i=e.length,a=this.normals_,s=new Float32Array([0,0,0]),n=new Float32Array([0,0,0]),o=new Float32Array([0,0,0]);for(let a=0;a<i;a+=3){let i=3*e[a],l=3*e[a+1],c=3*e[a+2];s[0]=t[l]-t[i],s[1]=t[l+1]-t[i+1],s[2]=t[l+2]-t[i+2],n[0]=t[c]-t[i],n[1]=t[c+1]-t[i+1],n[2]=t[c+2]-t[i+2],function(e,t,r){var i=t[0],a=t[1],s=t[2],n=r[0],o=r[1],l=r[2];e[0]=a*l-s*o,e[1]=s*n-i*l,e[2]=i*o-a*n}(o,s,n);let h=Math.hypot(o[0],o[1],o[2]);r[a]=o[0]/h,r[a+1]=o[1]/h,r[a+2]=o[2]/h}a.fill(0);for(let t=0;t<i;t+=3){let i=3*e[t],s=3*e[t+1],n=3*e[t+2];a[i]+=r[t],a[i+1]+=r[t+1],a[i+2]+=r[t+2],a[s]+=r[t],a[s+1]+=r[t+1],a[s+2]+=r[t+2],a[n]+=r[t],a[n+1]+=r[t+1],a[n+2]+=r[t+2]}let l=a.length/3;for(let e=0;e<l;e++){let t=3*e;s[0]=a[t],s[1]=a[t+1],s[2]=a[t+2],function(e,t){var r=t[0],i=t[1],a=t[2],s=r*r+i*i+a*a;s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s}(n,s),a[t]=n[0],a[t+1]=n[1],a[t+2]=n[2]}this.normalsCalculated_=!0}}let ef=k.vt();class eg{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._vbo=void 0,this._shader&&this._gl.deleteProgram(this._shader.prog),this._shader=void 0}_generate(e,t){if(this._vbo)return this._vbo;if(this._vbo||(this._vbo=e.createBuffer()),!this._vbo)throw Error("Unable to create buffer object");let r=new Float32Array([-1,-1,0,0,0,-1,1,0,0,1,1,-1,0,1,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]);return e.bindBuffer(e.ARRAY_BUFFER,this._vbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._vbo}drawCameraFrame(e,t,r,i){if(!r.texture)return;let a=this._gl;a.disable(a.DEPTH_TEST),a.disable(a.SCISSOR_TEST),a.disable(a.CULL_FACE),a.disable(a.BLEND);let s=this._getCameraShader(a),n=this._generate(a,r);a.activeTexture(a.TEXTURE0),a.useProgram(s.prog),a.uniformMatrix4fv(s.unif_skinTexTransform,!1,ey(r.dataWidth,r.dataHeight,e,t,r.uvTransform||ef,i)),a.uniform1i(s.unif_skinSampler,0),a.bindTexture(a.TEXTURE_2D,r.texture),a.bindBuffer(a.ARRAY_BUFFER,n),a.vertexAttribPointer(s.attr_position,3,a.FLOAT,!1,20,0),a.enableVertexAttribArray(s.attr_position),a.vertexAttribPointer(s.attr_texCoord,2,a.FLOAT,!1,20,12),a.enableVertexAttribArray(s.attr_texCoord),a.drawArrays(a.TRIANGLES,0,6),a.disableVertexAttribArray(s.attr_position),a.disableVertexAttribArray(s.attr_texCoord),a.bindTexture(a.TEXTURE_2D,null),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(null)}_getCameraShader(e){if(this._shader)return this._shader;let t=e.createProgram();if(!t)throw Error("Unable to create program");let r=(0,S.R)(e,e.VERTEX_SHADER,ev),i=(0,S.R)(e,e.FRAGMENT_SHADER,eb);e.attachShader(t,r),e.attachShader(t,i),(0,S.i)(e,t);let a=e.getUniformLocation(t,"skinTexTransform");if(!a)throw Error("Unable to get uniform location skinTexTransform");let s=e.getUniformLocation(t,"skinSampler");if(!s)throw Error("Unable to get uniform location skinSampler");return this._shader={prog:t,unif_skinTexTransform:a,unif_skinSampler:s,attr_position:e.getAttribLocation(t,"position"),attr_texCoord:e.getAttribLocation(t,"texCoord")},this._shader}}let ev=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

attribute vec4 position;
attribute vec4 texCoord;
varying vec4 skinTexVarying;
uniform mat4 skinTexTransform;

void main()
{
    gl_Position = position;
    skinTexVarying = skinTexTransform * texCoord;
}`,eb=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying vec4 skinTexVarying;
uniform lowp sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2DProj(skinSampler, skinTexVarying);
}`;function ey(e,t,r,i,a,s){let n=k.vt(),o=k.vt();k.kN(o,[-.5,-.5,0]),k.lw(n,o,n),s&&(k.CV(o,[-1,1,1]),k.lw(n,o,n)),k.$0(o,-1*function(){if(window.screen.orientation&&!U.M.forceWindowOrientation)switch(window.screen.orientation.type){case"portrait-primary":return 270;case"landscape-secondary":return 180;case"portrait-secondary":return 90}else if(void 0!==window.orientation)switch(window.orientation){case 0:return 270;case 90:break;case 180:return 90;case -90:return 180}return 0}()*Math.PI/180,[0,0,1]),k.lw(n,o,n);let l=D();l[0]=r,l[1]=i,l[2]=0,P(l,l,o);let c=Math.abs(l[0]),h=Math.abs(l[1]);k.CV(o,[1,-1,1]),k.lw(n,o,n);let d=c/h,u=e/t;return d>u?k.CV(o,[1,u/d,1]):k.CV(o,[d/u,1,1]),k.lw(n,o,n),k.kN(o,[.5,.5,0]),k.lw(n,o,n),k.lw(n,a,n),n}class eA{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._normalbo&&this._gl.deleteBuffer(this._normalbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._normalbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,t){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=t.createBuffer()),!this._ibo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._ibo),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,t){if(this._vbo||(this._vbo=t.createBuffer()),!this._vbo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,this._vbo),t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._vbo}_generateNormalBO(e,t){if(this._normalbo||(this._normalbo=t.createBuffer()),!this._normalbo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,this._normalbo),t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._normalbo}drawFace(e,t){let r=this._gl,i=this._getShader(r),a=this._generateVBO(t.getVertices(),r),s=this._generateNormalBO(t.getNormals(),r),n=this._generateIBO(t.getIndices(),r);r.enable(r.DEPTH_TEST),r.enable(r.CULL_FACE),r.useProgram(i.prog),r.uniformMatrix4fv(i.unif_matrix,!1,e),r.bindBuffer(r.ARRAY_BUFFER,a),r.vertexAttribPointer(i.attr_position,3,r.FLOAT,!1,12,0),r.enableVertexAttribArray(i.attr_position),r.bindBuffer(r.ARRAY_BUFFER,s),r.vertexAttribPointer(i.attr_normal,3,r.FLOAT,!1,12,0),r.enableVertexAttribArray(i.attr_normal),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.drawElements(r.TRIANGLES,t.getIndices().length,r.UNSIGNED_SHORT,0),r.disableVertexAttribArray(i.attr_position),r.disableVertexAttribArray(i.attr_normal),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let t=e.createProgram();if(!t)throw Error("Unable to create program");let r=(0,S.R)(e,e.VERTEX_SHADER,eT),i=(0,S.R)(e,e.FRAGMENT_SHADER,eE);e.attachShader(t,r),e.attachShader(t,i),(0,S.i)(e,t);let a=e.getUniformLocation(t,"matrix");if(!a)throw Error("Unable to get uniform location mattrix");return this._shader={prog:t,unif_matrix:a,attr_position:e.getAttribLocation(t,"position"),attr_normal:e.getAttribLocation(t,"normal")},this._shader}}let eT=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
attribute vec4 position;
attribute vec3 normal;
varying highp vec3 vnormal;

void main()
{
    gl_Position = matrix * position;
    vnormal = normal;
}`,eE=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying vec4 skinTexVarying;
varying highp vec3 vnormal;
uniform lowp sampler2D skinSampler;

void main()
{
    vec3 normal2 = 0.5 * vnormal + 0.5;
    gl_FragColor = vec4(normal2.x , normal2.y, normal2.z, 1.0);
}`;class ew{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._uvbo&&this._gl.deleteBuffer(this._uvbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._uvbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,t){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=t.createBuffer()),!this._ibo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._ibo),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,t){if(this._vbo||(this._vbo=t.createBuffer()),!this._vbo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,this._vbo),t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._vbo}_generateUVBO(e,t){if(this._uvbo||(this._uvbo=t.createBuffer()),!this._uvbo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,this._uvbo),t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._uvbo}drawFace(e,t,r,i,a,s){let n=this._gl,o=this._getShader(n),l=this._generateVBO(t,n),c=this._generateUVBO(i,n),h=this._generateIBO(a,n);n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.useProgram(o.prog),n.uniformMatrix4fv(o.unif_matrix,!1,e),n.uniformMatrix4fv(o.unif_uvmatrix,!1,r),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.uniform1i(o.unif_sampler,0),n.bindBuffer(n.ARRAY_BUFFER,l),n.vertexAttribPointer(o.attr_position,3,n.FLOAT,!1,12,0),n.enableVertexAttribArray(o.attr_position),n.bindBuffer(n.ARRAY_BUFFER,c),n.vertexAttribPointer(o.attr_uv,3,n.FLOAT,!1,12,0),n.enableVertexAttribArray(o.attr_uv),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h),n.drawElements(n.TRIANGLES,6912,n.UNSIGNED_SHORT,0),n.disableVertexAttribArray(o.attr_position),n.disableVertexAttribArray(o.attr_uv),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let t=e.createProgram();if(!t)throw Error("Unable to create program");let r=(0,S.R)(e,e.VERTEX_SHADER,ex),i=(0,S.R)(e,e.FRAGMENT_SHADER,eR);e.attachShader(t,r),e.attachShader(t,i),(0,S.i)(e,t);let a=e.getUniformLocation(t,"matrix");if(!a)throw Error("Unable to get uniform location matrix");let s=e.getUniformLocation(t,"uvmatrix");if(!s)throw Error("Unable to get uniform location matrix");let n=e.getUniformLocation(t,"uSampler");if(!n)throw Error("Unable to get uniform location sampler");return this._shader={prog:t,unif_matrix:a,unif_sampler:n,unif_uvmatrix:s,attr_position:e.getAttribLocation(t,"position"),attr_uv:e.getAttribLocation(t,"uv"),attr_texturecoord:e.getAttribLocation(t,"aTextureCoord")},this._shader}}let ex=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
uniform mat4 uvmatrix;
attribute vec4 position;
attribute vec3 normal;
attribute vec3 uv;

// varying highp vec3 vnormal;

varying highp vec2 vTextureCoord;
varying highp float vAlpha;

void main()
{
    gl_Position = matrix * position;
    vec4 ret = uvmatrix * vec4(uv.x, uv.y, uv.z, 1.0);
    ret.x /= ret.w * 2.0;
    ret.y /= ret.w * 2.0;
    ret.x += 0.5;
    ret.y += 0.0;
    vAlpha = 1.0;
    vTextureCoord = ret.xy;
}`,eR=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
varying highp vec3 vnormal;
varying highp float vAlpha;
uniform lowp sampler2D uSampler;

void main()
{
    // vec3 normal2 = 0.5 * vnormal + 0.5;
    vec4 p = texture2D(uSampler, vTextureCoord);
    p.a = vAlpha;
    gl_FragColor = p; // vec4(normal2.x , normal2.y, normal2.z, 1.0);
}`;var eM=r(3979);!function(e){e[e.CAMERA_FRAME=0]="CAMERA_FRAME",e[e.ACCELEROMETER=1]="ACCELEROMETER",e[e.ROTATION_RATE=2]="ROTATION_RATE",e[e.ATTITUDE=3]="ATTITUDE",e[e.ATTITUDE_MATRIX=4]="ATTITUDE_MATRIX"}(y||(y={}));class eS{constructor(e){this._insertionByte=0,this._numberPackets=0,this._started=!1,this._hasLoggedUnsuppored=!1,this._data=new ArrayBuffer(this._estimatedSize(e,320,240)),this._dataView=new DataView(this._data),this._dataUint8=new Uint8Array(this._data),this._dataFloat32=new Float32Array(this._data)}_estimatedSize(e,t,r){return eS.headerSizeBytes+(eS.psbPacketType+eS.cameraPacketSizeBytes+t*r)*e}start(){this._started=!0,this._insertionByte=0,this._numberPackets=0,this._growArrayBuffer(eS.headerSizeBytes);let e=new TextEncoder().encode("UAR1");this._dataUint8.set(e),this._dataView.setUint32(4,0,!0),this._insertionByte+=8}stop(){this._started=!1;let e=this._data.slice(0,this._insertionByte);this._data=e,this._dataUint8=new Uint8Array(this._data),this._dataFloat32=new Float32Array(this._data),this._dataView=new DataView(this._data)}data(){return this._dataUint8}appendCameraFrame(e){if(!this._started)return;if(!e.data){if(this._hasLoggedUnsuppored)return;this._hasLoggedUnsuppored=!0,eh("Unable to record frames from this camera source");return}if(e.data.byteLength!==e.dataWidth*e.dataHeight)return void eh("Unable to record frame to sequence: greyscale array doesn't match dimensions");let t=eS.psbPacketType+eS.cameraPacketSizeBytes+e.dataWidth*e.dataHeight;this._growArrayBuffer(t),this._dataView.setUint32(this._insertionByte,y.CAMERA_FRAME,!0),this._insertionByte+=eS.psbPacketType,this._dataView.setUint32(this._insertionByte,e.dataWidth,!0),this._insertionByte+=eS.psbCameraFrameWidth,this._dataView.setUint32(this._insertionByte,e.dataHeight,!0),this._insertionByte+=eS.psbCameraFrameHeight,this._dataFloat32.set(e.cameraToDevice,this._insertionByte/4),this._insertionByte+=eS.psbCameraToDeviceTransform,this._dataFloat32.set(e.cameraModel,this._insertionByte/4),this._insertionByte+=eS.psbCameraModel,this._dataView.setUint32(this._insertionByte,+!!e.userFacing,!0),this._insertionByte+=eS.psbFlags,this._dataUint8.set(new Uint8Array(e.data),this._insertionByte),this._insertionByte+=e.data.byteLength,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}appendAccelerometer(e,t,r,i){this._appendTimestampedVec3(y.ACCELEROMETER,e,t,r,i)}appendRotationRate(e,t,r,i){this._appendTimestampedVec3(y.ROTATION_RATE,e,t,r,i)}appendAttitude(e,t,r,i){this._appendTimestampedVec3(y.ATTITUDE,e,t,r,i)}_appendTimestampedVec3(e,t,r,i,a){if(!this._started)return;let s=eS.psbPacketType+eS.accelerometerPacketSizeBytes;this._growArrayBuffer(s),this._dataView.setUint32(this._insertionByte,e,!0),this._insertionByte+=eS.psbPacketType,this._dataView.setUint32(this._insertionByte,t,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,r,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,i,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,a,!0),this._insertionByte+=4,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}appendAttitudeMatrix(e){if(!this._started)return;let t=eS.psbPacketType+eS.attitudeMatrixPacketSizeBytes;this._growArrayBuffer(t),this._dataView.setUint32(this._insertionByte,y.ATTITUDE_MATRIX,!0),this._insertionByte+=eS.psbPacketType,this._dataFloat32.set(e,this._insertionByte/4),this._insertionByte+=eS.attitudeMatrixPacketSizeBytes,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}_growArrayBuffer(e){for(;this._insertionByte+e>this._data.byteLength;){let e=new ArrayBuffer(Math.max(2*this._data.byteLength,this._estimatedSize(50,320,240))),t=new Uint8Array(e);t.set(this._dataUint8),this._data=e,this._dataUint8=t,this._dataFloat32=new Float32Array(this._data),this._dataView=new DataView(this._data)}}}eS.headerSizeBytes=8,eS.psbPacketType=4,eS.psbCameraFrameWidth=4,eS.psbCameraFrameHeight=4,eS.psbFlags=4,eS.psbCameraToDeviceTransform=64,eS.psbCameraModel=24,eS.cameraPacketSizeBytes=eS.psbCameraFrameWidth+eS.psbCameraFrameHeight+eS.psbCameraToDeviceTransform+eS.psbCameraModel+eS.psbFlags,eS.accelerometerPacketSizeBytes=16,eS.rotationRatePacketSizeBytes=16,eS.attitudePacketSizeBytes=16,eS.attitudeMatrixPacketSizeBytes=64;class eI{constructor(e){this._data=e,this.dataByPacket=new Map,this.dataByCameraFrame=new Map,this.numberPackets=0,this.numberCameraFrames=0,this.numberAccelerometerPackets=0,this.numberRotationRatePackets=0,this.numberAttitudePackets=0,this.numberAttitudeMatrixPackets=0;let t=new TextDecoder,r="";try{r=t.decode(this._data.slice(0,4))}catch(e){throw Error("Unable to decode header - perhaps this isn't a sequence file?")}if("UAR1"!==r)throw Error(`Invalid - perhaps this isn't a sequence file: ${r}`);let i=0,a=new DataView(this._data);this.numberPackets=a.getUint32(4,!0),i+=eS.headerSizeBytes;for(let e=0;e<this.numberPackets;e++){let t=a.getUint32(i,!0);switch(i+=eS.psbPacketType,t){case y.CAMERA_FRAME:{let t=a.getUint32(i,!0);i+=eS.psbCameraFrameWidth;let r=a.getUint32(i,!0);i+=eS.psbCameraFrameHeight;let s=new Float32Array(this._data,i,eS.psbCameraToDeviceTransform/4);i+=eS.psbCameraToDeviceTransform;let n=new Float32Array(this._data,i,eS.psbCameraModel/4);i+=eS.psbCameraModel;let o=a.getUint32(i,!0);i+=eS.psbFlags;let l=1===o,c=new Uint8Array(this._data,i,t*r);i+=t*r;let h={type:y.CAMERA_FRAME,width:t,height:r,cameraToDevice:s,cameraModel:n,userFacing:l,greyscale:c};this.dataByPacket.set(e,h),this.dataByCameraFrame.set(this.numberCameraFrames,h),this.numberCameraFrames++;break}case y.ACCELEROMETER:{let t=a.getUint32(i,!0);i+=4;let r=a.getFloat32(i,!0);i+=4;let s=a.getFloat32(i,!0);i+=4;let n=a.getFloat32(i,!0);i+=4,this.dataByPacket.set(e,{type:y.ACCELEROMETER,t,x:r,y:s,z:n}),this.numberAccelerometerPackets++;break}case y.ROTATION_RATE:{let t=a.getUint32(i,!0);i+=4;let r=a.getFloat32(i,!0);i+=4;let s=a.getFloat32(i,!0);i+=4;let n=a.getFloat32(i,!0);i+=4,this.dataByPacket.set(e,{type:y.ROTATION_RATE,t,x:r,y:s,z:n}),this.numberRotationRatePackets++;break}case y.ATTITUDE:{let t=a.getUint32(i,!0);i+=4;let r=a.getFloat32(i,!0);i+=4;let s=a.getFloat32(i,!0);i+=4;let n=a.getFloat32(i,!0);i+=4,this.dataByPacket.set(e,{type:y.ATTITUDE,t,x:r,y:s,z:n}),this.numberAttitudePackets++;break}case y.ATTITUDE_MATRIX:{let t=new Float32Array(this._data,i,eS.attitudeMatrixPacketSizeBytes/4);i+=eS.attitudeMatrixPacketSizeBytes,this.dataByPacket.set(e,{type:y.ATTITUDE_MATRIX,attitude:t}),this.numberAttitudeMatrixPackets++}}}}}class eC{}var eF=r(7069);let ek=1,eL=new Map;class eD extends eC{constructor(e,t){super(),this._video=e,this._pipeline=t,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._cameraToDeviceTransform=k.vt(),this._cameraToDeviceTransformUserFacing=k.vt(),this._cameraModel=new Float32Array([300,300,160,120,0,0]),k.CV(this._cameraToDeviceTransformUserFacing,[-1,1,-1]);let r=this._video;this._video instanceof HTMLVideoElement?r.addEventListener("loadedmetadata",()=>{this._hadFrames=!0}):this._hadFrames=!0,this._resetGLContext=this._resetGLContext.bind(this);let i=e$.get(this._pipeline);i&&i.onGLContextReset.bind(this._resetGLContext)}static createVideoElementSource(e,t){let r=ek++;return eL.set(r,new eD(t,e)),ec("html_element_source_t initialized"),r}static getVideoElementSource(e){return eL.get(e)}_resetGLContext(){var e,t;this._currentVideoTexture=void 0,null==(t=null==(e=this._imageProcessor)?void 0:e.resetGLContext)||t.call(e)}destroy(){let e=e$.get(this._pipeline);e&&e.onGLContextReset.unbind(this._resetGLContext),this.pause(),this._resetGLContext()}pause(){this._isPaused=!0;let e=e$.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0)}start(){var e;this._isPaused&&(this._isUploadFrame=!0,this._video instanceof HTMLVideoElement&&(this._hadFrames=!1)),this._isPaused=!1;let t=e$.get(this._pipeline);t&&t.currentCameraSource!==this&&(null==(e=t.currentCameraSource)||e.pause(),t.currentCameraSource=this)}getFrame(e){let t=e$.get(this._pipeline);if(!t)return;let r=t.glContext;if(r&&!this._isPaused&&this._hadFrames)try{let i=this._processFrame(r,this._cameraToScreenRotation,e);if(i){let e=t.registerToken(i);t.sendDataToWorker(i.data||new ArrayBuffer(0),e,i.dataWidth,i.dataHeight,i.userFacing,i.cameraToDevice,i.cameraModel)}}catch(e){console.log("Unable to process frame")}}_processFrame(e,t,r){let i=e$.get(this._pipeline);if(!i)return;if(this._imageProcessor||(this._imageProcessor=new eF.O(e)),this._isUploadFrame){if(this._currentVideoTexture||(this._currentVideoTexture=i.getVideoTexture()),!this._currentVideoTexture)return;this._imageProcessor.uploadFrame(this._currentVideoTexture,this._video,t,this._isUserFacing),this._isUploadFrame=!this._isUploadFrame;return}if(r||!this._currentVideoTexture)return;this._isUploadFrame=!this._isUploadFrame;let a=U.M.dataWidth*U.M.dataHeight,s=i.cameraPixelArrays.pop();for(;s&&s.byteLength!==a;)s=i.cameraPixelArrays.pop();s||(s=new ArrayBuffer(a));let n=this._currentVideoTexture;this._currentVideoTexture=void 0;let o=300*U.M.dataWidth/320;return this._cameraModel[0]=o,this._cameraModel[1]=o,this._cameraModel[2]=.5*U.M.dataWidth,this._cameraModel[3]=.5*U.M.dataHeight,Object.assign(Object.assign({},this._imageProcessor.readFrame(n,s)),{cameraModel:this._cameraModel,cameraSource:this,cameraToDevice:this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform})}uploadGL(){}}var eP=function(e,t,r,i){return new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})};let eU=document.createElement("video");eU.setAttribute("playsinline",""),eU.setAttribute("webkit-playsinline",""),U.M.videoElementInDOM&&(eU.style.width="0px",eU.style.height="0px",document.body.appendChild(eU));class eO extends eD{constructor(e,t,r){super(eU,t),this._impl=e,this._deviceId=r,this._currentStream=null,this._activeDeviceId=null,this._hasStartedOrientation=!1,this._deviceMotionListener=e=>{let t=e$.get(this._pipeline);if(!t)return;let r=void 0!==e.timeStamp&&null!==e.timeStamp?e.timeStamp:performance.now();null!==e.accelerationIncludingGravity&&null!==e.accelerationIncludingGravity.x&&null!==e.accelerationIncludingGravity.y&&null!==e.accelerationIncludingGravity.z&&t.motionAccelerometerSubmit(r,e.accelerationIncludingGravity.x*U.M.deviceMotionMutliplier,e.accelerationIncludingGravity.y*U.M.deviceMotionMutliplier,e.accelerationIncludingGravity.z*U.M.deviceMotionMutliplier),null===e.rotationRate||null===e.rotationRate.alpha||null===e.rotationRate.beta||null===e.rotationRate.gamma||this._hasStartedOrientation?this._hasStartedOrientation||this._startDeviceOrientation():(e.timeStamp,t.motionRotationRateSubmit(r,-(e.rotationRate.alpha*Math.PI/180),-(e.rotationRate.beta*Math.PI/180),-(e.rotationRate.gamma*Math.PI/180)))}}destroy(){eq(this._impl),super.destroy()}_stop(){this._currentStream&&(this._currentStream.getTracks().forEach(e=>e.stop()),this._currentStream=null)}pause(){super.pause(),this._stopDeviceMotion(),this._syncCamera()}start(){super.start(),this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return eP(this,void 0,void 0,function*(){let e,t;if(this._deviceId!==eO.DEFAULT_DEVICE_ID&&this._deviceId!==eO.USER_DEFAULT_DEVICE_ID)e=this._deviceId;else if(t=this._deviceId===eO.DEFAULT_DEVICE_ID?"environment":"user",U.M.ios164CameraSelection){if(!this._explicitEnvironmentCameraId||!this._explicitUserCameraId){(yield navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:t}})).getTracks().forEach(e=>e.stop());let e=yield navigator.mediaDevices.enumerateDevices();(e=e.filter(e=>"videoinput"===e.kind)).length>=2&&(this._explicitUserCameraId=e[0].deviceId,this._explicitEnvironmentCameraId=e[1].deviceId)}e="environment"===t?this._explicitEnvironmentCameraId:this._explicitUserCameraId}let r={audio:!1,video:{facingMode:t,width:U.M.videoWidth,height:U.M.videoHeight,frameRate:U.M.requestHighFrameRate?60:void 0,deviceId:e}};if(e||U.M.relyOnConstraintsForCameraSelection||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return r;let i=yield navigator.mediaDevices.enumerateDevices(),a=!1;return i=i.filter(e=>{if("videoinput"!==e.kind)return!1;if(e.getCapabilities){a=!0;let r=e.getCapabilities();if(r&&r.facingMode&&0>r.facingMode.indexOf("user"===t?"user":"environment"))return!1}return!0}),a&&0!==i.length&&"object"==typeof r.video&&(ec("choosing device ID",i[i.length-1].deviceId),r.video.deviceId=i[i.length-1].deviceId),r})}getFrame(e){this._cameraToScreenRotation=B(!1),super.getFrame(e)}_getUserMedia(){return eP(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((t,r)=>{navigator.getUserMedia(e,t,r)})})}_syncCamera(){return eP(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused)return void this._stop();if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused)return void(yield this._syncCamera());if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();e.length>0&&(this._isUserFacing="user"===e[0].getSettings().facingMode)}if(!(this._video instanceof HTMLVideoElement))return;this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,this._deviceOrientationListener=e=>{let t=e$.get(this._pipeline);if(!t)return;let r=void 0!==e.timeStamp&&null!==e.timeStamp?e.timeStamp:performance.now();null!==e.alpha&&null!==e.beta&&null!==e.gamma&&t.motionAttitudeSubmit(r,e.alpha,e.beta,e.gamma)},window.addEventListener("deviceorientation",this._deviceOrientationListener))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener),this._deviceOrientationListener&&window.removeEventListener("deviceorientation",this._deviceOrientationListener)}}eO.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b",eO.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";var eB=function(e,t,r,i){return new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})};class eN extends eC{constructor(e,t,r){super(),this._impl=e,this._pipeline=t,this._deviceId=r,this._currentStream=null,this._activeDeviceId=null,this._isPaused=!0,this._isUserFacing=!1,this._hadFrames=!1,this._canvas=new OffscreenCanvas(640,480),this._context=this._canvas.getContext("2d"),this._lastFrameTime=-1,this._video=document.createElement("video"),this._cameraToDeviceTransform=k.vt(),this._cameraToDeviceTransformUserFacing=k.vt(),this._cameraModel=new Float32Array([300,300,160,120,0,0]),this._hasStartedOrientation=!1,this._deviceMotionListener=e=>{let t=e$.get(this._pipeline);if(!t)return;let r=void 0!==e.timeStamp&&null!==e.timeStamp?e.timeStamp:performance.now();null!==e.accelerationIncludingGravity&&null!==e.accelerationIncludingGravity.x&&null!==e.accelerationIncludingGravity.y&&null!==e.accelerationIncludingGravity.z&&t.motionAccelerometerSubmit(r,e.accelerationIncludingGravity.x*U.M.deviceMotionMutliplier,e.accelerationIncludingGravity.y*U.M.deviceMotionMutliplier,e.accelerationIncludingGravity.z*U.M.deviceMotionMutliplier),null===e.rotationRate||null===e.rotationRate.alpha||null===e.rotationRate.beta||null===e.rotationRate.gamma||this._hasStartedOrientation?this._hasStartedOrientation||this._startDeviceOrientation():(e.timeStamp,t.motionRotationRateSubmit(r,-(e.rotationRate.alpha*Math.PI/180),-(e.rotationRate.beta*Math.PI/180),-(e.rotationRate.gamma*Math.PI/180)))},ec("Using ImageBitmap camera source"),k.CV(this._cameraToDeviceTransformUserFacing,[-1,1,-1]),this._video.muted=!0,this._video.setAttribute("playsinline",""),this._video.setAttribute("webkit-playsinline",""),U.M.videoElementInDOM&&(this._video.style.width="0px",this._video.style.height="0px",document.body.appendChild(this._video)),this._video.addEventListener("loadedmetadata",()=>{this._hadFrames=!0})}destroy(){this.pause(),eq(this._impl)}_stop(){this._currentStream&&(this._currentStream.getTracks().forEach(e=>e.stop()),this._currentStream=null)}pause(){this._isPaused=!0;let e=e$.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0),this._stopDeviceMotion(),this._syncCamera()}start(){var e;let t=e$.get(this._pipeline);t&&t.currentCameraSource!==this&&(null==(e=t.currentCameraSource)||e.pause(),t.currentCameraSource=this),this._isPaused=!1,this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return eB(this,void 0,void 0,function*(){let e,t;this._deviceId!==eN.DEFAULT_DEVICE_ID&&this._deviceId!==eN.USER_DEFAULT_DEVICE_ID?e=this._deviceId:t=this._deviceId===eN.DEFAULT_DEVICE_ID?"environment":"user";let r={audio:!1,video:{facingMode:t,width:U.M.videoWidth,height:U.M.videoHeight,frameRate:U.M.requestHighFrameRate?60:void 0,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return r;let i=yield navigator.mediaDevices.enumerateDevices(),a=!1;return i=i.filter(e=>{if("videoinput"!==e.kind)return!1;if(e.getCapabilities){a=!0;let r=e.getCapabilities();if(r&&r.facingMode&&0>r.facingMode.indexOf("user"===t?"user":"environment"))return!1}return!0}),a&&0!==i.length&&"object"==typeof r.video&&(ec("choosing device ID",i[i.length-1].deviceId),r.video.deviceId=i[i.length-1].deviceId),r})}getFrame(e){var t,r;if(!this._context||!this._hadFrames||e)return;let i=performance.now();if(i<this._lastFrameTime+25)return;this._lastFrameTime=i,this._canvas.width!==this._video.videoWidth&&(this._canvas.width=this._video.videoWidth),this._canvas.height!==this._video.videoHeight&&(this._canvas.height=this._video.videoHeight),this._context.drawImage(this._video,0,0);let a=this._canvas.transferToImageBitmap(),s=B(!1),n=e$.get(this._pipeline);if(!n)return;let o=300*U.M.dataWidth/320;this._cameraModel[0]=o,this._cameraModel[1]=o,this._cameraModel[2]=.5*U.M.dataWidth,this._cameraModel[3]=.5*U.M.dataHeight;let l=n.registerToken({dataWidth:this._canvas.width,dataHeight:this._canvas.height,texture:void 0,userFacing:this._isUserFacing,cameraSource:this,cameraModel:this._cameraModel.slice(),cameraToDevice:this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform});null==(r=null==(t=e$.get(this._pipeline))?void 0:t.sendImageBitmapToWorker)||r.call(t,a,s,this._isUserFacing,l,this._cameraModel,this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform)}_getUserMedia(){return eB(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((t,r)=>{navigator.getUserMedia(e,t,r)})})}_syncCamera(){return eB(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused)return void this._stop();if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused)return void(yield this._syncCamera());if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();e.length>0&&(this._isUserFacing="user"===e[0].getSettings().facingMode)}this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",e=>{let t=e$.get(this._pipeline);if(!t)return;let r=void 0!==e.timeStamp&&null!==e.timeStamp?e.timeStamp:performance.now();null!==e.alpha&&null!==e.beta&&null!==e.gamma&&t.motionAttitudeSubmit(r,e.alpha,e.beta,e.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}uploadGL(e){let t=e$.get(this._pipeline),r=null==t?void 0:t.glContext;if(!e||e.texture||!e.frame||!t||!r)return;let i=t.getVideoTexture();i&&(r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e.frame),r.bindTexture(r.TEXTURE_2D,null),e.texture=i,e.frame.close(),delete e.frame)}}eN.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b",eN.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";var ez=function(e,t,r,i){return new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})};class eV extends eC{constructor(e,t,r){super(),this._impl=e,this._pipeline=t,this._deviceId=r,this._currentStream=null,this._activeDeviceId=null,this._isPaused=!0,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._hasStartedOrientation=!1,this._deviceMotionListener=e=>{let t=e$.get(this._pipeline);if(!t)return;let r=void 0!==e.timeStamp&&null!==e.timeStamp?e.timeStamp:performance.now();null!==e.accelerationIncludingGravity&&null!==e.accelerationIncludingGravity.x&&null!==e.accelerationIncludingGravity.y&&null!==e.accelerationIncludingGravity.z&&t.motionAccelerometerSubmit(r,e.accelerationIncludingGravity.x*U.M.deviceMotionMutliplier,e.accelerationIncludingGravity.y*U.M.deviceMotionMutliplier,e.accelerationIncludingGravity.z*U.M.deviceMotionMutliplier),null===e.rotationRate||null===e.rotationRate.alpha||null===e.rotationRate.beta||null===e.rotationRate.gamma||this._hasStartedOrientation?this._hasStartedOrientation||this._startDeviceOrientation():(e.timeStamp,t.motionRotationRateSubmit(r,-(e.rotationRate.alpha*Math.PI/180),-(e.rotationRate.beta*Math.PI/180),-(e.rotationRate.gamma*Math.PI/180)))},ec("Using MSTP camera source")}destroy(){this.pause(),eq(this._impl)}_stop(){this._currentStream&&(this._currentStream.getTracks().forEach(e=>e.stop()),this._currentStream=null)}pause(){this._isPaused=!0;let e=e$.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0),this._stopDeviceMotion(),this._syncCamera()}start(){var e;let t=e$.get(this._pipeline);t&&t.currentCameraSource!==this&&(null==(e=t.currentCameraSource)||e.pause(),t.currentCameraSource=this),this._isPaused=!1,this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return ez(this,void 0,void 0,function*(){let e,t;this._deviceId!==eV.DEFAULT_DEVICE_ID&&this._deviceId!==eV.USER_DEFAULT_DEVICE_ID?e=this._deviceId:t=this._deviceId===eV.DEFAULT_DEVICE_ID?"environment":"user";let r={audio:!1,video:{facingMode:t,width:U.M.videoWidth,height:U.M.videoHeight,frameRate:U.M.requestHighFrameRate?60:30,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return r;let i=yield navigator.mediaDevices.enumerateDevices(),a=!1;return i=i.filter(e=>{if("videoinput"!==e.kind)return!1;if(e.getCapabilities){a=!0;let r=e.getCapabilities();if(r&&r.facingMode&&0>r.facingMode.indexOf("user"===t?"user":"environment"))return!1}return!0}),a&&0!==i.length&&"object"==typeof r.video&&(ec("choosing device ID",i[i.length-1].deviceId),r.video.deviceId=i[i.length-1].deviceId),r})}getFrame(e){var t,r;let i=B(!1);i!=this._cameraToScreenRotation&&(null==(r=null==(t=e$.get(this._pipeline))?void 0:t.sendCameraToScreenRotationToWorker)||r.call(t,i),this._cameraToScreenRotation=i)}_getUserMedia(){return ez(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((t,r)=>{navigator.getUserMedia(e,t,r)})})}_syncCamera(){return ez(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused)return void this._stop();if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused)return void(yield this._syncCamera());if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();if(e.length>0){this._isUserFacing="user"===e[0].getSettings().facingMode;let t=new MediaStreamTrackProcessor({track:e[0]}),r=e$.get(this._pipeline);r&&r.sendCameraStreamToWorker(this._impl,t.readable,this._isUserFacing)}}}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",e=>{let t=e$.get(this._pipeline);if(!t)return;let r=void 0!==e.timeStamp&&null!==e.timeStamp?e.timeStamp:performance.now();null!==e.alpha&&null!==e.beta&&null!==e.gamma&&t.motionAttitudeSubmit(r,e.alpha,e.beta,e.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}uploadGL(e){let t=e$.get(this._pipeline),r=null==t?void 0:t.glContext;if(!e||e.texture||!e.frame||!t||!r)return;let i=t.getVideoTexture();i&&(r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e.frame),r.bindTexture(r.TEXTURE_2D,null),e.texture=i,e.frame.close(),delete e.frame)}}eV.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b",eV.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";let eH=1,eG=new Map;function ej(e){return eG.get(e)}function eq(e){eG.delete(e)}class eX{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._uvbo&&this._gl.deleteBuffer(this._uvbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._uvbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,t){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=t.createBuffer()),!this._ibo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._ibo),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,t){if(this._vbo||(this._vbo=t.createBuffer()),!this._vbo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,this._vbo),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._vbo}_generateUVBO(e,t){if(this._uvbo||(this._uvbo=t.createBuffer()),!this._uvbo)throw Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,this._uvbo),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._uvbo}draw(e,t,r){var i;let a=t.getPreviewMesh(r),s=null==(i=t.getTargetInfo(r).preview)?void 0:i.image;if(!a||!s||!s.complete)return;let n=this._gl,o=this._getShader(n),l=this._generateVBO(a.vertices,n),c=this._generateUVBO(a.uvs,n),h=this._generateIBO(a.indices,n);n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.useProgram(o.prog),n.uniformMatrix4fv(o.unif_matrix,!1,e),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,function(e,t){let r=eY.get(t);if(r)return r;if(!(r=e.createTexture()||void 0))throw Error("Unable to create texture");eY.set(t,r),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);let i=e.RGBA,a=e.RGBA,s=e.UNSIGNED_BYTE;return e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,i,a,s,t),t.addEventListener("load",()=>{if(!r)return;e.bindTexture(e.TEXTURE_2D,r);let i=e.RGBA,a=e.RGBA,s=e.UNSIGNED_BYTE;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,i,a,s,t)}),r}(n,s)),n.uniform1i(o.unif_skinSampler,0),n.bindBuffer(n.ARRAY_BUFFER,l),n.vertexAttribPointer(o.attr_position,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o.attr_position),n.bindBuffer(n.ARRAY_BUFFER,c),n.vertexAttribPointer(o.attr_textureCoord,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o.attr_textureCoord),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h),n.drawElements(n.TRIANGLES,a.indices.length,n.UNSIGNED_SHORT,0),n.disableVertexAttribArray(o.attr_position),n.disableVertexAttribArray(o.attr_textureCoord),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let t=e.createProgram();if(!t)throw Error("Unable to create program");let r=(0,S.R)(e,e.VERTEX_SHADER,eW),i=(0,S.R)(e,e.FRAGMENT_SHADER,eK);e.attachShader(t,r),e.attachShader(t,i),(0,S.i)(e,t);let a=e.getUniformLocation(t,"matrix");if(!a)throw Error("Unable to get uniform location mattrix");let s=e.getUniformLocation(t,"skinSampler");if(!s)throw Error("Unable to get uniform location skinSampler");return this._shader={prog:t,unif_matrix:a,unif_skinSampler:s,attr_position:e.getAttribLocation(t,"position"),attr_textureCoord:e.getAttribLocation(t,"textureCoord")},this._shader}}let eY=new Map,eW=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
attribute vec4 position;
attribute vec2 textureCoord;

varying highp vec2 vTextureCoord;

void main()
{
    gl_Position = matrix * position;
    vTextureCoord = textureCoord;
}`,eK=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
uniform sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2D(skinSampler, vTextureCoord);
}`,eZ=new Map,eQ=k.vt();class e${constructor(e,t,r){this._client=e,this._impl=t,this._mgr=r,this.pendingMessages=[],this.cameraTokens=new Map,this.nextCameraToken=1,this.tokensInFlight=0,this.videoTextures=[],this.cameraPixelArrays=[],this._sequenceRecordDeviceAttitudeMatrices=!0,this._sequenceRecorderFirstCameraToken=0,this.onGLContextReset=new eM.Jh}static create(e,t){let r=e.pipeline_create();return eZ.set(r,new e$(e,r,t)),r}static get(e){return eZ.get(e)}frameUpdate(e){for(let t of this.pendingMessages)e.processMessages(t),this._mgr.postOutgoingMessage({t:"buf",p:this._impl,d:t},[t]);this.pendingMessages=[],this.cleanOldFrames()}cleanOldFrames(){var e,t;let r=this._client.pipeline_camera_frame_user_data(this._impl);if(r)for(let i of this.cameraTokens)i[0]<r&&(i[1].texture&&this.videoTextures.push(i[1].texture),null==(t=null==(e=i[1].frame)?void 0:e.close)||t.call(e),this.cameraTokens.delete(i[0]))}cameraTokenReturn(e){if(this._sequenceRecorder&&this._sequenceRecordDeviceAttitudeMatrices&&e.token>=this._sequenceRecorderFirstCameraToken){let t=this.cameraTokens.get(e.token);t&&(e.att&&this._sequenceRecorder.appendAttitudeMatrix(e.att),t.data=e.d,this._sequenceRecorder.appendCameraFrame(t))}this.cameraPixelArrays.push(e.d),this.tokensInFlight--}sequenceRecordStart(e){this._sequenceRecorder||(this._sequenceRecorder=new eS(e)),this._sequenceRecorder.start(),this._sequenceRecorderFirstCameraToken=this.nextCameraToken}sequenceRecordStop(){var e;null==(e=this._sequenceRecorder)||e.stop()}sequenceRecordData(){var e;return(null==(e=this._sequenceRecorder)?void 0:e.data())||new Uint8Array(0)}sequenceRecordClear(){delete this._sequenceRecorder}sequenceRecordDeviceAttitudeMatrices(e){this._sequenceRecordDeviceAttitudeMatrices=e}getVideoTexture(){return this.videoTextures.pop()}destroy(){this._client.pipeline_destroy(this._impl),eZ.delete(this._impl)}getCurrentCameraInfo(){let e=this._client.pipeline_camera_frame_user_data(this._impl);if(e)return this.cameraTokens.get(e)}cameraFrameDrawGL(e,t,r){if(!this.glContext)return;let i=this.getCurrentCameraInfo();i&&(this._cameraDraw||(this._cameraDraw=new eg(this.glContext)),this._cameraDraw.drawCameraFrame(e,t,i,!0===r))}glContextLost(){for(let e of(this._cameraDraw&&this._cameraDraw.dispose(),this._faceDraw&&this._faceDraw.dispose(),this._imageTargetPreviewDraw&&this._imageTargetPreviewDraw.dispose(),this._faceProjectDraw&&this._faceProjectDraw.dispose(),delete this._cameraDraw,delete this._faceDraw,delete this._imageTargetPreviewDraw,delete this._faceProjectDraw,i=void 0,a=void 0,s=void 0,I={},this.onGLContextReset.emit(),this.videoTextures))this.glContext&&this.glContext.deleteTexture(e);for(let e of(this.videoTextures=[],this.cameraTokens))this.glContext&&e[1].texture&&this.glContext.deleteTexture(e[1].texture),e[1].texture=void 0;this.glContext=void 0}glContextSet(e,t){this.glContextLost(),this.glContext=e,t=t||[];for(let r=0;r<4;r++){let i=t[r]||e.createTexture();i&&(e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.videoTextures.push(i))}e.bindTexture(e.TEXTURE_2D,null)}drawFace(e,t,r,i){if(!this.glContext)return;this._faceDraw||(this._faceDraw=new eA(this.glContext));let a=k.vt();k.lw(a,e,t),k.lw(a,a,r),this._faceDraw.drawFace(a,i)}drawImageTargetPreview(e,t,r,i,a){if(!this.glContext)return;this._imageTargetPreviewDraw||(this._imageTargetPreviewDraw=new eX(this.glContext));let s=k.vt();k.lw(s,e,t),k.lw(s,s,r),this._imageTargetPreviewDraw.draw(s,a,i)}drawFaceProject(e,t,r,i,a,s){this.glContext&&(this._faceProjectDraw||(this._faceProjectDraw=new ew(this.glContext)),this._faceProjectDraw.drawFace(e,t,r,i,a,s))}cameraFrameTexture(){var e;return null==(e=this.getCurrentCameraInfo())?void 0:e.texture}cameraFrameTextureMatrix(e,t,r){let i=this.getCurrentCameraInfo();return i?ey(i.dataWidth,i.dataHeight,e,t,i.uvTransform||eQ,r):k.vt()}cameraFrameUserFacing(){var e;return(null==(e=this.getCurrentCameraInfo())?void 0:e.userFacing)||!1}cameraPoseWithAttitude(e){let t=eJ(this.getCurrentCameraInfo(),this._client.pipeline_camera_frame_camera_attitude(this._impl));if(e){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(t,e,t),k.lw(t,t,e)}return k.B8(t,t),t}videoFrameFromWorker(e){let t=this.nextCameraToken++,r=ej(e.source);r&&(this.cameraTokens.set(t,{dataWidth:e.w,dataHeight:e.h,texture:void 0,frame:e.d,userFacing:e.userFacing,uvTransform:e.uvTransform,cameraModel:e.cameraModel,cameraToDevice:e.cameraToDevice,cameraSource:r}),this.cleanOldFrames())}imageBitmapFromWorker(e){let t=this.cameraTokens.get(e.tokenId);t&&(t.dataWidth=e.dataWidth,t.dataHeight=e.dataHeight,t.frame=e.frame,t.userFacing=e.userFacing,t.uvTransform=e.uvTransform,this.tokensInFlight--,this.cleanOldFrames())}uploadGL(){var e,t;let r=this.getCurrentCameraInfo();null==(t=null==(e=null==r?void 0:r.cameraSource)?void 0:e.uploadGL)||t.call(e,r)}registerToken(e){let t=this.nextCameraToken++;return this.cameraTokens.set(t,e),this.tokensInFlight++,t}processGL(){if(!this.glContext)return void eh("no GL context for camera frames - please call pipeline_gl_context_set");if(this.currentCameraSource){if(this.tokensInFlight>0)return void this.currentCameraSource.getFrame(!0);this.currentCameraSource.getFrame(!1)}}motionAccelerometerSubmit(e,t,r,i){var a;this._sequenceRecordDeviceAttitudeMatrices||null==(a=this._sequenceRecorder)||a.appendAccelerometer(e,t,r,i),this._client.pipeline_motion_accelerometer_submit(this._impl,e,t,r,i)}motionRotationRateSubmit(e,t,r,i){var a;this._sequenceRecordDeviceAttitudeMatrices||null==(a=this._sequenceRecorder)||a.appendRotationRate(e,t,r,i),this._client.pipeline_motion_rotation_rate_submit(this._impl,e,t,r,i)}motionAttitudeSubmit(e,t,r,i){var a;this._sequenceRecordDeviceAttitudeMatrices||null==(a=this._sequenceRecorder)||a.appendAttitude(e,t,r,i),this._client.pipeline_motion_attitude_submit(this._impl,e,t,r,i)}motionAttitudeMatrix(e){this._client.pipeline_motion_attitude_matrix_submit(this._impl,e)}sendCameraStreamToWorker(e,t,r){let i={t:"streamC2S",p:this._impl,s:t,userFacing:r,source:e};this._mgr.postOutgoingMessage(i,[i.s])}sendCameraToScreenRotationToWorker(e){let t={p:this._impl,t:"cameraToScreenC2S",r:e};this._mgr.postOutgoingMessage(t,[])}sendImageBitmapToWorker(e,t,r,i,a,s){let n={p:this._impl,t:"imageBitmapC2S",i:e,r:t,tokenId:i,userFacing:r,cameraModel:a,cameraToDevice:s};this._mgr.postOutgoingMessage(n,[e])}sendDataToWorker(e,t,r,i,a,s,n){let o={d:e,p:this._impl,width:r,height:i,token:t,userFacing:a,c2d:s,cm:n,t:"cameraFrameC2S"};this._mgr.postOutgoingMessage(o,[e])}}function eJ(e,t){let r=!1;r=!!e&&e.userFacing;let i=k.vt();return k.$0(i,B(r)*Math.PI/180,[0,0,1]),k.lw(i,i,t),i}let e0={0:[{mean:[.235,.2344,.7305],identity:[.008,.0087,.0024,-.0026,6e-4,-.0022,5e-4,.0033,.0026,.0017,-.0055,-8e-4,.0011,.0059,0,2e-4,.001,-.001,-.0044,-.0011,-1e-4,.0024,.0019,-9e-4,4e-4,-.0015,0,.0038,.0013,3e-4,.002,-.0021,.0018,.0023,.0011,.0012,-.0011,-.0017,9e-4,-.0012,-8e-4,7e-4,-.0017,.0029,-.0029,8e-4,-.0027,8e-4,-.0017,4e-4,9e-4,-.001,-3e-4,8e-4,-.0016,-3e-4,-7e-4,.0016,-9e-4,.0021,-5e-4,.0011,-.0024,-1e-4,6e-4,1e-4,-.0026,-4e-4,-3e-4,-9e-4,5e-4,3e-4,-8e-4,-.001,-4e-4,-8e-4,.0022,-.0014,-1e-4,-.0023,0,-.0018,7e-4,-.0036,.0017,.0017,-.0018,-2e-4,-4e-4,-9e-4,-8e-4,3e-4,.0012,9e-4,-4e-4,-.0016,5e-4,-.0013,.0011,.0023,.0029,.0024,.0017,-.0027,-4e-4,-.001,-.0018,-.0015,-.001,.001,-.0013,-1e-4,-2e-4,7e-4,3e-4,3e-4,-.0016,9e-4,-.0021,4e-4,.0014,.002,-7e-4,-4e-4,2e-4,-4e-4,-6e-4,-9e-4,.0015,4e-4,-4e-4,5e-4,-.0015,9e-4,3e-4,3e-4,-2e-4,-8e-4,-9e-4,.0023,4e-4,1e-4,-4e-4,-1e-4,7e-4,2e-4,.001,1e-4,-.0029,-5e-4],expression:[0,3e-4,.0052,-7e-4,-.0051,-.0103,0,.0019,.0027,-.0054,.0135,.035,-5e-4,-6e-4,.0025,-.0045,-.0557,-.003,-.0191,-.1199,.0548,-.0036,-.0682,-.0167,2e-4,-.0085,-.0085,.0044,.0041,-.0568,.0044,.179,.0065,-.0017,-.1006,.0036,-.0267,-.3279,.0301,-.0011,-.0173,-.001,.0046,.2808,.0207,.0162,.238,-.0225,.0017,.1041,.0203,5e-4,.0161,.0031,-.0436,.6504,.0873,-.0099,.1039,.0048,-.0254,.2534,-.0042,.003,-.0106,-.0153,-.0118,.0252,9e-4,-.0071,.0099,.007,-.0724,.0461,-.0235,.0833,.004,.0141,-.0219,.0132,-.0042,-.0179,.0045,-.0215,.3638,.0054,-.0445]},{mean:[.2358,.1466,.7183],identity:[.0077,.0093,1e-4,-.0022,0,-.0041,5e-4,.0022,.0028,.0018,-.0038,-.0013,.001,.0044,-2e-4,0,.0017,-.0016,-.0043,-2e-4,-1e-4,.0023,9e-4,5e-4,-7e-4,-4e-4,-.0017,.003,7e-4,6e-4,.0011,-.0018,5e-4,.0018,-8e-4,4e-4,-.0023,-6e-4,-3e-4,-.0015,-.0014,-1e-4,-.0018,.0027,-.0026,3e-4,-.0031,.0011,-.0026,-.0011,.0012,-.0013,-2e-4,7e-4,-.0021,.0021,4e-4,.0012,-.001,.002,-3e-4,2e-4,-.0026,-3e-4,.001,1e-4,-.0018,-.001,9e-4,-.0011,.001,4e-4,-8e-4,-7e-4,-.001,-3e-4,7e-4,-5e-4,-6e-4,-.0019,-5e-4,-.002,7e-4,-.0027,.0014,.0013,6e-4,-5e-4,-3e-4,-3e-4,-.001,0,.0019,1e-4,6e-4,-.0012,4e-4,-9e-4,4e-4,.0025,3e-4,.0024,.0017,-9e-4,-.0015,-.0015,-.001,-.0023,-.001,-5e-4,-4e-4,8e-4,9e-4,7e-4,2e-4,7e-4,-9e-4,9e-4,-.0013,1e-4,9e-4,2e-4,6e-4,-6e-4,-8e-4,-4e-4,-7e-4,8e-4,.0019,3e-4,.0015,2e-4,-.0015,-3e-4,0,6e-4,3e-4,6e-4,-6e-4,2e-4,5e-4,-4e-4,.0012,-4e-4,2e-4,-8e-4,6e-4,-4e-4,2e-4,-.0021],expression:[-.0034,.0054,.0069,.004,6e-4,-.0104,-3e-4,.0036,.0025,.0065,.0296,.0208,-9e-4,.0154,.0029,-.0167,.0124,.004,-.0102,.0351,.028,-.019,.0146,-.0035,-.0023,-.0069,-.0051,-.01,.0262,-.028,.0112,.082,.023,-.0019,-.066,-.0104,-.0408,.0164,.0075,-.0074,.0367,.0041,.0517,-.0207,.0045,.0291,-.0672,-.0129,.0345,-.1558,-.0106,.0037,-.0437,-.0021,.0854,-.1121,.0187,.0041,.0072,.0011,.0193,-.0143,-.0119,.005,-.02,-.0122,-.008,.0527,.0036,-.006,.0222,.007,-.0429,.046,-.0046,.0226,-.0059,.0202,-.0173,.0087,0,-.0067,-.0095,-.0153,.1506,-.0017,.0021]}],1:[{mean:[-.2271,.2323,.7319],identity:[-.0084,.0097,.0018,.0041,2e-4,-.002,-.0012,.0036,.0019,-9e-4,-.0063,-.001,-3e-4,.0053,6e-4,1e-4,5e-4,-.0015,.0044,-.0025,-.0015,-.002,.0016,-6e-4,2e-4,-.0013,0,-.0022,2e-4,2e-4,-.0025,-.0014,.0015,8e-4,2e-4,.0012,6e-4,-6e-4,.0017,0,3e-4,-1e-4,.0024,.0025,-.0029,-.0015,-.0015,1e-4,.0031,-.0016,7e-4,.0019,6e-4,.002,9e-4,.001,-.0014,-.002,-.0015,.0029,1e-4,5e-4,-.0023,8e-4,-.0011,.0019,.0017,-3e-4,-.0011,-3e-4,.0011,-8e-4,.0019,-.0022,1e-4,.0015,.0017,-8e-4,-.0011,-.0022,3e-4,.0022,6e-4,-.003,-2e-4,0,-.0017,-2e-4,0,1e-4,4e-4,.0012,.0019,-.0014,4e-4,-.0017,-.0012,-.0011,.0021,-.0029,.0026,.0018,-.0023,-.0029,1e-4,.0014,-.0019,-4e-4,-4e-4,.0023,-.0016,0,-9e-4,.0014,-.0015,.0015,-.0016,-.0011,-.0022,1e-4,-.0018,.0027,-.0013,4e-4,-1e-4,-5e-4,.0011,-2e-4,.0015,5e-4,-9e-4,-1e-4,.0029,6e-4,0,-3e-4,7e-4,-8e-4,-5e-4,.0025,3e-4,2e-4,-8e-4,-1e-4,3e-4,0,.0014,2e-4,-.0024,1e-4],expression:[-.0025,-9e-4,.006,.004,-.0027,-.0113,-8e-4,.001,.0031,-.0016,.0144,.0382,-3e-4,-5e-4,.0035,-.0044,-.0511,-.0014,-7e-4,-.1007,.0582,-6e-4,-.0606,-.0165,5e-4,-.0087,-.0093,.0036,.0057,-.0576,-.0039,.1488,.0127,.0016,-.0666,-9e-4,-.0153,.3162,-.0445,-.0021,.0023,.0043,-.0033,.2382,.0063,-.0217,.167,-.039,.0097,-.1144,-.0189,-.0145,.6831,.0632,-.0012,-.1959,-.0133,4e-4,.1108,-3e-4,.0062,.2593,-.0161,-.0018,-.0051,-.012,.0162,.016,-.0022,-.0052,-.0201,.0101,.0115,.0365,-.024,-.0059,.0188,-.0336,.0352,.0224,-.0229,.0146,.0086,-.0273,-.0032,.0103,-.0112]},{mean:[-.2288,.1541,.7202],identity:[-.0082,.0101,2e-4,.0036,-7e-4,-.0037,-8e-4,.0024,.0022,-.0013,-.0045,-.0013,-6e-4,.0045,-4e-4,4e-4,.0012,-.0014,.0042,-.001,-7e-4,-.0019,3e-4,-2e-4,.0012,-4e-4,-.0012,-.0018,-4e-4,-1e-4,-.0014,-.0012,1e-4,1e-4,-.0017,.001,.0015,-1e-4,6e-4,1e-4,0,-6e-4,.0028,.0021,-.0025,-.002,-.0015,7e-4,.0028,-.0023,9e-4,.0013,1e-4,.0016,.0012,.0032,-6e-4,-.0013,-.0011,.0021,3e-4,-5e-4,-.0024,4e-4,-4e-4,.0014,.0015,-8e-4,-3e-4,3e-4,.0017,-6e-4,.002,-.0018,-3e-4,9e-4,1e-4,2e-4,-6e-4,-.0015,-4e-4,.0022,7e-4,-.0023,0,-2e-4,-2e-4,-3e-4,-1e-4,6e-4,-2e-4,6e-4,.0022,-3e-4,.0013,-.0014,-5e-4,-3e-4,.0013,-.0027,6e-4,.0025,-.0023,-8e-4,-.0013,.0017,-9e-4,-.0019,1e-4,8e-4,-7e-4,-4e-4,0,.001,-.001,.0019,-8e-4,-.0015,-6e-4,-2e-4,-.0011,8e-4,1e-4,9e-4,-8e-4,-4e-4,6e-4,7e-4,.0021,-4e-4,7e-4,-5e-4,.0021,-7e-4,-4e-4,-9e-4,8e-4,3e-4,1e-4,3e-4,1e-4,9e-4,.001,-5e-4,5e-4,-.001,.001,4e-4,-5e-4,-.0012],expression:[8e-4,.0037,.0078,-4e-4,5e-4,-.012,-2e-4,-.0046,.0033,-.0089,.0295,.0221,-.0024,-.0084,.0013,.0057,.0125,.0049,-.0036,.0373,.0285,.0115,.0135,-.0035,.0048,.0108,-.0033,.0106,.0281,-.0301,-.0082,.0803,.0244,-7e-4,-.0725,-.0105,-.0247,-.0036,-.0143,-.0045,-.029,2e-4,-.0303,.0093,-.0021,-.0196,-.0754,-.0211,.0326,.1246,.006,-.0804,-.1499,.0109,.0182,-.0029,-.0014,-.0035,.0072,-8e-4,-.0152,-.0108,-.0166,-.0073,-.0144,-.0095,.0101,.047,-.0018,-.004,-.0189,.0027,.0104,.0298,-.0042,-.0096,.0191,-.0217,.0228,.0226,-.0105,.0047,-.0048,-.0172,.0061,-.0043,-.0016]}],2:{mean:[.5396,.2028,.2496],identity:[.0204,.0146,-.0182,-.0052,.0158,-.0038,-.0025,-.0108,-.006,.0085,-.0044,.0029,.0042,.001,.0095,.0015,-.0034,-.0064,-.0057,7e-4,.0026,7e-4,.0037,-6e-4,.0037,.0026,.0024,5e-4,-.0019,-.0013,.003,-.0028,.0018,-9e-4,.002,-.0047,.004,-.003,.0031,-.0027,-.0026,-.0017,.0016,.0014,-4e-4,.0021,-.002,0,.0017,7e-4,-4e-4,-7e-4,-.0018,-9e-4,2e-4,-.0012,1e-4,-5e-4,-.0011,4e-4,2e-4,.0011,1e-4,8e-4,.0017,-.0013,.0025,.0017,.001,2e-4,3e-4,5e-4,-4e-4,-1e-4,-5e-4,7e-4,-.0022,-.0029,6e-4,-8e-4,-6e-4,6e-4,-5e-4,5e-4,.0013,3e-4,-5e-4,-.003,7e-4,2e-4,.0016,-4e-4,0,0,4e-4,1e-4,.0014,.0012,1e-4,4e-4,-1e-4,8e-4,9e-4,4e-4,-4e-4,9e-4,-2e-4,.001,9e-4,4e-4,1e-4,7e-4,7e-4,.001,-.0017,-8e-4,2e-4,.0017,-3e-4,-1e-4,4e-4,5e-4,7e-4,5e-4,-1e-4,-6e-4,-1e-4,1e-4,-3e-4,-7e-4,-2e-4,-5e-4,0,-3e-4,3e-4,8e-4,-2e-4,-3e-4,5e-4,1e-4,-7e-4,-.001,-2e-4,3e-4,4e-4,-1e-4,7e-4,0,4e-4,4e-4],expression:[1e-4,-4e-4,1e-4,0,5e-4,2e-4,0,0,3e-4,-2e-4,3e-4,5e-4,-1e-4,2e-4,8e-4,1e-4,-2e-4,-5e-4,-3e-4,6e-4,5e-4,0,1e-4,2e-4,1e-4,-1e-4,-6e-4,-2e-4,5e-4,0,-4e-4,4e-4,.0016,4e-4,-4e-4,-.0015,0,1e-4,1e-4,-3e-4,3e-4,.0019,-2e-4,7e-4,4e-4,4e-4,-8e-4,-.0015,.0013,-.0016,-.0069,4e-4,-6e-4,-.0019,0,-1e-4,5e-4,-3e-4,2e-4,.0014,-3e-4,6e-4,.0011,4e-4,-3e-4,-.0032,-6e-4,8e-4,.0025,-3e-4,3e-4,.0015,-1e-4,1e-4,3e-4,-1e-4,0,0,-3e-4,4e-4,.0019,1e-4,0,-8e-4,-1e-4,1e-4,5e-4]},3:{mean:[-.5464,.2141,.26],identity:[-.0207,.0172,-.0176,.0068,.0148,-.0051,.0042,-.0101,-.0058,-.0087,-.0059,.0045,-.0056,.0017,.0097,-.0048,-.004,-.0044,.0019,2e-4,.0041,-.0052,.0041,2e-4,-.0027,6e-4,.002,-.0027,-.0033,-6e-4,-.004,9e-4,-.0012,-1e-4,-.0026,.0021,-.003,-.0025,.0052,.0025,.0022,-1e-4,-8e-4,.0013,.001,4e-4,.0018,.0014,6e-4,-5e-4,-.0015,-.0039,.0014,-1e-4,8e-4,-2e-4,6e-4,-5e-4,-.0038,-.0012,-.0018,-3e-4,.001,9e-4,.0012,.0024,-.0024,-7e-4,-.0016,-.0016,3e-4,-.001,-.0014,-.0014,.001,-3e-4,-7e-4,-.0012,3e-4,6e-4,3e-4,-5e-4,3e-4,.0012,6e-4,-8e-4,4e-4,4e-4,8e-4,-2e-4,-.0014,3e-4,0,.0023,-3e-4,-.0012,-.0013,.0011,-2e-4,-.0014,-1e-4,.0014,0,3e-4,3e-4,-8e-4,-5e-4,-7e-4,-7e-4,-2e-4,3e-4,5e-4,2e-4,-1e-4,.0011,-.0014,1e-4,-.0015,-1e-4,-3e-4,0,-.001,-1e-4,-8e-4,8e-4,-8e-4,-2e-4,-.0011,-3e-4,-4e-4,1e-4,-2e-4,3e-4,-7e-4,0,3e-4,1e-4,-8e-4,5e-4,1e-4,4e-4,.0014,-6e-4,-.001,-3e-4,-2e-4,1e-4,-1e-4,-1e-4,7e-4],expression:[-3e-4,-1e-4,6e-4,4e-4,0,-7e-4,0,-3e-4,-2e-4,-4e-4,.0012,8e-4,1e-4,-5e-4,-7e-4,-4e-4,0,1e-4,-4e-4,.0017,7e-4,0,1e-4,3e-4,0,4e-4,4e-4,5e-4,1e-4,-.001,-7e-4,.0022,.0026,5e-4,-.0024,-.0023,0,1e-4,3e-4,0,-.0013,-.0015,6e-4,.0014,8e-4,-2e-4,-.0025,-.0023,-3e-4,.0049,.006,-2e-4,-7e-4,-2e-4,0,-.0019,-.0018,-2e-4,.0017,.0017,3e-4,.0015,7e-4,1e-4,-.0023,-.0036,2e-4,.0023,.0017,0,-5e-4,-3e-4,-3e-4,4e-4,2e-4,-1e-4,-3e-4,-5e-4,1e-4,.0018,.0025,1e-4,-6e-4,-.0011,0,1e-4,1e-4]},4:{mean:[.0018,.1864,.853],identity:[-.0011,.0134,.0085,9e-4,-.0025,-7e-4,-3e-4,.0033,4e-4,-5e-4,-.0047,-.002,7e-4,.0026,-.0069,-1e-4,.0036,.0072,5e-4,-8e-4,-.0047,4e-4,-8e-4,-.001,0,2e-4,-.0036,-2e-4,-.001,-.0048,-1e-4,.0018,.0044,-7e-4,-2e-4,.0043,3e-4,.002,-.0031,0,-7e-4,.0013,0,.0037,.0033,-.0016,-.0012,.002,-1e-4,-.0027,.0051,5e-4,8e-4,7e-4,-.0017,.0054,.0023,-3e-4,.0032,1e-4,0,7e-4,-5e-4,-.0011,2e-4,8e-4,0,-.0033,-8e-4,-7e-4,7e-4,.0033,5e-4,-3e-4,.0029,-1e-4,-.0024,-.0011,-.002,-.0015,-.0019,2e-4,7e-4,.0031,6e-4,.0012,0,0,-.0021,0,-9e-4,-.0011,-.0011,-2e-4,.0015,.001,.0013,8e-4,.001,-3e-4,9e-4,.0027,-2e-4,-.0011,-.0011,6e-4,7e-4,2e-4,1e-4,-5e-4,-.0022,.0011,-.0014,9e-4,3e-4,2e-4,0,-6e-4,-4e-4,-.0011,-7e-4,.001,-.0012,6e-4,-.0012,-.0015,3e-4,-9e-4,-.0013,-.0013,7e-4,.001,-.0011,-.0013,.0015,4e-4,1e-4,4e-4,-1e-4,-.0016,-.0016,9e-4,-7e-4,-.0024,5e-4,-1e-4,-.0017,-2e-4,3e-4,-9e-4],expression:[-.0017,.0019,.0097,.003,-.0103,-.0093,9e-4,6e-4,.0023,-.0017,-.0204,.0376,.0033,-.0034,.0033,-.0026,-.0322,.0396,-.0032,-.0947,.0942,-7e-4,-.0175,.0266,-.001,-6e-4,.0016,.0025,.0157,-.0142,-.0022,.037,.015,.0021,-.0102,-.0107,.0036,.0055,-.0051,.0021,3e-4,-3e-4,4e-4,-.0177,.0074,-6e-4,-.0357,.0149,-.0066,9e-4,.0013,-.0031,.0016,.0095,.002,.0052,.0035,-3e-4,.0053,-.0082,.002,.0022,-.0071,-.0011,5e-4,.0055,.0011,3e-4,-.0126,-4e-4,3e-4,-.0023,-.0015,.0059,.0063,-.0042,-.0023,.0055,.0019,.0017,-.0075,6e-4,-8e-4,.0018,.0012,.0012,-5e-4]},5:{mean:[-.002,-.0469,1.0039],identity:[-.0017,.0018,.0156,6e-4,-.0038,5e-4,4e-4,.0013,.002,-4e-4,-.0015,-.0051,5e-4,-7e-4,-.0055,-1e-4,-9e-4,.008,-2e-4,.0036,-.0053,4e-4,-.0026,-.0016,7e-4,9e-4,-.009,-3e-4,7e-4,-.0084,.0015,.0021,.0032,-.0015,.0018,.0046,-3e-4,-4e-4,-1e-4,8e-4,-.0044,-7e-4,-8e-4,7e-4,.0048,-.0024,-3e-4,.0024,2e-4,-.0051,.0058,-6e-4,.0028,.0018,-.0021,.0035,.0057,.0011,.0065,0,-2e-4,.0011,.003,-.0027,8e-4,7e-4,3e-4,-.0039,-.002,-2e-4,-.0015,.0034,.0012,-.0025,.0024,-2e-4,4e-4,-.0042,-.0024,-.001,-.0023,.0016,-7e-4,.0039,1e-4,-5e-4,.0018,3e-4,-2e-4,-9e-4,-.0015,3e-4,-7e-4,-1e-4,-2e-4,.0023,.0032,.002,-.0013,.0013,-.0038,.0045,1e-4,-.0031,1e-4,.0019,-1e-4,.0016,.0013,0,-.002,.0023,2e-4,.0011,.0018,-.0024,6e-4,-.0017,.002,-8e-4,-.0021,7e-4,.0011,8e-4,4e-4,-.001,.0012,2e-4,-6e-4,-.0027,-5e-4,.001,-9e-4,1e-4,-1e-4,8e-4,-.0011,.0022,-.001,-5e-4,-.0011,.0016,-.0015,8e-4,-3e-4,9e-4,.0013,-7e-4,-7e-4,-2e-4],expression:[-.0018,-.0168,.0088,.0389,.1026,.0414,.2201,-.0262,-.0016,-.0017,.0612,-.0298,-.0323,.0093,.0013,-.005,.2207,.1315,-4e-4,.0858,-.0303,-.0133,.015,-.008,.1454,.0114,.0177,-.0077,.1022,.0356,-.0023,.1088,.0232,.003,-.0706,.0347,-1e-4,.004,-.0011,.0397,-.0096,-.0033,.0029,-.01,-.0083,-6e-4,-.0135,.0016,-.0087,-.0019,.0022,-.004,-.0087,.0105,8e-4,-.005,.0069,.0028,.0409,-.0391,.003,.0103,.0051,.0026,.0776,-.0083,-.0062,-.0567,.0268,.0175,.0017,.0156,-.0043,.0299,-.0395,-.0015,.0051,-.0148,.0125,.0035,.0603,.0109,-.0645,-.0257,.002,6e-4,-8e-4]},6:{mean:[-6e-4,-.1542,.8789],identity:[-7e-4,-.0032,.01,0,-.0027,.0031,6e-4,5e-4,-6e-4,-3e-4,.0013,-.0049,-2e-4,-.002,-.0046,8e-4,-.0011,.0054,2e-4,.0043,-.0027,3e-4,-.0022,-.0019,8e-4,.0032,-.0069,0,4e-4,-.0071,.0016,.0027,.0039,-.0017,9e-4,.0031,-1e-4,-5e-4,-4e-4,7e-4,-.0026,-.0012,-5e-4,6e-4,2e-4,-.0014,-.0013,.0019,-2e-4,-.0053,.0031,-6e-4,.0016,.0023,-.0013,.0021,.0029,8e-4,.0052,0,4e-4,0,.0037,-.0026,3e-4,.002,-2e-4,-.0024,4e-4,-4e-4,-.0012,8e-4,7e-4,-.0023,5e-4,0,.0014,-.0022,-.0016,0,-.0012,8e-4,-7e-4,.0014,-6e-4,-.0012,-3e-4,2e-4,.0012,-3e-4,-.002,-1e-4,1e-4,-2e-4,-.0016,9e-4,.002,.0019,0,6e-4,-.0022,.0016,1e-4,-.0017,-.0013,.001,9e-4,-1e-4,.0011,3e-4,-7e-4,.0014,8e-4,.0013,.0011,-.002,0,-.0015,.0014,.001,-.0015,7e-4,3e-4,.001,-1e-4,.0012,7e-4,6e-4,-4e-4,-.0013,-.0012,-9e-4,-.0011,2e-4,-5e-4,5e-4,4e-4,2e-4,1e-4,0,5e-4,5e-4,-.0014,.0015,-9e-4,5e-4,.0014,-8e-4,-8e-4,.0012],expression:[8e-4,.0481,.1653,.0784,.1008,-.3992,.5088,-.02,.0542,.001,.3723,-.0151,-.0986,.0283,-.0033,-.0121,.2634,.1202,.0036,-.0529,-.0245,-.0297,-.1085,.0495,.3264,.0083,4e-4,-.0314,.1459,-.1142,-.003,1e-4,.1154,-.0035,-.0285,-.0184,-1e-4,.0012,.0035,.079,-.0103,.0043,.011,-.004,-.0774,-.0047,-.023,.0284,-.0048,-.001,.0149,-.0039,.0046,.0528,-6e-4,.0063,.0376,.0096,.0558,-.0295,0,-.0311,-.0634,.0062,.0176,-.0154,-.0109,-.1149,.0192,.0326,.0121,.0237,.0034,.0262,-.0778,.0014,-.0045,-.0203,.0077,.0588,.0575,.008,-.0557,-.0095,.0032,.0054,-.0042]},7:{mean:[.0038,-.2927,.833],identity:[6e-4,-.0109,.0073,-6e-4,-.0044,.0017,-1e-4,-.0022,-6e-4,-3e-4,.0065,-.0014,-6e-4,-.0051,-.0046,3e-4,-.0029,.003,2e-4,.0038,-6e-4,0,-.0012,6e-4,-4e-4,.0053,-.0075,-2e-4,-7e-4,-.0063,.0014,.0026,.0019,-.0022,.0018,.0028,-1e-4,-.0012,.0011,9e-4,.0019,-.0019,-1e-4,.0012,-.0022,-3e-4,-.0012,4e-4,-8e-4,3e-4,-3e-4,0,.0017,.0021,-4e-4,.0012,.0022,-3e-4,.0026,-3e-4,4e-4,-.0026,.0032,-.0019,3e-4,.0015,1e-4,-.0015,.0013,-1e-4,1e-4,-.0029,0,-2e-4,-.0028,-7e-4,.0019,-3e-4,-2e-4,.0012,9e-4,4e-4,-.001,-.002,-.0016,.0011,-1e-4,3e-4,.0021,2e-4,-.0014,-9e-4,-1e-4,0,-2e-4,-.001,.0015,.0018,1e-4,7e-4,8e-4,.0017,.001,-9e-4,1e-4,4e-4,.0023,-1e-4,.0012,1e-4,-8e-4,2e-4,.0018,6e-4,3e-4,1e-4,.0012,-3e-4,.002,-6e-4,0,-1e-4,-.0022,4e-4,5e-4,.0011,2e-4,-.0013,-.0023,6e-4,6e-4,-5e-4,-5e-4,9e-4,2e-4,2e-4,.0011,-3e-4,.0011,.0015,.0011,3e-4,2e-4,8e-4,-4e-4,-8e-4,3e-4,0,.0012,-1e-4],expression:[.026,.1107,.3257,.1917,.3206,-1.1348,1.0791,-.035,.1549,-.0103,.6953,1e-4,-.3262,.068,.0219,-.0044,.3643,.2178,.0168,-.2478,-.1321,-.0414,-.3782,-.0617,.5088,-.0031,-.0311,-.0497,.0948,-.385,.0148,-.2224,-.1415,-.0074,.0863,-.203,3e-4,-.0081,.0057,.1164,-.0039,.0015,-.0024,.0505,.1532,.0039,-.0148,-.0753,.0163,.0058,-.0339,.0036,.0252,-.0569,-.0041,.0163,-.0361,.0035,-.018,.1266,0,-.0163,-.0046,.0133,-.1656,.2134,.0191,.0057,.0734,.0681,.0039,-.0144,.029,-.074,-.046,.0122,.0072,-.0162,-.0349,-.1234,.0212,-.0355,.0535,.1218,.0043,-.024,.0016]},8:{mean:[-.0018,-.3037,.8491],identity:[2e-4,-.0112,.0077,-4e-4,-.0044,.0024,1e-4,-.0021,-4e-4,-4e-4,.0066,-.002,-4e-4,-.0052,-.0044,3e-4,-.0032,.0039,4e-4,.0042,-3e-4,2e-4,-.0012,-2e-4,-2e-4,.0052,-.0083,-1e-4,-8e-4,-.0056,.0017,.0024,.0019,-.0023,.002,.0027,-2e-4,-.0013,.002,9e-4,.0017,-.0028,-2e-4,.0012,-.0026,0,-.0016,2e-4,-5e-4,3e-4,-.001,-1e-4,.0016,.0016,-3e-4,.0012,.0012,-3e-4,.0027,-3e-4,3e-4,-.0026,.0037,-.0017,1e-4,.0016,1e-4,-.0015,.0024,1e-4,2e-4,-.0039,0,-3e-4,-.0033,-6e-4,.0017,-4e-4,-4e-4,.0012,.0018,2e-4,-.0012,-.002,-.0017,.0013,-.001,3e-4,.0021,4e-4,-.0012,-6e-4,-2e-4,0,-4e-4,-9e-4,.0016,.0017,4e-4,7e-4,7e-4,.001,9e-4,-8e-4,5e-4,5e-4,.0023,.001,.0013,2e-4,-4e-4,2e-4,.0017,8e-4,3e-4,-1e-4,9e-4,-4e-4,.0019,-5e-4,3e-4,0,-.0025,3e-4,3e-4,.0011,1e-4,-.0015,-.001,7e-4,7e-4,-7e-4,-7e-4,8e-4,0,1e-4,.0013,-4e-4,.0012,.0014,.0017,4e-4,2e-4,3e-4,-3e-4,-9e-4,1e-4,0,.001,-4e-4],expression:[-.0092,2.8809,1.416,.2018,1.1982,-.9351,1.4492,-.1902,.1749,.0305,-.167,-.1572,-.7354,-.0492,.0115,.0608,.2971,.1179,.0046,-.0997,-.0041,-.0104,.3379,-.1854,.009,.0366,-.0583,.0269,-.0029,-.4175,-8e-4,.1794,.0752,-.0135,.1158,.1234,5e-4,.003,-.0032,.1034,-.0504,-.0055,-.0076,-.0772,.224,.0047,.0229,-.1044,.0162,-.0161,-.0241,-.0083,-.1388,-.0434,-.0125,-.0997,-.0327,-.0111,.1576,-.3911,.0199,.2522,.142,.0059,-.0721,-.0045,.031,-.1136,-.1685,.0641,.0142,.0312,.0426,-.1366,.1011,.0101,-.0157,.0018,-.0103,-.0344,.0907,.0016,.1168,-.0806,.0104,-.0057,.0111]},9:[{mean:[.0038,-.2927,.833],identity:[6e-4,-.0109,.0073,-6e-4,-.0044,.0017,-1e-4,-.0022,-6e-4,-3e-4,.0065,-.0014,-6e-4,-.0051,-.0046,3e-4,-.0029,.003,2e-4,.0038,-6e-4,0,-.0012,6e-4,-4e-4,.0053,-.0075,-2e-4,-7e-4,-.0063,.0014,.0026,.0019,-.0022,.0018,.0028,-1e-4,-.0012,.0011,9e-4,.0019,-.0019,-1e-4,.0012,-.0022,-3e-4,-.0012,4e-4,-8e-4,3e-4,-3e-4,0,.0017,.0021,-4e-4,.0012,.0022,-3e-4,.0026,-3e-4,4e-4,-.0026,.0032,-.0019,3e-4,.0015,1e-4,-.0015,.0013,-1e-4,1e-4,-.0029,0,-2e-4,-.0028,-7e-4,.0019,-3e-4,-2e-4,.0012,9e-4,4e-4,-.001,-.002,-.0016,.0011,-1e-4,3e-4,.0021,2e-4,-.0014,-9e-4,-1e-4,0,-2e-4,-.001,.0015,.0018,1e-4,7e-4,8e-4,.0017,.001,-9e-4,1e-4,4e-4,.0023,-1e-4,.0012,1e-4,-8e-4,2e-4,.0018,6e-4,3e-4,1e-4,.0012,-3e-4,.002,-6e-4,0,-1e-4,-.0022,4e-4,5e-4,.0011,2e-4,-.0013,-.0023,6e-4,6e-4,-5e-4,-5e-4,9e-4,2e-4,2e-4,.0011,-3e-4,.0011,.0015,.0011,3e-4,2e-4,8e-4,-4e-4,-8e-4,3e-4,0,.0012,-1e-4],expression:[.026,.1107,.3257,.1917,.3206,-1.1348,1.0791,-.035,.1549,-.0103,.6953,1e-4,-.3262,.068,.0219,-.0044,.3643,.2178,.0168,-.2478,-.1321,-.0414,-.3782,-.0617,.5088,-.0031,-.0311,-.0497,.0948,-.385,.0148,-.2224,-.1415,-.0074,.0863,-.203,3e-4,-.0081,.0057,.1164,-.0039,.0015,-.0024,.0505,.1532,.0039,-.0148,-.0753,.0163,.0058,-.0339,.0036,.0252,-.0569,-.0041,.0163,-.0361,.0035,-.018,.1266,0,-.0163,-.0046,.0133,-.1656,.2134,.0191,.0057,.0734,.0681,.0039,-.0144,.029,-.074,-.046,.0122,.0072,-.0162,-.0349,-.1234,.0212,-.0355,.0535,.1218,.0043,-.024,.0016]},{mean:[-.0018,-.3037,.8491],identity:[2e-4,-.0112,.0077,-4e-4,-.0044,.0024,1e-4,-.0021,-4e-4,-4e-4,.0066,-.002,-4e-4,-.0052,-.0044,3e-4,-.0032,.0039,4e-4,.0042,-3e-4,2e-4,-.0012,-2e-4,-2e-4,.0052,-.0083,-1e-4,-8e-4,-.0056,.0017,.0024,.0019,-.0023,.002,.0027,-2e-4,-.0013,.002,9e-4,.0017,-.0028,-2e-4,.0012,-.0026,0,-.0016,2e-4,-5e-4,3e-4,-.001,-1e-4,.0016,.0016,-3e-4,.0012,.0012,-3e-4,.0027,-3e-4,3e-4,-.0026,.0037,-.0017,1e-4,.0016,1e-4,-.0015,.0024,1e-4,2e-4,-.0039,0,-3e-4,-.0033,-6e-4,.0017,-4e-4,-4e-4,.0012,.0018,2e-4,-.0012,-.002,-.0017,.0013,-.001,3e-4,.0021,4e-4,-.0012,-6e-4,-2e-4,0,-4e-4,-9e-4,.0016,.0017,4e-4,7e-4,7e-4,.001,9e-4,-8e-4,5e-4,5e-4,.0023,.001,.0013,2e-4,-4e-4,2e-4,.0017,8e-4,3e-4,-1e-4,9e-4,-4e-4,.0019,-5e-4,3e-4,0,-.0025,3e-4,3e-4,.0011,1e-4,-.0015,-.001,7e-4,7e-4,-7e-4,-7e-4,8e-4,0,1e-4,.0013,-4e-4,.0012,.0014,.0017,4e-4,2e-4,3e-4,-3e-4,-9e-4,1e-4,0,.001,-4e-4],expression:[-.0092,2.8809,1.416,.2018,1.1982,-.9351,1.4492,-.1902,.1749,.0305,-.167,-.1572,-.7354,-.0492,.0115,.0608,.2971,.1179,.0046,-.0997,-.0041,-.0104,.3379,-.1854,.009,.0366,-.0583,.0269,-.0029,-.4175,-8e-4,.1794,.0752,-.0135,.1158,.1234,5e-4,.003,-.0032,.1034,-.0504,-.0055,-.0076,-.0772,.224,.0047,.0229,-.1044,.0162,-.0161,-.0241,-.0083,-.1388,-.0434,-.0125,-.0997,-.0327,-.0111,.1576,-.3911,.0199,.2522,.142,.0059,-.0721,-.0045,.031,-.1136,-.1685,.0641,.0142,.0312,.0426,-.1366,.1011,.0101,-.0157,.0018,-.0103,-.0344,.0907,.0016,.1168,-.0806,.0104,-.0057,.0111]}],10:{mean:[-.007,-.6338,.7695],identity:[1e-4,-.0296,.0089,-6e-4,-.0073,-.0065,-1e-4,-.0029,-.0031,-2e-4,.0128,.0065,0,-.0116,-.014,-1e-4,-.0037,-.0052,-5e-4,.0028,.003,-4e-4,.0041,.0015,6e-4,.0088,-.0076,-.0011,-.0015,-.0073,7e-4,-.0011,.0019,-.0011,-5e-4,.0031,-1e-4,-.0018,9e-4,.0018,.0038,.0068,-4e-4,-1e-4,.0061,.0024,.0024,-.0066,-6e-4,.0051,.0014,.002,.005,-.0035,1e-4,-.0034,-.004,-7e-4,.001,-8e-4,1e-4,-5e-4,-.0021,2e-4,.0045,-.0043,-.0012,-.0024,-.0014,6e-4,.0034,.0027,-8e-4,-.0053,.0014,1e-4,.0013,-.0018,6e-4,-.0015,.0029,-2e-4,-.0035,1e-4,-.002,.0012,.0048,.0011,1e-4,-2e-4,-3e-4,-.0012,.0033,6e-4,.002,-.0033,4e-4,.0028,2e-4,8e-4,-1e-4,-.0018,8e-4,.0017,1e-4,9e-4,8e-4,3e-4,.0019,-.001,.001,-7e-4,-.0013,0,1e-4,.0032,-1e-4,1e-4,.0011,-4e-4,5e-4,-7e-4,.0018,-3e-4,2e-4,7e-4,8e-4,-.0014,7e-4,.0015,-6e-4,-1e-4,-4e-4,.0019,-9e-4,-6e-4,-6e-4,-.0012,2e-4,-.0012,-8e-4,4e-4,6e-4,-.0011,3e-4,9e-4,-4e-4,6e-4,-7e-4,-4e-4],expression:[-.0603,2.0527,1.9014,.1025,.6143,.3804,.7881,-.1023,-.0764,.0454,-.2487,-.5073,-.6704,-.031,-.0181,.0466,.0651,-.0726,-.0033,-.0022,.2944,.0101,.1669,-.5225,-.4685,.0236,.0079,.011,.2173,.4529,.0121,-.2104,-.0673,.0225,-.4023,.0317,-9e-4,.0076,-.0032,.0333,.0523,.0129,-.001,-.0319,-.0139,.0015,-.0044,.0247,-5e-4,.0161,.0061,.0074,.0776,-.0176,.007,.055,-.017,.0052,-.1819,.0294,-.0161,-.0337,.0226,-.008,-.0297,.1967,-.0095,.0383,.2039,.0434,.0271,-.0064,-.0037,-.0294,-.024,.0024,-.0137,-.0209,-.0031,.0628,.1003,-.0126,-.056,-.0097,-.0012,-.0041,.0162]},11:{mean:[.2505,.3833,.7793],identity:[.0098,.012,.0077,-6e-4,-3e-4,0,1e-4,.0082,-7e-4,.0019,-.0036,-.0012,2e-4,.0119,-.0039,.001,1e-4,.0031,-.0036,-.0059,-7e-4,.0026,.0028,-.0011,9e-4,-.0032,8e-4,.0029,.0043,3e-4,.0025,-9e-4,.0047,.0016,.0022,.0018,-.001,.0025,-.003,-.001,.0033,.0034,4e-4,-.0052,.0024,-2e-4,.001,-.0014,-6e-4,.0038,-.0015,-6e-4,-.001,-.0011,-4e-4,-.001,4e-4,-7e-4,.0036,-8e-4,-2e-4,-.0019,5e-4,3e-4,-6e-4,-.0024,-.0017,-.0014,6e-4,-4e-4,-.0031,-.0013,-6e-4,.0042,2e-4,-2e-4,-.002,-3e-4,8e-4,.0018,-5e-4,-6e-4,-2e-4,-6e-4,.0025,.0019,.001,8e-4,-.0015,-.0012,-1e-4,-6e-4,-4e-4,.0023,-.001,6e-4,-2e-4,-.001,0,-9e-4,-.002,-.0011,1e-4,0,-1e-4,5e-4,6e-4,9e-4,-6e-4,5e-4,8e-4,-1e-4,-2e-4,-.0017,-6e-4,-4e-4,4e-4,-6e-4,.0012,4e-4,3e-4,-7e-4,3e-4,-2e-4,6e-4,1e-4,5e-4,-.0019,-6e-4,4e-4,7e-4,-1e-4,1e-4,5e-4,.001,-6e-4,-.002,-7e-4,-5e-4,5e-4,3e-4,7e-4,.0014,0,5e-4,-5e-4,-2e-4,3e-4,-6e-4,-1e-4],expression:[-9e-4,-3e-4,.0032,-.003,-.0034,-.0031,.0014,0,4e-4,-.0139,-.0764,.0275,-.002,-.0089,.0031,-.0503,-.0771,.038,-.1323,-.3523,.1368,-.0474,-.0564,.0296,-.0045,.007,-.0013,.0153,.1259,-.0464,.0866,.2175,-.0786,-.0413,-.1248,.0448,-.1777,-.4607,.1782,-5e-4,-.005,.0016,.0629,.1506,-.0624,.0545,.2576,-.0864,-.0231,-.0552,.0244,-.0136,-.0359,.0169,-.1158,-.2996,.1214,-.0235,-.0354,.0165,-.0745,-.1079,.0475,-.0116,-.0039,.0012,.0013,-.0108,-8e-4,.0044,-.0027,-1e-4,-.0694,.0363,.0071,.1462,-.136,.0047,.009,-.0177,.0038,-.0271,.0118,.0011,-.0399,-.0111,.0123]},12:{mean:[-.2981,.3828,.7563],identity:[-.0116,.014,.0054,.0018,5e-4,0,-4e-4,.0068,-.0013,-.0019,-.0048,-5e-4,5e-4,.0108,-.0036,-.0029,-.0018,.0029,.0043,-.0077,6e-4,-.0017,.002,-.0011,-.0014,-.0035,.0015,-.0024,.0011,4e-4,-.0048,2e-4,.0029,-1e-4,-1e-4,.003,.0019,.0035,-.0016,-4e-4,.0039,.0019,1e-4,-.0064,.004,3e-4,.002,-.0021,.0017,.0011,-.001,.0026,.0025,-5e-4,2e-4,-3e-4,-5e-4,-7e-4,9e-4,-4e-4,-.001,-.0022,.001,9e-4,-.0014,7e-4,.0011,-.001,-5e-4,-8e-4,-.0017,-.0021,9e-4,.0036,5e-4,4e-4,-.0031,6e-4,-.0015,.0027,2e-4,1e-4,-.0011,2e-4,-.0011,-.0018,4e-4,-.0013,-2e-4,7e-4,9e-4,-3e-4,.001,-.0021,8e-4,6e-4,-9e-4,4e-4,-7e-4,8e-4,-.002,-.0013,0,7e-4,-.0012,-1e-4,.0014,.0014,-1e-4,.0013,6e-4,6e-4,-.0014,-.0015,-9e-4,1e-4,1e-4,9e-4,7e-4,0,1e-4,-.001,-4e-4,0,-5e-4,1e-4,-3e-4,4e-4,-5e-4,-1e-4,-.0011,2e-4,0,1e-4,8e-4,8e-4,0,-7e-4,-8e-4,0,2e-4,-1e-4,.001,3e-4,4e-4,-2e-4,0,5e-4,.0018,-1e-4],expression:[0,-4e-4,.0028,.0036,-8e-4,-.0026,-.0015,-8e-4,3e-4,.0075,-.0608,.025,.0019,-.0076,.0033,.0379,-.0437,.0335,.0964,-.2452,.1233,.0368,-.0251,.0253,.0033,.0097,-.0021,-.0095,.1171,-.0475,-.064,.1548,-.0718,.0228,-.0831,.0343,-.1924,.6206,-.2771,.0021,-.0143,.0056,-.0705,.2522,-.1116,-.0692,.4229,-.1592,-.0093,.05,-.0185,.0948,-.3196,.1437,-.0184,.0194,-.0131,.0205,-.0353,.0201,.0676,-.135,.0672,.0137,-.0311,.0118,3e-4,-.0077,-2e-4,-.0151,4e-4,-.0058,.029,-.0139,.0163,.1324,.1819,-.0039,.0406,.0501,.0017,.0331,.0161,.0062,-.0235,-.0446,.0047]}},e1=1,e4=new Map;class e2{constructor(e){this._name=e,this.anchor_pose=k.vt()}_getVertex(e,t,r){let i=r.mean.slice();for(let t=0;t<50;t++)i[0]+=e[t]*r.identity[3*t+0],i[1]+=e[t]*r.identity[3*t+1],i[2]+=e[t]*r.identity[3*t+2];for(let e=0;e<29;e++)i[0]+=t[e]*r.expression[3*e+0],i[1]+=t[e]*r.expression[3*e+1],i[2]+=t[e]*r.expression[3*e+2];return i}update(e,t,r){let i,a=e0[this._name.toString()];if(a){if(Array.isArray(a)){i=this._getVertex(e,t,a[0]);let r=this._getVertex(e,t,a[1]);i[0]=.5*(i[0]+r[0]),i[1]=.5*(i[1]+r[1]),i[2]=.5*(i[2]+r[2])}else i=this._getVertex(e,t,a);r&&(i[0]*=-1),k.kN(this.anchor_pose,i)}}}let e3={incompatible:()=>!("function"==typeof Promise&&"object"==typeof WebAssembly&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.getUserMedia&&1),incompatible_ui:()=>{let e=document.createElement("div");e.append(function(){let e=document.createElement("div"),t="a recent web browser";navigator.userAgent.match(/Android/i)?(t="Chrome for Android",window.location.href="googlechrome://navigate?url="+encodeURI(window.location.href),setTimeout(()=>{window.location.href="samsunginternet://open?url="+encodeURI(window.location.href)},2e3)):navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(t="Safari",e.classList.add("zee-launcher-browser-safari")),e.classList.add("zee-launcher-unsupported"),e.innerHTML=`
            <style>.zee-launcher-unsupported {
               display: flex;
               flex-direction: column;
               height: 100%;
               justify-content: center;
               position: absolute;
               width: 100%;
               height: 100%;
               top: 0;
               left: 0;
               align-items: center;
               }
               .zee-launcher-browser-logo {
               background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 210 211' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-82 -146)' fill-rule='nonzero' stroke='%23ffffff' stroke-width='2'%3E%3Cg transform='translate(83 146.5)'%3E%3Cpath d='m55.146 88.785l-32.039-49.472c19.962-24.947 49.904-38.684 80.517-38.81 17.739-0.12642 35.855 4.4246 52.336 13.99 18.2 10.619 32.039 25.874 40.846 43.404l-86.095-4.5511c-24.365-1.4327-47.556 12.347-55.565 35.439zm13.797 16.224c0 19.468 15.684 35.229 35.059 35.229 19.374 0 35.059-15.76 35.059-35.229 0-19.468-15.684-35.229-35.059-35.229-19.374 0-35.059 15.718-35.059 35.229zm132.06-37.588l-58.585 3.034c15.894 18.668 16.145 45.595 2.7678 66.243l-47.01 72.648c19.5 1.0535 39.588-3.2447 57.788-13.864 45.039-26.126 63.282-80.908 45.039-128.06zm-144.93 57.647l-39.126-77.326c-10.694 16.434-16.942 36.156-16.942 57.267 0 52.253 38.078 95.53 87.856 103.2l26.713-52.59c-24.155 4.5511-47.472-8.765-58.501-30.551z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");
               width: 211px;
               height: 211px;
               margin-bottom: 25%;
               margin-top: -60px;
               background-repeat: no-repeat;
               }
               .zee-launcher-browser-safari .zee-launcher-browser-logo {
               background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 211 211' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-82 -146)' fill-rule='nonzero' stroke='%23ffffff' stroke-width='2'%3E%3Cpath d='m180 251.86c0-4.0385 2.9377-7.855 7.2552-7.855 3.9614 0 7.7448 2.8402 7.7448 7.145 0 4.0385-2.8487 7.855-7.1662 7.855-4.0059 0-7.8338-2.9734-7.8338-7.145zm112-0.35503c0 57.728-46.772 104.5-104.5 104.5s-104.5-46.772-104.5-104.5 46.772-104.5 104.5-104.5 104.5 46.772 104.5 104.5zm-12-1c0-51.649-41.851-93.5-93.5-93.5s-93.5 41.851-93.5 93.5 41.851 93.5 93.5 93.5 93.5-41.851 93.5-93.5zm-30.624 40.983c0 1.5095 5.4495 4.2768 6.8328 5.1154-11.486 17.401-29.26 29.938-49.423 34.928l-1.8444-7.757c-0.12576-1.0482-0.79646-1.174-1.7606-1.174-0.79646 0-1.2576 1.174-1.1737 1.7611l1.8444 7.8828c-5.5753 1.174-11.234 1.7611-16.935 1.7611-15.217 0-30.182-4.2768-43.177-12.202 0.71263-1.174 5.1141-7.5474 5.1141-8.4698 0-0.79666-0.71263-1.5095-1.5091-1.5095-1.6348 0-5.1141 6.9603-6.1621 8.344-17.522-11.615-30.182-29.602-35.044-50.148l8.0066-1.761c0.92222-0.25158 1.1737-0.92246 1.1737-1.7611 0-0.79667-1.1737-1.2579-1.8444-1.174l-7.8389 1.803c-1.048-5.3251-1.6348-10.692-1.6348-16.143 0-15.556 4.4015-30.86 12.66-43.984 1.1737 0.71281 6.749 4.5284 7.6712 4.5284 0.79646 0 1.5091-0.58702 1.5091-1.3837 0-1.6353-6.1621-4.7381-7.5455-5.7024 11.821-17.275 29.805-29.728 50.219-34.34l1.7606 7.757c0.25152 0.92246 0.92222 1.174 1.7606 1.174 0.83838 0 1.2576-1.174 1.1737-1.8449l-1.7606-7.6732c5.1141-0.92246 10.312-1.5095 15.552-1.5095 15.552 0 30.727 4.4026 43.973 12.663-0.79646 1.174-4.5273 6.6249-4.5273 7.5474 0 0.79667 0.58687 1.5095 1.3833 1.5095 1.6348 0 4.7369-6.0379 5.5753-7.4216 17.187 11.615 29.469 29.351 34.248 49.561l-6.4975 1.3837c-1.048 0.25158-1.1737 0.92246-1.1737 1.8449 0 0.79667 1.1737 1.2579 1.7606 1.174l6.6232-1.5095c1.048 5.3251 1.6348 10.776 1.6348 16.227 0 15.221-4.1919 30.189-12.073 43.062-1.1737-0.58702-6.0364-4.0672-6.9586-4.0672-0.8803 0-1.5929 0.71281-1.5929 1.5095zm-14.876-98.483c-5.2178 4.88-53.863 49.48-55.228 51.8l-38.772 64.2c5.0974-4.76 53.863-49.6 55.108-51.72l38.892-64.28z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
               }
               .zee-launcher-unsupported-message {
               text-align: center;
               width: 250px;
               font-family: sans-serif;
               color: #ffffff;
               }
               .zee-launcher-unsupported-message-copy {
               border: 1px solid #ffffff;
               border-radius: 5px;
               margin-top: 10px;
               }
               #zee-launcher-unsupported-message-input {
               border: none;
               padding: 10px;
               border-radius: 0px;
               border-right: 1px solid #344B60;
               height: 40px;
               color: #ffffff;
               background-color: black;
               box-sizing: border-box;
               width: calc(100% - 65px);
               margin-left: 5px;
               }
               #zee-launcher-unsupported-message-button {
               background: none;
               border: none;
               outline: none;
               text-transform: uppercase;
               color: #ffffff;
               height: 40px;
               display: inline-block;
               width: 59px;
               }
               .zee-launcher-unsupported-message-before-copy {
               height: 100px;
               display: flex;
               flex-direction: column;
               justify-content: center;
               margin-top: 20px;
               }
               .zee-launcher-unsupported-message-copied .zee-launcher-unsupported-message-before-copy {
               display: none;
               }
               .zee-launcher-unsupported-message-after-copy {
               display: none;
               }
               .zee-launcher-unsupported-message-copied .zee-launcher-unsupported-message-after-copy {
               height: 100px;
               display: flex;
               flex-direction: column;
               justify-content: center;
               margin-top: 20px;
               }
            </style>
            <div class="zee-launcher-browser-logo"></div>
            <div class="zee-launcher-unsupported-message">Open with ${t} to access this content.</div>
            <div class="zee-launcher-unsupported-message-before-copy">
               <div class="zee-launcher-unsupported-message ">Tap below to copy the address for easy pasting into ${t}.</div>
               <div class="zee-launcher-unsupported-message-copy"><input id="zee-launcher-unsupported-message-input" type="text/"><button id="zee-launcher-unsupported-message-button">Copy</button></div>
            </div>
            <div class="zee-launcher-unsupported-message zee-launcher-unsupported-message-after-copy">COPIED! Now paste into ${t}'s address bar to experience the content.</div>
    `;let r=e.querySelector("#zee-launcher-unsupported-message-input")||document.createElement("input");r.value=window.location.href;let i=e.querySelector("#zee-launcher-unsupported-message-button")||document.createElement("button"),a=()=>{if(navigator.userAgent.match(/iPhone|iPod|iPad/i)){let e=document.createRange();e.selectNodeContents(r);let t=window.getSelection();if(!t)return;t.removeAllRanges(),t.addRange(e),r.setSelectionRange(0,0x3b9ac9ff)}else r.select();document.execCommand("copy"),r.blur(),e.classList.toggle("zee-launcher-unsupported-message-copied",!0)};return i.addEventListener("click",a),r.addEventListener("click",a),e}()),Object.assign(e.style,{position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:1001,backgroundColor:"rgba(0, 0, 0, 0.9)",fontFamily:"sans-serif",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),e.classList.add("zee_launcher_compatibility"),document.body.append(e)}},e5=1,e7=new Map;class e6 extends eC{constructor(e,t){super(),this._impl=e,this._pipeline=t,this._packetNumber=0,this._motionUpdatesQueued=0,this._motionUpdatesSent=0,this._minFrameGapMs=0,this._lastUpdateTime=0}static create(e){let t=e5++;return e7.set(t,new e6(t,e)),ec("sequence_source_source_t initialized"),t}static get(e){return e7.get(e)}loadFromMemory(e){try{this._decoder=new eI(e),this._packetNumber=0,this._lastUpdateTime=0}catch(e){eh("Unable to decode sequence:",e)}}maxPlaybackFpsSet(e){if(e<=0){this._minFrameGapMs=0;return}this._minFrameGapMs=1e3/e}setTime(e){e<0?delete this._time:this._time=e}getFrame(e){var t;let r=e$.get(this._pipeline);if(!r||!this._decoder||(this._submitMotionUpdates(r),this._motionUpdatesQueued>this._motionUpdatesSent||e))return;let i=null!=(t=this._time)?t:performance.now();if(i<this._lastUpdateTime+this._minFrameGapMs||this._packetNumber>=this._decoder.numberPackets)return;let a=this._decoder.dataByPacket.get(this._packetNumber);if(a.type!=y.CAMERA_FRAME)return;this._packetNumber++;let s=r.cameraPixelArrays.pop();for(;s&&s.byteLength!==a.greyscale.byteLength;)s=r.cameraPixelArrays.pop();s||(s=new ArrayBuffer(a.greyscale.byteLength)),new Uint8Array(s).set(a.greyscale),this._lastUpdateTime=i;let n={data:s,cameraSourceData:a.greyscale,cameraModel:a.cameraModel,cameraToDevice:a.cameraToDevice,dataWidth:a.width,dataHeight:a.height,texture:void 0,userFacing:a.userFacing,uvTransform:k.vt(),cameraSource:this};this._submitMotionUpdates(r);let o=r.registerToken(n);r.sendDataToWorker(n.data||new ArrayBuffer(0),o,n.dataWidth,n.dataHeight,n.userFacing,n.cameraToDevice,n.cameraModel)}destroy(){e7.delete(this._impl),this.pause()}start(){var e;let t=e$.get(this._pipeline);t&&t.currentCameraSource!==this&&(null==(e=t.currentCameraSource)||e.pause(),t.currentCameraSource=this)}pause(){let e=e$.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0)}uploadGL(e){let t=e$.get(this._pipeline);if(!t)return;let r=null==t?void 0:t.glContext;if(r)e.texture||(e.texture=t.getVideoTexture()),e.texture&&e.cameraSourceData&&(r.bindTexture(r.TEXTURE_2D,e.texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e.dataWidth,e.dataHeight,0,r.LUMINANCE,r.UNSIGNED_BYTE,new Uint8Array(e.cameraSourceData)),r.bindTexture(r.TEXTURE_2D,null))}_submitMotionUpdates(e){let t=!1;for(;this._packetNumber<this._decoder.numberPackets;){let r=this._decoder.dataByPacket.get(this._packetNumber);if(r.type==y.CAMERA_FRAME)break;switch(r.type){case y.ACCELEROMETER:e.motionAccelerometerSubmit(r.t,r.x,r.y,r.z),t=!0;break;case y.ROTATION_RATE:e.motionRotationRateSubmit(r.t,r.x,r.y,r.z),t=!0;break;case y.ATTITUDE:e.motionAttitudeSubmit(r.t,r.x,r.y,r.z),t=!0;break;case y.ATTITUDE_MATRIX:e.motionAttitudeMatrix(r.attitude),t=!0}this._packetNumber++}t&&(this._motionUpdatesQueued++,setTimeout(()=>{this._motionUpdatesSent++},0))}}function e8(){var e=new L.tb(2);return L.tb!=Float32Array&&(e[0]=0,e[1]=0),e}function e9(e,t){return e[0]=t[0],e[1]=t[1],e}function te(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function tt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function tr(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function ti(e){return Math.hypot(e[0],e[1])}function ta(){return{indices:new Uint16Array(0),vertices:new Float32Array(0),normals:new Float32Array(0),uvs:new Float32Array(0)}}function ts(e){let t=2*e.trainedWidth/(e.trainedHeight*e.topRadius);return tn(e,2,!1,0,0,0,e8(),e.trainedWidth/e.trainedHeight,t,e.physicalScaleFactor)}function tn(e,t,r,i,a,s,n,o,l,c){isNaN(o)&&(o=1);let h=[],d=[],u=c>0?c:1,_=2*u/t;for(let t=0;t<=64;++t){let i=t*l/64+(2*Math.PI-l)/2,a=e.bottomRadius*Math.sin(i)*_,s=e.bottomRadius*Math.cos(i)*_,n=e.topRadius*Math.sin(i)*_,o=e.topRadius*Math.cos(i)*_,c=-1*u;r?(h.push(a,c,s),h.push(n,u,o)):(h.push(n,u,-o),h.push(a,c,-s))}for(let t=0;t<=64;++t)if(e.type==v.IMAGE_TRACKER_TYPE_CYLINDRICAL){let e=1-t/64;d.push(e,1),d.push(e,0)}else{let e=-(2*(t/64-.5))*i;r&&(e=-e+i)>i&&(e=-i+(e-i));let l=e8();l[0]=Math.sin(e),l[1]=Math.cos(e),r&&(l[1]*=-1);let c=e8();e9(c,l),tr(c,c,a),te(c,n,c);let h=e8();e9(h,l),tr(h,h,s),te(h,n,h),d.push((h[0]+o)/(2*o),1-(-h[1]+1)/2),d.push((c[0]+o)/(2*o),1-(-c[1]+1)/2)}let m=[];for(let e=0;e<64;++e){let t=2*e;m.push(t+1,t+2,t+3),m.push(t+0,t+2,t+1)}return{vertices:new Float32Array(h),indices:new Uint16Array(m),normals:new Float32Array(0),uvs:new Float32Array(d)}}e8();let to=new TextDecoder;class tl{constructor(e,t=!1){this._data=e,this._paddingBytes=t,this.truncatedChunks=!1,this._view=new DataView(this._data),this.root=this._parse()}_parse(){if("RIFF"!==to.decode(this._data.slice(0,4)))throw Error("Not a valid ZPT file");return this._parseChunk(0)}_parseChunk(e){let t,r,i=to.decode(this._data.slice(e,e+4)),a=this._view.getUint32(e+4,!0),s=new Uint8Array(this._data,e+8,a);if(s.byteLength!==a&&(this.truncatedChunks=!0),"RIFF"===i||"LIST"===i){r=to.decode(this._data.slice(e+8,e+12)),t=[];let i=4;for(;i<s.byteLength-1;){let r=this._parseChunk(e+8+i);t.push(r),i+=r.data.byteLength+8,this._paddingBytes&&1&r.data.byteLength&&i++}}return{ident:i,data:s,subident:r,subchunks:t}}find(e,t=this.root){if(t.ident===e)return t;if(t.subchunks)for(let r of t.subchunks){let t=this.find(e,r);if(t)return t}}has(e){return void 0!==this.find(e)}}let tc=new Map,th=new TextDecoder;class td{constructor(e,t){this._client=e,this._impl=t,this._targets=[]}static create(e,t){let r=t.image_tracker_create(e);return tc.set(r,new td(t,r)),r}static get(e){return tc.get(e)}destroy(){this._client.image_tracker_destroy(this._impl),tc.delete(this._impl)}loadFromMemory(e){this._targets.push({data:e}),this._client.image_tracker_target_load_from_memory(this._impl,e)}targetCount(){return this._targets.length}getTargetInfo(e){let t=this._targets[e];if(t&&t.info)return t.info;t.info={topRadius:-1,bottomRadius:-1,sideLength:-1,physicalScaleFactor:-1,trainedWidth:0,trainedHeight:0,type:v.IMAGE_TRACKER_TYPE_PLANAR};try{let e=new tl(t.data,!1),r=e.find("IMG ");if(r){let i="image/png",a=e.find("IMGM");a&&(i=th.decode(a.data)),t.info.preview={mimeType:i,compressed:r.data}}let i=e.find("ODLE");if(i){let e=th.decode(i.data);this._parseOdle(e,t.info)}}catch(e){}return t.info}_parseOdle(e,t){let r=0,i="0";return([i,r]=tu(r,e),"1"===i)?this._parseOdleV1(e,r,t):"3"===i?this._parseOdleV3(e,r,t):void 0}_parseOdleV1(e,t,r){let i="0";if([i,t]=tu(t,e),"0"!==i&&"1"!==i)return;let a="";if([a,t]=tu(t,e),0!==a.length)return;let s="";[s,t]=tu(t,e);let n=s.split(" ");n.length<5||(r.trainedWidth=parseInt(n[3].replace("[","")),r.trainedHeight=parseInt(n[4].replace("]","")))}_parseOdleV3(e,t,r){let i="0";if([i,t]=tu(t,e),"0"!==i&&"1"!==i)return;let a="0";[a,t]=tu(t,e);let s=parseInt(a);if(isNaN(s)||s<1)return;let n="";if([n,t]=tu(t,e),0!==n.length)return;let o="";[o,t]=tu(t,e);let l=o.split(" ");if(l.length<6)return;let c=parseInt(l[0]);(0===c||1===c||2===c)&&(r.type=c),r.trainedWidth=parseInt(l[4].replace("[","")),r.trainedHeight=parseInt(l[5].replace("]","")),l.length>=7&&(r.physicalScaleFactor=parseFloat(l[6]),isNaN(r.physicalScaleFactor)&&(r.physicalScaleFactor=-1)),l.length>=8&&(r.topRadius=parseFloat(l[7]),isNaN(r.topRadius)&&(r.topRadius=-1),r.bottomRadius=r.topRadius),l.length>=9&&(r.bottomRadius=parseFloat(l[8]),isNaN(r.bottomRadius)&&(r.bottomRadius=-1)),l.length>=10&&(r.sideLength=parseFloat(l[9]),isNaN(r.sideLength)&&(r.sideLength=-1))}getDecodedPreview(e){let t=this.getTargetInfo(e);if(t.preview){if(!t.preview.image){let e=new Blob([t.preview.compressed],{type:t.preview.mimeType});t.preview.image=new Image,t.preview.image.src=URL.createObjectURL(e)}return t.preview.image}}getPreviewMesh(e){let t=this.getTargetInfo(e);return t.previewMesh||(t.previewMesh=function(e){switch(e.type){case v.IMAGE_TRACKER_TYPE_PLANAR:var t=e;let r=t.trainedWidth/t.trainedHeight;if(isNaN(r))break;let i=t.physicalScaleFactor>0?t.physicalScaleFactor:1,a=new Float32Array([-1*r*i,-1*i,0,-1*r*i,i,0,r*i,i,0,r*i,-1*i,0]);return{vertices:a,indices:new Uint16Array([0,2,1,0,3,2]),uvs:new Float32Array([0,0,0,1,1,1,1,0]),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1])};case v.IMAGE_TRACKER_TYPE_CYLINDRICAL:return ts(e);case v.IMAGE_TRACKER_TYPE_CONICAL:return function(e){let t=e.topRadius-e.bottomRadius;if(0===t)return console.warn("Conical target has matching radii, using cylindrical preview mesh with a defined image size instead."),ts(e);let r=Math.sqrt(e.sideLength*e.sideLength-t*t),i=e.bottomRadius>e.topRadius,a=e.trainedWidth/e.trainedHeight;isNaN(a)&&(a=1);let s=!(e.bottomRadius>0)||!(e.topRadius>0),n=e.sideLength<2*Math.abs(e.topRadius-e.bottomRadius),o=e8(),l=e8(),c=e8();if(s)if(n)if(i){c[1]=a-1;let e=Math.acos((2-a)/a);o[0]=a*Math.sin(e),o[1]=a-1+a*Math.cos(e),e9(l,c)}else{c[1]=1-a;let e=Math.PI+Math.acos((2-a)/a);o[0]=a*Math.sin(e),o[1]=1-a+a*Math.cos(e),e9(l,c)}else i?(c[1]=1,e9(l,c),o[0]=a,o[1]=1-Math.sqrt(4-Math.pow(a,2))):(c[1]=-1,e9(l,c),o[0]=-a,o[1]=Math.sqrt(4-Math.pow(a,2))-1);else if(n)if(i){c[1]=a-1;let t=Math.acos((2-a)/a);o[0]=a*Math.sin(t),o[1]=a-1+a*Math.cos(t),l[0]=(a-e.sideLength)*Math.sin(t),l[1]=a-1+(a-e.sideLength)*Math.cos(t)}else{c[1]=1-a;let t=Math.PI+Math.acos((2-a)/a);o[0]=a*Math.sin(t),o[1]=1-a+a*Math.cos(t),l[0]=(a-e.sideLength)*Math.sin(t),l[1]=1-a+(a-e.sideLength)*Math.cos(t)}else{let t=i?e.topRadius/e.bottomRadius:e.bottomRadius/e.topRadius;i?(l[0]=t*a,l[1]=1,o[0]=a,o[1]=1-Math.sqrt(e.sideLength*e.sideLength-(l[0]-o[0])*(l[0]-o[0])),c[1]=o[1]+o[0]/(o[0]-l[0])*(l[1]-o[1])):(l[0]=-t*a,l[1]=-1,o[0]=-a,o[1]=Math.sqrt(e.sideLength*e.sideLength-(l[0]-o[0])*(l[0]-o[0]))-1,c[1]=o[1]- -o[0]/(l[0]-o[0])*(o[1]-l[1]))}let h=e8();tt(h,o,c);let d=e8();tt(d,l,c);let u=ti(h),_=ti(d),m=2*Math.abs(Math.atan(h[0]/h[1]));n&&(m=2*Math.PI-m);let p=u*m/e.topRadius,f=Math.abs(Math.atan(h[0]/h[1]));return n&&(f=Math.PI-f),tn(e,r,i,f,_,u,c,a,p,e.physicalScaleFactor)}(e)}return ta()}(t)),t.previewMesh}}function tu(e,t){let r=t.indexOf("\n",e);return[t.substring(e,r>=0?r:void 0).replace("\r",""),r+1]}var t_=function(e,t,r,i){return new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})};function tm(){!o&&(console.log("Zappar JS v2.2.7"),console.log("Zappar CV v2.1.9"),o=function(e){if(n)return n;let t=!1;(function(e){var t,i,a,s;return t=this,i=void 0,a=void 0,s=function*(){var t;function i(){for(let t of N.getOutgoingMessages())e.postMessage(t.msg,t.transferables)}e||(e=new Worker(r.tu(new URL(r.p+r.u(732),r.b)),{type:void 0})),e.postMessage({t:"wasm",url:new r.U(r(6391)).toString()}),yield(t=e,new Promise(e=>{let r=i=>{"loaded"===i.data&&(t.removeEventListener("message",r),e())};t.addEventListener("message",r)})),N.onOutgoingMessage.bind(i),i(),e.addEventListener("message",e=>{N.postIncomingMessage(e.data)})},new(a||(a=Promise))(function(e,r){function n(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof a?r:new a(function(e){e(r)})).then(n,o)}l((s=s.apply(t,i||[])).next())})})(null==e?void 0:e.worker).then(()=>{ec("Fully loaded"),t=!0});let o=new M(e=>{N.postOutgoingMessage({t:"zappar",d:e},[e])}),l=function(){let e=window.localStorage.getItem("z_uar_lid");if(null===e){let t=new Uint8Array(8);window.crypto.getRandomValues(t),e="";for(let r=0;r<t.byteLength;r++){let i=t[r].toString(16);1===i.length?e+="0"+i:2===i.length&&(e+=i)}}return e}(),c=!1,h=!1;try{let e=Object.fromEntries(document.cookie.split("; ").map(e=>e.split(/=(.*)/s).map(decodeURIComponent)));if(e["zw-uar-project"]){let t=JSON.parse(e["zw-uar-project"]);"object"==typeof t&&"string"==typeof t.id&&(o.impl.analytics_project_id_set(".wiz"+t.id,l),h=!0)}}catch(e){}if(!h&&(window.location.hostname.toLowerCase().indexOf(".zappar.io")>0||window.location.hostname.toLowerCase().indexOf(".webar.run")>0||window.location.hostname.toLowerCase().indexOf(".arweb.app")>0||window.location.hostname.toLowerCase().indexOf(".zappar-us.io")>0||window.location.hostname.toLowerCase().indexOf(".zappar-eu.io")>0)){let e=window.location.pathname.split("/");e.length>1&&e[1].length>0&&(o.impl.analytics_project_id_set(".wiz"+e[1],l),h=!0)}return N.onIncomingMessage.bind(e=>{var t,r,i,a,s,n,l;switch(e.t){case"zappar":null==(t=e$.get(e.p))||t.pendingMessages.push(e.d);break;case"buf":o.serializer.bufferReturn(e.d);break;case"cameraFrameRecycleS2C":null==(i=null==(r=e$.get(e.p))?void 0:r.cameraTokenReturn)||i.call(r,e);break;case"videoFrameS2C":null==(s=null==(a=e$.get(e.p))?void 0:a.videoFrameFromWorker)||s.call(a,e);break;case"imageBitmapS2C":null==(l=null==(n=e$.get(e.p))?void 0:n.imageBitmapFromWorker)||l.call(n,e);break;case"licerr":{let e=document.createElement("div");e.innerHTML="Visit <a href='https://docs.zap.works/universal-ar/licensing/' style='color: white;'>our licensing page</a> to find out about hosting on your own domain.",e.style.position="absolute",e.style.bottom="20px",e.style.width="80%",e.style.backgroundColor="black",e.style.color="white",e.style.borderRadius="10px",e.style.padding="10px",e.style.fontFamily="sans-serif",e.style.textAlign="center",e.style.left="10%",e.style.zIndex=Number.MAX_SAFE_INTEGER.toString();let t=document.createElement("span");t.innerText=" (30)",e.append(t);let r=30;setInterval(function(){--r>=0&&(t.innerText=" ("+r.toString()+")")},1e3),document.body.append(e)}case"gfx":{let e=document.createElement("div");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="250" height="80.408" viewBox="0 0 250 80.408"><defs><filter id="a" x="0" y="1.182" width="250" height="79.226" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="b"/><feFlood flood-opacity="0.161"/><feComposite operator="in" in2="b"/><feComposite in="SourceGraphic"/></filter><filter id="c" x="6.929" y="0" width="111.975" height="40.988" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="d"/><feFlood flood-opacity="0.161"/><feComposite operator="in" in2="d"/><feComposite in="SourceGraphic"/></filter></defs><g transform="translate(-26.873 -414.029)"><g transform="translate(44 423.332)"><g transform="translate(0 0.635)" style="isolation:isolate"><g transform="translate(0 0)"><g transform="matrix(1, 0, 0, 1, -17.13, -9.94)" filter="url(#a)"><path d="M55.766,44.97V11.8h8.272v2.6h.089a8.258,8.258,0,0,1,7.046-3.357,11.4,11.4,0,0,1,8.5,3.686,12.667,12.667,0,0,1,3.278,8.622,12.509,12.509,0,0,1-3.25,8.57,11.353,11.353,0,0,1-8.429,3.6,9.533,9.533,0,0,1-7.229-2.95V43.378l-8.269,1.594h0Zm8-21.671a4.958,4.958,0,0,0,5.319,5.15A4.957,4.957,0,0,0,74.4,23.3a5.321,5.321,0,0,0-10.638,0ZM16.105,18.412H2.752V11.038H30.9L14.887,37.16H38.22L0,44.534ZM131.469,38.45a.761.761,0,0,1-.484-.166.582.582,0,0,1-.228-.419l-.553-3.586a12.243,12.243,0,0,1-1.782-.721l-2.789,2.084a.718.718,0,0,1-.5.176.688.688,0,0,1-.495-.214,25.864,25.864,0,0,1-3.264-3.274.754.754,0,0,1,.018-.9c.2-.277.543-.713,1.01-1.3.483-.6.832-1.05,1.068-1.374a9.614,9.614,0,0,1-.811-1.929l-3.62-.527a.631.631,0,0,1-.416-.243.728.728,0,0,1-.159-.458V21.283a.743.743,0,0,1,.159-.448.6.6,0,0,1,.376-.253l3.68-.546a9.511,9.511,0,0,1,.772-1.792c-.523-.733-1.235-1.638-2.117-2.69a.731.731,0,0,1-.2-.467.82.82,0,0,1,.178-.449,19.577,19.577,0,0,1,1.949-2.095c.953-.924,1.582-1.393,1.87-1.393a.861.861,0,0,1,.515.195l2.729,2.084a11.551,11.551,0,0,1,1.8-.741,31.446,31.446,0,0,1,.573-3.623.666.666,0,0,1,.712-.546h4.392a.757.757,0,0,1,.485.166.58.58,0,0,1,.228.419l.553,3.584a12.576,12.576,0,0,1,1.782.722l2.809-2.085a.641.641,0,0,1,.475-.176.776.776,0,0,1,.5.195,27.035,27.035,0,0,1,3.264,3.313.625.625,0,0,1,.139.429.742.742,0,0,1-.159.447c-.2.271-.525.7-1.008,1.3-.467.581-.827,1.043-1.069,1.373a11.8,11.8,0,0,1,.812,1.91l3.62.545a.626.626,0,0,1,.416.244.736.736,0,0,1,.158.457v4.325a.755.755,0,0,1-.158.449.6.6,0,0,1-.4.253l-3.66.545a12.692,12.692,0,0,1-.772,1.774c.465.653,1.177,1.559,2.117,2.688a.751.751,0,0,1,.2.488.648.648,0,0,1-.178.448,19.638,19.638,0,0,1-1.958,2.1c-.947.918-1.573,1.384-1.861,1.384a.976.976,0,0,1-.515-.176l-2.731-2.1a11.361,11.361,0,0,1-1.8.741,31.849,31.849,0,0,1-.573,3.625.668.668,0,0,1-.713.546Zm-1.385-18.491a4.935,4.935,0,0,0,0,7.053,5.12,5.12,0,0,0,7.163,0,4.931,4.931,0,0,0,0-7.053,5.117,5.117,0,0,0-7.163,0Zm69.969,14.868a18.523,18.523,0,0,1-4.932-2.073l1.705-6.1A13.441,13.441,0,0,0,200.779,29a12.14,12.14,0,0,0,4.344.818,4.644,4.644,0,0,0,2.351-.482,1.538,1.538,0,0,0,.806-1.4q0-1.5-3.25-2.242-1.061-.246-1.705-.425a12.335,12.335,0,0,1-5.358-2.589,5.5,5.5,0,0,1-1.671-4.157,6.323,6.323,0,0,1,2.547-5.267,10.993,10.993,0,0,1,6.9-1.972,21.351,21.351,0,0,1,4.552.5,25.439,25.439,0,0,1,4.736,1.557l-1.705,5.491a14.244,14.244,0,0,0-3.319-1.636,10.6,10.6,0,0,0-3.364-.561,4.227,4.227,0,0,0-2.121.426,1.357,1.357,0,0,0-.714,1.232q0,1.211,3.227,2.04.737.2,1.106.291,4.264,1.187,5.935,2.79a5.728,5.728,0,0,1,1.67,4.337A6.781,6.781,0,0,1,213,33.37a11.48,11.48,0,0,1-7.259,2.14A22.577,22.577,0,0,1,200.053,34.827ZM30.568,31.834a12.566,12.566,0,0,1-3.292-8.59,12.567,12.567,0,0,1,3.247-8.568,11.3,11.3,0,0,1,8.423-3.638,9.519,9.519,0,0,1,7.217,3V11.8h8.264V34.735H46.163V32.186h-.09c-1.32,2.071-3.951,3.308-7.038,3.308A11.412,11.412,0,0,1,30.568,31.834Zm5.245-8.545a4.95,4.95,0,0,0,5.312,5.141,4.95,4.95,0,0,0,5.312-5.141A5.023,5.023,0,0,0,41.125,18.1,5.023,5.023,0,0,0,35.813,23.289Zm69.2,11.554-3.527-10.452q-.282-.892-.505-1.8t-.412-1.8a30.821,30.821,0,0,1-.917,3.454l-.047.16L96.1,34.842H90.176l-9.925-23.1h8.632l3.552,10.223q.4,1.12.634,1.955t.377,1.635a23.558,23.558,0,0,1,.917-3.179q.093-.274.141-.411l3.528-10.223h5.056l3.5,10.2.07.183a20.724,20.724,0,0,1,.988,3.43q.141-.732.364-1.532t.647-2.058l3.574-10.223h8.678l-9.971,23.1Zm80.154-.092-8.587-9.841v9.841h-7.888V1.5L176.583,0V22.28l8.272-9.665h9.96L184.584,23.266l11.156,11.485Zm-35.09,0V11.782h8.272v3.761h.091a8.131,8.131,0,0,1,7.546-4.074h1.593V19.3a6.8,6.8,0,0,0-3.5-.761c-4.593,0-5.728,3-5.728,6.941v9.268Z" transform="translate(17.13 15.31)"/></g><g transform="matrix(1, 0, 0, 1, -17.13, -9.94)" filter="url(#c)"><path d="M3.576-12.852v-4.3H6.628a2.867,2.867,0,0,1,1.945.55A2.034,2.034,0,0,1,9.188-15a2.06,2.06,0,0,1-.615,1.608,2.784,2.784,0,0,1-1.945.542ZM2.017-18.464V-6.748H3.576v-4.792H7.153a3.569,3.569,0,0,0,2.683-.9A3.478,3.478,0,0,0,10.747-15a3.45,3.45,0,0,0-.911-2.552,3.638,3.638,0,0,0-2.683-.911Zm11.421,7.483a4.221,4.221,0,0,1,.205-1.37,2.957,2.957,0,0,1,.566-1.009,2.411,2.411,0,0,1,.845-.624A2.515,2.515,0,0,1,16.08-14.2a2.515,2.515,0,0,1,1.026.213,2.411,2.411,0,0,1,.845.624,2.957,2.957,0,0,1,.566,1.009,4.221,4.221,0,0,1,.205,1.37,4.221,4.221,0,0,1-.205,1.37,2.867,2.867,0,0,1-.566,1,2.457,2.457,0,0,1-.845.615,2.515,2.515,0,0,1-1.026.213,2.515,2.515,0,0,1-1.026-.213,2.457,2.457,0,0,1-.845-.615,2.867,2.867,0,0,1-.566-1A4.221,4.221,0,0,1,13.438-10.981Zm-1.477,0a5.573,5.573,0,0,0,.263,1.739,3.97,3.97,0,0,0,.788,1.4,3.623,3.623,0,0,0,1.3.935,4.4,4.4,0,0,0,1.772.336A4.381,4.381,0,0,0,17.86-6.9a3.641,3.641,0,0,0,1.288-.935,3.97,3.97,0,0,0,.788-1.4,5.573,5.573,0,0,0,.263-1.739,5.65,5.65,0,0,0-.263-1.748,3.96,3.96,0,0,0-.788-1.411,3.729,3.729,0,0,0-1.288-.944,4.29,4.29,0,0,0-1.78-.345,4.3,4.3,0,0,0-1.772.345,3.71,3.71,0,0,0-1.3.944,3.96,3.96,0,0,0-.788,1.411A5.65,5.65,0,0,0,11.961-10.981Zm18.28,4.234,2.708-8.484H31.5L29.6-8.29h-.033L27.8-15.231H26.27L24.564-8.29h-.033l-1.92-6.941H21.068l2.724,8.484H25.3l1.707-6.744h.033l1.723,6.744ZM40.169-11.8H35.3a2.905,2.905,0,0,1,.213-.927A2.473,2.473,0,0,1,36-13.492a2.255,2.255,0,0,1,.747-.517,2.429,2.429,0,0,1,.976-.189,2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,40.169-11.8Zm1.346,2.363H40.136a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.105,5.105,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,41.515-9.439Zm1.526-5.793v8.484h1.395v-3.774a5.8,5.8,0,0,1,.164-1.452,2.784,2.784,0,0,1,.525-1.075,2.251,2.251,0,0,1,.952-.673,3.945,3.945,0,0,1,1.428-.23v-1.477a3.135,3.135,0,0,0-1.871.459,3.779,3.779,0,0,0-1.247,1.526h-.033v-1.789ZM54.15-11.8H49.276a2.905,2.905,0,0,1,.213-.927,2.473,2.473,0,0,1,.492-.763,2.255,2.255,0,0,1,.747-.517A2.429,2.429,0,0,1,51.7-14.2a2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,54.15-11.8ZM55.5-9.439H54.117a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.1,5.1,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,55.5-9.439Zm2.593-1.477a5.581,5.581,0,0,1,.131-1.214,3.212,3.212,0,0,1,.427-1.05,2.221,2.221,0,0,1,.788-.738,2.4,2.4,0,0,1,1.2-.279,2.589,2.589,0,0,1,1.231.271,2.389,2.389,0,0,1,.829.714,2.985,2.985,0,0,1,.468,1.026,4.889,4.889,0,0,1,.148,1.206,4.919,4.919,0,0,1-.139,1.165,3.053,3.053,0,0,1-.451,1.026,2.4,2.4,0,0,1-.8.73,2.4,2.4,0,0,1-1.2.279,2.491,2.491,0,0,1-1.173-.263,2.332,2.332,0,0,1-.82-.706,3.122,3.122,0,0,1-.476-1.009A4.338,4.338,0,0,1,58.088-10.916Zm6.564,4.168V-18.464H63.257V-14.1h-.033a2.247,2.247,0,0,0-.566-.632,3.216,3.216,0,0,0-.714-.41,3.583,3.583,0,0,0-.755-.222,4.132,4.132,0,0,0-.706-.066,3.861,3.861,0,0,0-1.7.353,3.487,3.487,0,0,0-1.214.952,4.018,4.018,0,0,0-.722,1.4,5.985,5.985,0,0,0-.238,1.707,5.8,5.8,0,0,0,.246,1.707,4.218,4.218,0,0,0,.73,1.411,3.529,3.529,0,0,0,1.214.968,3.827,3.827,0,0,0,1.715.361,4.135,4.135,0,0,0,1.625-.312A2.053,2.053,0,0,0,63.224-7.9h.033v1.149Zm6.761-11.716V-6.748h1.395V-7.88h.033a2.247,2.247,0,0,0,.566.632,2.982,2.982,0,0,0,.714.4,3.874,3.874,0,0,0,.763.213,4.193,4.193,0,0,0,.7.066,3.94,3.94,0,0,0,1.7-.345,3.4,3.4,0,0,0,1.214-.944,4.018,4.018,0,0,0,.722-1.4,5.985,5.985,0,0,0,.238-1.707,5.8,5.8,0,0,0-.246-1.707,4.312,4.312,0,0,0-.73-1.419,3.488,3.488,0,0,0-1.214-.976,3.827,3.827,0,0,0-1.715-.361,4.043,4.043,0,0,0-1.625.32,2.088,2.088,0,0,0-1.083,1.026h-.033v-4.381Zm6.564,7.4a5.581,5.581,0,0,1-.131,1.214,3.212,3.212,0,0,1-.427,1.05,2.243,2.243,0,0,1-.779.738,2.385,2.385,0,0,1-1.206.279A2.589,2.589,0,0,1,74.2-8.052a2.389,2.389,0,0,1-.829-.714,2.985,2.985,0,0,1-.468-1.026A4.889,4.889,0,0,1,72.758-11a4.919,4.919,0,0,1,.139-1.165,3.053,3.053,0,0,1,.451-1.026,2.4,2.4,0,0,1,.8-.73,2.4,2.4,0,0,1,1.2-.279,2.491,2.491,0,0,1,1.173.263,2.332,2.332,0,0,1,.82.706,3.122,3.122,0,0,1,.476,1.009A4.338,4.338,0,0,1,77.976-11.063Zm6.449,5.448a8.871,8.871,0,0,1-.484,1.05,2.871,2.871,0,0,1-.525.7,1.782,1.782,0,0,1-.64.394,2.462,2.462,0,0,1-.812.123,3.721,3.721,0,0,1-.492-.033A2.324,2.324,0,0,1,81-3.5v-1.28a2.342,2.342,0,0,0,.418.139,1.765,1.765,0,0,0,.4.057,1.2,1.2,0,0,0,.714-.205,1.255,1.255,0,0,0,.435-.583L83.539-6.8l-3.364-8.434h1.575L84.228-8.29h.033l2.379-6.941h1.477Z" transform="translate(17.85 28.4)"/></g></g></g><g transform="translate(0 0)"><g transform="translate(0 5.371)"><path d="M11.76,24.456A11.41,11.41,0,0,1,3.292,20.8,12.564,12.564,0,0,1,0,12.206,12.569,12.569,0,0,1,3.246,3.638,11.307,11.307,0,0,1,11.67,0a9.519,9.519,0,0,1,7.217,3V.759h8.264V23.7H18.887V21.148H18.8C17.478,23.219,14.846,24.456,11.76,24.456ZM13.849,7.064A5.023,5.023,0,0,0,8.537,12.25a4.95,4.95,0,0,0,5.312,5.141A4.95,4.95,0,0,0,19.16,12.25,5.023,5.023,0,0,0,13.849,7.064Z" transform="translate(27.277 11.038)" fill="#fff"/><path d="M0,33.931V.758H8.271v2.6H8.36A8.258,8.258,0,0,1,15.406,0,11.4,11.4,0,0,1,23.9,3.686a12.665,12.665,0,0,1,3.278,8.622,12.508,12.508,0,0,1-3.25,8.57,11.351,11.351,0,0,1-8.429,3.6,9.535,9.535,0,0,1-7.229-2.95V32.337L0,33.931ZM13.317,7.07A5.028,5.028,0,0,0,8,12.259a4.957,4.957,0,0,0,5.319,5.15,4.957,4.957,0,0,0,5.319-5.15A5.028,5.028,0,0,0,13.317,7.07Z" transform="translate(55.766 11.041)" fill="#fff"/><path d="M22.836,0l3.5,10.2.07.183a20.748,20.748,0,0,1,.988,3.43q.141-.731.364-1.532t.647-2.058L31.985,0h8.678L30.691,23.1H24.764L21.237,12.647q-.282-.891-.505-1.8t-.412-1.8A30.927,30.927,0,0,1,19.4,12.51l-.047.16L15.851,23.1H9.925L0,0H8.631l3.552,10.223q.4,1.121.635,1.955t.377,1.635a23.522,23.522,0,0,1,.917-3.179q.093-.274.141-.411L17.78,0h5.056" transform="translate(80.251 11.743)" fill="#fff"/><path d="M0,34.75V1.5L7.888,0V22.28l8.272-9.665H26.12L15.889,23.266,27.045,34.75H16.475L7.888,24.91v9.84H0" transform="translate(168.695 0)" fill="#fff"/><path d="M0,21.47l1.705-6.1a13.453,13.453,0,0,0,3.952,2.342A12.145,12.145,0,0,0,10,18.534a4.643,4.643,0,0,0,2.351-.482,1.539,1.539,0,0,0,.807-1.4q0-1.5-3.25-2.241-1.06-.246-1.705-.426A12.325,12.325,0,0,1,2.846,11.4,5.5,5.5,0,0,1,1.176,7.239,6.324,6.324,0,0,1,3.722,1.972,11,11,0,0,1,10.624,0a21.365,21.365,0,0,1,4.551.5,25.45,25.45,0,0,1,4.736,1.558l-1.706,5.49a14.24,14.24,0,0,0-3.319-1.636,10.6,10.6,0,0,0-3.364-.56A4.22,4.22,0,0,0,9.4,5.782a1.356,1.356,0,0,0-.714,1.233q0,1.211,3.227,2.04.737.2,1.106.291,4.264,1.188,5.935,2.79a5.728,5.728,0,0,1,1.671,4.337,6.782,6.782,0,0,1-2.743,5.614,11.478,11.478,0,0,1-7.259,2.14,22.565,22.565,0,0,1-5.693-.683A18.517,18.517,0,0,1,0,21.47" transform="translate(195.121 11.284)" fill="#fff"/><path d="M8.273,4.075h.091A8.13,8.13,0,0,1,15.909,0H17.5V7.834A6.8,6.8,0,0,0,14,7.074c-4.593,0-5.728,3-5.728,6.941v9.268H0V.313H8.273V4.075" transform="translate(150.08 11.469)" fill="#fff"/><path d="M17.392,29.929H13a.76.76,0,0,1-.485-.166.579.579,0,0,1-.227-.419l-.553-3.586a12.3,12.3,0,0,1-1.781-.721L7.163,27.123a.719.719,0,0,1-.495.176.687.687,0,0,1-.495-.214A25.873,25.873,0,0,1,2.91,23.81a.753.753,0,0,1,.019-.9c.2-.277.542-.713,1.009-1.3.483-.6.832-1.05,1.068-1.374a9.591,9.591,0,0,1-.811-1.929l-3.62-.526a.63.63,0,0,1-.416-.243A.729.729,0,0,1,0,17.089V12.762a.746.746,0,0,1,.159-.448.6.6,0,0,1,.376-.253l3.68-.546a9.5,9.5,0,0,1,.772-1.792C4.464,8.991,3.752,8.085,2.87,7.034a.732.732,0,0,1-.2-.468.82.82,0,0,1,.179-.449A19.622,19.622,0,0,1,4.8,4.023C5.751,3.1,6.38,2.631,6.668,2.631a.859.859,0,0,1,.515.194L9.913,4.91a11.536,11.536,0,0,1,1.8-.741A31.372,31.372,0,0,1,12.287.546.665.665,0,0,1,13,0h4.392a.755.755,0,0,1,.485.166.581.581,0,0,1,.229.419l.553,3.584a12.543,12.543,0,0,1,1.781.722L23.25,2.807a.641.641,0,0,1,.475-.176.775.775,0,0,1,.495.194,27.092,27.092,0,0,1,3.264,3.313.625.625,0,0,1,.139.429.745.745,0,0,1-.159.448c-.2.271-.525.695-1.008,1.3-.467.581-.827,1.043-1.069,1.373a11.784,11.784,0,0,1,.812,1.91l3.62.545a.625.625,0,0,1,.416.244.736.736,0,0,1,.157.458v4.325a.754.754,0,0,1-.157.449.606.606,0,0,1-.4.253l-3.66.545a12.628,12.628,0,0,1-.772,1.774c.465.654,1.177,1.559,2.117,2.688a.752.752,0,0,1,.2.488.648.648,0,0,1-.177.448,19.641,19.641,0,0,1-1.959,2.1c-.947.918-1.573,1.384-1.86,1.384a.978.978,0,0,1-.515-.176l-2.731-2.1a11.429,11.429,0,0,1-1.8.741,32.016,32.016,0,0,1-.573,3.624A.668.668,0,0,1,17.392,29.929ZM15.2,9.976a4.938,4.938,0,0,0-3.582,1.463,4.935,4.935,0,0,0,0,7.053,5.12,5.12,0,0,0,7.163,0,4.932,4.932,0,0,0,0-7.053A4.938,4.938,0,0,0,15.2,9.976Z" transform="translate(118.47 8.521)" fill="#fff"/><path d="M0,33.5,16.106,7.374H2.752V0H30.9L14.887,26.122H38.22L0,33.5" transform="translate(0 11.038)" fill="#fff"/></g><path d="M3.576-12.852v-4.3H6.628a2.867,2.867,0,0,1,1.945.55A2.034,2.034,0,0,1,9.188-15a2.06,2.06,0,0,1-.615,1.608,2.784,2.784,0,0,1-1.945.542ZM2.017-18.464V-6.748H3.576v-4.792H7.153a3.569,3.569,0,0,0,2.683-.9A3.478,3.478,0,0,0,10.747-15a3.45,3.45,0,0,0-.911-2.552,3.638,3.638,0,0,0-2.683-.911Zm11.421,7.483a4.221,4.221,0,0,1,.205-1.37,2.957,2.957,0,0,1,.566-1.009,2.411,2.411,0,0,1,.845-.624A2.515,2.515,0,0,1,16.08-14.2a2.515,2.515,0,0,1,1.026.213,2.411,2.411,0,0,1,.845.624,2.957,2.957,0,0,1,.566,1.009,4.221,4.221,0,0,1,.205,1.37,4.221,4.221,0,0,1-.205,1.37,2.867,2.867,0,0,1-.566,1,2.457,2.457,0,0,1-.845.615,2.515,2.515,0,0,1-1.026.213,2.515,2.515,0,0,1-1.026-.213,2.457,2.457,0,0,1-.845-.615,2.867,2.867,0,0,1-.566-1A4.221,4.221,0,0,1,13.438-10.981Zm-1.477,0a5.573,5.573,0,0,0,.263,1.739,3.97,3.97,0,0,0,.788,1.4,3.623,3.623,0,0,0,1.3.935,4.4,4.4,0,0,0,1.772.336A4.381,4.381,0,0,0,17.86-6.9a3.641,3.641,0,0,0,1.288-.935,3.97,3.97,0,0,0,.788-1.4,5.573,5.573,0,0,0,.263-1.739,5.65,5.65,0,0,0-.263-1.748,3.96,3.96,0,0,0-.788-1.411,3.729,3.729,0,0,0-1.288-.944,4.29,4.29,0,0,0-1.78-.345,4.3,4.3,0,0,0-1.772.345,3.71,3.71,0,0,0-1.3.944,3.96,3.96,0,0,0-.788,1.411A5.65,5.65,0,0,0,11.961-10.981Zm18.28,4.234,2.708-8.484H31.5L29.6-8.29h-.033L27.8-15.231H26.27L24.564-8.29h-.033l-1.92-6.941H21.068l2.724,8.484H25.3l1.707-6.744h.033l1.723,6.744ZM40.169-11.8H35.3a2.905,2.905,0,0,1,.213-.927A2.473,2.473,0,0,1,36-13.492a2.255,2.255,0,0,1,.747-.517,2.429,2.429,0,0,1,.976-.189,2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,40.169-11.8Zm1.346,2.363H40.136a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.105,5.105,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,41.515-9.439Zm1.526-5.793v8.484h1.395v-3.774a5.8,5.8,0,0,1,.164-1.452,2.784,2.784,0,0,1,.525-1.075,2.251,2.251,0,0,1,.952-.673,3.945,3.945,0,0,1,1.428-.23v-1.477a3.135,3.135,0,0,0-1.871.459,3.779,3.779,0,0,0-1.247,1.526h-.033v-1.789ZM54.15-11.8H49.276a2.905,2.905,0,0,1,.213-.927,2.473,2.473,0,0,1,.492-.763,2.255,2.255,0,0,1,.747-.517A2.429,2.429,0,0,1,51.7-14.2a2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,54.15-11.8ZM55.5-9.439H54.117a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.1,5.1,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,55.5-9.439Zm2.593-1.477a5.581,5.581,0,0,1,.131-1.214,3.212,3.212,0,0,1,.427-1.05,2.221,2.221,0,0,1,.788-.738,2.4,2.4,0,0,1,1.2-.279,2.589,2.589,0,0,1,1.231.271,2.389,2.389,0,0,1,.829.714,2.985,2.985,0,0,1,.468,1.026,4.889,4.889,0,0,1,.148,1.206,4.919,4.919,0,0,1-.139,1.165,3.053,3.053,0,0,1-.451,1.026,2.4,2.4,0,0,1-.8.73,2.4,2.4,0,0,1-1.2.279,2.491,2.491,0,0,1-1.173-.263,2.332,2.332,0,0,1-.82-.706,3.122,3.122,0,0,1-.476-1.009A4.338,4.338,0,0,1,58.088-10.916Zm6.564,4.168V-18.464H63.257V-14.1h-.033a2.247,2.247,0,0,0-.566-.632,3.216,3.216,0,0,0-.714-.41,3.583,3.583,0,0,0-.755-.222,4.132,4.132,0,0,0-.706-.066,3.861,3.861,0,0,0-1.7.353,3.487,3.487,0,0,0-1.214.952,4.018,4.018,0,0,0-.722,1.4,5.985,5.985,0,0,0-.238,1.707,5.8,5.8,0,0,0,.246,1.707,4.218,4.218,0,0,0,.73,1.411,3.529,3.529,0,0,0,1.214.968,3.827,3.827,0,0,0,1.715.361,4.135,4.135,0,0,0,1.625-.312A2.053,2.053,0,0,0,63.224-7.9h.033v1.149Zm6.761-11.716V-6.748h1.395V-7.88h.033a2.247,2.247,0,0,0,.566.632,2.982,2.982,0,0,0,.714.4,3.874,3.874,0,0,0,.763.213,4.193,4.193,0,0,0,.7.066,3.94,3.94,0,0,0,1.7-.345,3.4,3.4,0,0,0,1.214-.944,4.018,4.018,0,0,0,.722-1.4,5.985,5.985,0,0,0,.238-1.707,5.8,5.8,0,0,0-.246-1.707,4.312,4.312,0,0,0-.73-1.419,3.488,3.488,0,0,0-1.214-.976,3.827,3.827,0,0,0-1.715-.361,4.043,4.043,0,0,0-1.625.32,2.088,2.088,0,0,0-1.083,1.026h-.033v-4.381Zm6.564,7.4a5.581,5.581,0,0,1-.131,1.214,3.212,3.212,0,0,1-.427,1.05,2.243,2.243,0,0,1-.779.738,2.385,2.385,0,0,1-1.206.279A2.589,2.589,0,0,1,74.2-8.052a2.389,2.389,0,0,1-.829-.714,2.985,2.985,0,0,1-.468-1.026A4.889,4.889,0,0,1,72.758-11a4.919,4.919,0,0,1,.139-1.165,3.053,3.053,0,0,1,.451-1.026,2.4,2.4,0,0,1,.8-.73,2.4,2.4,0,0,1,1.2-.279,2.491,2.491,0,0,1,1.173.263,2.332,2.332,0,0,1,.82.706,3.122,3.122,0,0,1,.476,1.009A4.338,4.338,0,0,1,77.976-11.063Zm6.449,5.448a8.871,8.871,0,0,1-.484,1.05,2.871,2.871,0,0,1-.525.7,1.782,1.782,0,0,1-.64.394,2.462,2.462,0,0,1-.812.123,3.721,3.721,0,0,1-.492-.033A2.324,2.324,0,0,1,81-3.5v-1.28a2.342,2.342,0,0,0,.418.139,1.765,1.765,0,0,0,.4.057,1.2,1.2,0,0,0,.714-.205,1.255,1.255,0,0,0,.435-.583L83.539-6.8l-3.364-8.434h1.575L84.228-8.29h.033l2.379-6.941h1.477Z" transform="translate(0.722 18.464)" fill="#fff"/></g></g></g></svg>',e.style.position="absolute",e.style.bottom="20px",e.style.width="250px",e.style.left="50%",e.style.marginLeft="-125px",e.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),e.style.opacity="0",e.style.transition="opacity 0.5s",document.body.append(e),setTimeout(function(){e.style.opacity="1"},500),setTimeout(function(){e.style.opacity="0"},3e3),setTimeout(function(){e.remove()},4e3)}}}),n=Object.assign(Object.assign({},o.impl),{loaded:()=>t,camera_default_device_id:e=>e?eO.USER_DEFAULT_DEVICE_ID:eO.DEFAULT_DEVICE_ID,camera_source_create:(e,t)=>(function(e,t){var r,i,a;let s=eH++;return U.M.preferMediaStreamTrackProcessorCamera&&"MediaStreamTrackProcessor"in window&&"MediaStreamTrackGenerator"in window?(r=new eV(s,e,t),eG.set(s,r)):U.M.preferImageBitmapCamera&&"undefined"!=typeof OffscreenCanvas?(i=new eN(s,e,t),eG.set(s,i)):(a=new eO(s,e,t),eG.set(s,a)),ec("camera_source_t initialized"),s})(e,t),camera_source_destroy:e=>{var t;return null==(t=ej(e))?void 0:t.destroy()},camera_source_pause:e=>{var t;return null==(t=ej(e))?void 0:t.pause()},camera_source_start:e=>{var t;return null==(t=ej(e))?void 0:t.start()},camera_count:()=>2,camera_id:e=>0===e?eO.DEFAULT_DEVICE_ID:eO.USER_DEFAULT_DEVICE_ID,camera_name:e=>0===e?"Rear-facing Camera":"User-facing Camera",camera_user_facing:e=>0!==e,pipeline_create:()=>e$.create(o.impl,N),pipeline_frame_update:e=>{var t;return null==(t=e$.get(e))?void 0:t.frameUpdate(o)},pipeline_camera_frame_draw_gl:(e,t,r,i)=>{var a;null==(a=e$.get(e))||a.cameraFrameDrawGL(t,r,i)},draw_plane:(e,t,r,n,o)=>{let l,c,h;l=function(e){if(i)return i;let t=e.createProgram();if(!t)throw Error("Unable to create program");let r=(0,S.R)(e,e.VERTEX_SHADER,C),a=(0,S.R)(e,e.FRAGMENT_SHADER,F);e.attachShader(t,r),e.attachShader(t,a),(0,S.i)(e,t);let s=e.getUniformLocation(t,"projMatrix");if(!s)throw Error("Unable to get uniform location projMatrix");let n=e.getUniformLocation(t,"modelViewMatrix");if(!n)throw Error("Unable to get uniform location modelViewMatrix");let o=e.getUniformLocation(t,"cameraMatrix");if(!o)throw Error("Unable to get uniform location cameraMatrix");let l=e.getUniformLocation(t,"skinSampler");if(!l)throw Error("Unable to get uniform location skinSampler");return i={prog:t,unif_matrix:n,unif_proj:s,unif_camera:o,unif_skinSampler:l,attr_position:e.getAttribLocation(t,"position"),attr_textureCoord:e.getAttribLocation(t,"textureCoord")}}(e),c=function(e){if(a)return a;if(!(a=e.createBuffer()))throw Error("Unable to create buffer object");return e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-.5,.125,0,-.5,-.125,0,.5,.125,0,.5,-.125,0]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),a}(e),h=function(e){if(s)return s;if(!(s=e.createBuffer()))throw Error("Unable to create buffer object");return e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,0]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),s}(e),e.disable(e.DEPTH_TEST),e.useProgram(l.prog),e.uniformMatrix4fv(l.unif_proj,!1,t),e.uniformMatrix4fv(l.unif_camera,!1,r),e.uniformMatrix4fv(l.unif_matrix,!1,n),e.bindBuffer(e.ARRAY_BUFFER,c),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,function(e,t){if(I[t])return I[t];let r=e.createTexture();if(!r)throw Error("Unable to create texture");I[t]=r,e.bindTexture(e.TEXTURE_2D,r);let i=e.RGBA,a=e.RGBA,s=e.UNSIGNED_BYTE,n=new Uint8Array([0,0,255,255]);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,i,1,1,0,a,s,n);let o=new Image;return o.onload=function(){e.bindTexture(e.TEXTURE_2D,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,i,a,s,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)},o.src=t,r}(e,o)),e.uniform1i(l.unif_skinSampler,0),e.vertexAttribPointer(l.attr_position,3,e.FLOAT,!1,12,0),e.enableVertexAttribArray(l.attr_position),e.bindBuffer(e.ARRAY_BUFFER,h),e.vertexAttribPointer(l.attr_textureCoord,2,e.FLOAT,!1,8,0),e.enableVertexAttribArray(l.attr_textureCoord),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.disableVertexAttribArray(l.attr_position),e.disableVertexAttribArray(l.attr_textureCoord),e.bindBuffer(e.ARRAY_BUFFER,null)},pipeline_draw_face:(e,t,r,i,a)=>{var s;let n=em(a);if(!n)return ed("attempting to call draw_face on a destroyed zappar_face_mesh_t"),new Uint16Array;null==(s=e$.get(e))||s.drawFace(t,r,i,n)},pipeline_draw_face_project:(e,t,r,i,a,s,n)=>{var o;null==(o=e$.get(e))||o.drawFaceProject(t,r,i,a,s,n)},pipeline_draw_image_target_preview:(e,t,r,i,a,s)=>{var n;let o=td.get(a);if(!o)return void ed("image tracker not found");null==(n=e$.get(e))||n.drawImageTargetPreview(t,r,i,s,o)},projection_matrix_from_camera_model:O,projection_matrix_from_camera_model_ext:O,pipeline_process_gl:e=>{var t;return null==(t=e$.get(e))?void 0:t.processGL()},pipeline_gl_context_set:(e,t,r)=>{var i;return null==(i=e$.get(e))?void 0:i.glContextSet(t,r)},pipeline_gl_context_lost:e=>{var t;return null==(t=e$.get(e))?void 0:t.glContextLost()},pipeline_camera_frame_upload_gl:e=>{var t;return null==(t=e$.get(e))?void 0:t.uploadGL()},pipeline_camera_frame_texture_gl:e=>{var t;return null==(t=e$.get(e))?void 0:t.cameraFrameTexture()},pipeline_camera_frame_texture_matrix:(e,t,r,i)=>{var a;return(null==(a=e$.get(e))?void 0:a.cameraFrameTextureMatrix(t,r,i))||k.vt()},pipeline_camera_frame_user_facing:e=>{var t;return(null==(t=e$.get(e))?void 0:t.cameraFrameUserFacing())||!1},pipeline_camera_pose_default:()=>k.vt(),pipeline_camera_pose_with_attitude:(e,t)=>{var r;return(null==(r=e$.get(e))?void 0:r.cameraPoseWithAttitude(t))||k.vt()},pipeline_camera_pose_with_origin:(e,t)=>{let r=k.vt();return k.B8(r,t),r},pipeline_sequence_record_clear:e=>{var t;return null==(t=e$.get(e))?void 0:t.sequenceRecordClear()},pipeline_sequence_record_start:(e,t)=>{var r;return null==(r=e$.get(e))?void 0:r.sequenceRecordStart(t)},pipeline_sequence_record_stop:e=>{var t;return null==(t=e$.get(e))?void 0:t.sequenceRecordStop()},pipeline_sequence_record_device_attitude_matrices_set:(e,t)=>{var r;return null==(r=e$.get(e))?void 0:r.sequenceRecordDeviceAttitudeMatrices(t)},pipeline_sequence_record_data:e=>{var t;return(null==(t=e$.get(e))?void 0:t.sequenceRecordData())||new Uint8Array(0)},pipeline_sequence_record_data_size:e=>{var t;return(null==(t=e$.get(e))?void 0:t.sequenceRecordData().byteLength)||0},instant_world_tracker_anchor_pose_camera_relative:(e,t)=>{let r=eJ(void 0,o.impl.instant_world_tracker_anchor_pose_raw(e));if(t){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(r,e,r),k.lw(r,r,e)}return r},instant_world_tracker_anchor_pose:(e,t,r)=>{let i=eJ(void 0,o.impl.instant_world_tracker_anchor_pose_raw(e));if(r){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(i,e,i),k.lw(i,i,e)}return k.lw(i,t,i),i},instant_world_tracker_anchor_pose_set_from_camera_offset:(e,t,r,i,a)=>{let s=B(!1)*Math.PI/180,n=k.vt();k.$0(n,-s,[0,0,1]);let l=D();P(l,[t,r,i],n),o.impl.instant_world_tracker_anchor_pose_set_from_camera_offset_raw(e,l[0],l[1],l[2],a)},image_tracker_create:e=>td.create(e,o.impl),image_tracker_destroy:e=>{var t;return null==(t=td.get(e))?void 0:t.destroy()},image_tracker_target_type:(e,t)=>{let r=td.get(e);return r?r.getTargetInfo(t).type:(ed("attempting to call image_tracker_target_type on a destroyed zappar_image_tracker_t"),v.IMAGE_TRACKER_TYPE_PLANAR)},image_tracker_target_count:e=>{let t=td.get(e);return t?t.targetCount():(ed("attempting to call image_tracker_target_count on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_load_from_memory:(e,t)=>{let r=td.get(e);if(!r)return ed("attempting to call image_tracker_target_load_from_memory on a destroyed zappar_image_tracker_t"),0;r.loadFromMemory(t)},image_tracker_target_preview_compressed:(e,t)=>{var r;let i=td.get(e);return i?(null==(r=i.getTargetInfo(t).preview)?void 0:r.compressed)||new Uint8Array(0):(ed("attempting to call image_tracker_target_preview_compressed on a destroyed zappar_image_tracker_t"),new Uint8Array(0))},image_tracker_target_preview_compressed_mimetype:(e,t)=>{var r;let i=td.get(e);return i?(null==(r=i.getTargetInfo(t).preview)?void 0:r.mimeType)||"":(ed("attempting to call image_tracker_target_preview_compressed_mimetype on a destroyed zappar_image_tracker_t"),"")},image_tracker_target_preview_compressed_size:(e,t)=>{var r,i;let a=td.get(e);return a?(null==(i=null==(r=a.getTargetInfo(t).preview)?void 0:r.compressed)?void 0:i.byteLength)||0:(ed("attempting to call image_tracker_target_preview_compressed_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_physical_scale_factor:(e,t)=>{let r=td.get(e);return r?r.getTargetInfo(t).physicalScaleFactor:(ed("attempting to call image_tracker_target_physical_scale_factor on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_radius_top:(e,t)=>{let r=td.get(e);return r?r.getTargetInfo(t).topRadius:(ed("attempting to call image_tracker_target_radius_top on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_radius_bottom:(e,t)=>{let r=td.get(e);return r?r.getTargetInfo(t).bottomRadius:(ed("attempting to call image_tracker_target_radius_bottom on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_side_length:(e,t)=>{let r=td.get(e);return r?r.getTargetInfo(t).sideLength:(ed("attempting to call image_tracker_target_side_length on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_image:(e,t)=>{let r=td.get(e);return r?r.getDecodedPreview(t):(ed("attempting to call image_tracker_target_image on a destroyed zappar_image_tracker_t"),new Image)},image_tracker_anchor_pose_camera_relative:(e,t,r)=>{let i=eJ(void 0,o.impl.image_tracker_anchor_pose_raw(e,t));if(r){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(i,e,i),k.lw(i,i,e)}return i},image_tracker_anchor_pose:(e,t,r,i)=>{let a=eJ(void 0,o.impl.image_tracker_anchor_pose_raw(e,t));if(i){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(a,e,a),k.lw(a,a,e)}return k.lw(a,r,a),a},image_tracker_target_preview_mesh_indices:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).indices:(ed("attempting to call image_tracker_target_preview_mesh_indices on a destroyed zappar_image_tracker_t"),new Uint16Array)},image_tracker_target_preview_mesh_vertices:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).vertices:(ed("attempting to call image_tracker_target_preview_mesh_vertices on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_uvs:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).uvs:(ed("attempting to call image_tracker_target_preview_mesh_uvs on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_normals:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).normals:(ed("attempting to call image_tracker_target_preview_mesh_normals on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_indices_size:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).indices.length:(ed("attempting to call image_tracker_target_preview_mesh_indices_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_vertices_size:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).vertices.length:(ed("attempting to call image_tracker_target_preview_mesh_vertices_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_uvs_size:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).uvs.length:(ed("attempting to call image_tracker_target_preview_mesh_uvs_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_normals_size:(e,t)=>{let r=td.get(e);return r?r.getPreviewMesh(t).normals.length:(ed("attempting to call image_tracker_target_preview_mesh_normals_size on a destroyed zappar_image_tracker_t"),0)},face_tracker_anchor_pose_camera_relative:(e,t,r)=>{let i=eJ(void 0,o.impl.face_tracker_anchor_pose_raw(e,t));if(r){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(i,e,i),k.lw(i,i,e)}return i},face_tracker_anchor_pose:(e,t,r,i)=>{let a=eJ(void 0,o.impl.face_tracker_anchor_pose_raw(e,t));if(i){let e=k.vt();k.CV(e,[-1,1,1]),k.lw(a,e,a),k.lw(a,a,e)}return k.lw(a,r,a),a},face_tracker_model_load_default:e=>t_(this,void 0,void 0,function*(){yield function(e){return t_(this,void 0,void 0,function*(){let t=new r.U(r(6707)),i=yield fetch(t.toString()),a=yield i.arrayBuffer();null==n||n.face_tracker_model_load_from_memory(e,a)})}(e)}),face_mesh_create:()=>{let e;return e=eu++,e_.set(e,new ep),ec("face_mesh_t initialized"),e},face_mesh_destroy:e=>{e_.delete(e)},face_mesh_indices:e=>{let t=em(e);return t?t.getIndices():(ed("attempting to call face_mesh_indices on a destroyed zappar_face_mesh_t"),new Uint16Array)},face_mesh_indices_size:e=>{let t=em(e);return t?t.getIndices().length:(ed("attempting to call face_mesh_indices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_uvs:e=>{let t=em(e);return t?t.getUVs():(ed("attempting to call face_mesh_uvs on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_uvs_size:e=>{let t=em(e);return t?t.getUVs().length:(ed("attempting to call face_mesh_uvs_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_vertices:e=>{let t=em(e);return t?t.getVertices():(ed("attempting to call face_mesh_vertices on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_vertices_size:e=>{let t=em(e);return t?t.getVertices().length:(ed("attempting to call face_mesh_vertices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_normals:e=>{let t=em(e);return t?t.getNormals():(ed("attempting to call face_mesh_normals on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_normals_size:e=>{let t=em(e);return t?t.getNormals().length:(ed("attempting to call face_mesh_normals_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_load_from_memory:(e,t,r,i,a,s)=>{let n=em(e);if(!n)return void ed("attempting to call face_mesh_load_from_memory on a destroyed zappar_face_mesh_t");n.loadFromMemory(t,r,i,a,s)},face_mesh_update:(e,t,r,i)=>{let a=em(e);if(!a)return void ed("attempting to call face_mesh_update on a destroyed zappar_face_mesh_t");a.update(t,r,i)},face_mesh_load_default:e=>t_(this,void 0,void 0,function*(){let t=em(e);if(!t)return void ed("attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t");let i=new r.U(r(1065)),a=yield fetch(i.toString());t.loadFromMemory((yield a.arrayBuffer()),!1,!1,!1,!1)}),face_mesh_load_default_face:(e,t,i,a)=>t_(this,void 0,void 0,function*(){let s=em(e);if(!s)return void ed("attempting to call face_mesh_load_default_face on a destroyed zappar_face_mesh_t");let n=new r.U(r(1065)),o=yield fetch(n.toString());s.loadFromMemory((yield o.arrayBuffer()),t,i,a,!1)}),face_mesh_load_default_full_head_simplified:(e,t,i,a,s)=>t_(this,void 0,void 0,function*(){let n=em(e);if(!n)return void ed("attempting to call face_mesh_load_default_full_head_simplified on a destroyed zappar_face_mesh_t");let o=new r.U(r(2771)),l=yield fetch(o.toString());n.loadFromMemory((yield l.arrayBuffer()),t,i,a,s)}),face_mesh_loaded_version:e=>{let t=em(e);return t?t.getModelVersion():(ed("attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t"),-1)},face_landmark_create:e=>{let t;return t=e1++,e4.set(t,new e2(e)),ec("face_landmark_t initialized"),t},face_landmark_destroy:e=>{e4.delete(e)},face_landmark_update:(e,t,r,i)=>{let a=e4.get(e);if(!a)return void ed("attempting to call face_landmark_update on a destroyed zappar_face_landmark_t");a.update(t,r,i)},face_landmark_anchor_pose:e=>{let t=e4.get(e);return t?t.anchor_pose:(ed("attempting to call face_landmark_anchor_pose on a destroyed zappar_face_landmark_t"),k.vt())},html_element_source_create:(e,t)=>eD.createVideoElementSource(e,t),html_element_source_start:e=>{var t;return null==(t=eD.getVideoElementSource(e))?void 0:t.start()},html_element_source_pause:e=>{var t;return null==(t=eD.getVideoElementSource(e))?void 0:t.pause()},html_element_source_destroy:e=>{var t;return null==(t=eD.getVideoElementSource(e))?void 0:t.destroy()},sequence_source_create:e=>e6.create(e),sequence_source_load_from_memory:(e,t)=>{var r;return null==(r=e6.get(e))?void 0:r.loadFromMemory(t)},sequence_source_pause:e=>{var t;return null==(t=e6.get(e))?void 0:t.pause()},sequence_source_start:e=>{var t;return null==(t=e6.get(e))?void 0:t.start()},sequence_source_max_playback_fps_set:(e,t)=>{var r;return null==(r=e6.get(e))?void 0:r.maxPlaybackFpsSet(t)},sequence_source_time_set:(e,t)=>{var r;return null==(r=e6.get(e))?void 0:r.setTime(t)},sequence_source_destroy:e=>{var t;return null==(t=e6.get(e))?void 0:t.destroy()},permission_granted_all:er,permission_granted_camera:Q,permission_granted_motion:$,permission_denied_any:et,permission_denied_camera:J,permission_denied_motion:ee,permission_request_motion:es,permission_request_camera:ea,permission_request_all:ei,permission_request_ui:en,permission_request_ui_promise:en,permission_denied_ui:eo,browser_incompatible:e3.incompatible,browser_incompatible_ui:e3.incompatible_ui,log_level_set:e=>{el=e,o.impl.log_level_set(e)},cookies_permitted:e=>{var t;e?c||(t=l,window.localStorage.setItem("z_uar_lid",t),c=!0):window.localStorage.removeItem("z_uar_lid")}})}(l));return o}function tp(e){return tm().camera_default_device_id(e||!1)}function tf(){var e,t,r,i;return e=this,t=void 0,r=void 0,i=function*(){for(;;){if(tm().loaded())return;yield new Promise(e=>setTimeout(e,50))}},new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})}class tg{constructor(e){this._pipeline=e,this.anchor={poseCameraRelative:e=>this._anchorPoseCameraRelative(e),pose:(e,t)=>this._anchorPose(e,t)},this._z=tm(),this._impl=this._z.instant_world_tracker_create(this._pipeline._getImpl())}destroy(){this._z.instant_world_tracker_destroy(this._impl)}_anchorPoseCameraRelative(e){return this._z.instant_world_tracker_anchor_pose_camera_relative(this._impl,!0===e)}_anchorPose(e,t){return this._z.instant_world_tracker_anchor_pose(this._impl,e,!0===t)}get enabled(){return this._z.instant_world_tracker_enabled(this._impl)}set enabled(e){this._z.instant_world_tracker_enabled_set(this._impl,e)}setAnchorPoseFromCameraOffset(e,t,r,i){this._z.instant_world_tracker_anchor_pose_set_from_camera_offset(this._impl,e,t,r,i||p.MINUS_Z_AWAY_FROM_USER)}}var tv=function(e,t,r,i){return new(r||(r=Promise))(function(a,s){function n(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(n,o)}l((i=i.apply(e,t||[])).next())})};class tb{constructor(){this._z=tm(),this._impl=this._z.face_mesh_create()}destroy(){this._z.face_mesh_destroy(this._impl)}load(e,t,r,i,a){return tv(this,void 0,void 0,function*(){if(!e)return void this.loadDefault();"string"==typeof e&&(e=yield(yield fetch(e)).arrayBuffer()),this._z.face_mesh_load_from_memory(this._impl,e,t||!1,r||!1,i||!1,a||!1)})}loadDefault(){return tv(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default(this._impl)})}loadDefaultFace(e,t,r){return tv(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default_face(this._impl,e||!1,t||!1,r||!1)})}loadDefaultFullHeadSimplified(e,t,r,i){return tv(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default_full_head_simplified(this._impl,e||!1,t||!1,r||!1,i||!1)})}updateFromFaceAnchor(e,t){this._z.face_mesh_update(this._impl,e.identity,e.expression,t||!1)}updateFromIdentityExpression(e,t,r){this._z.face_mesh_update(this._impl,e,t,r||!1)}get vertices(){return this._z.face_mesh_vertices(this._impl)}get indices(){return this._z.face_mesh_indices(this._impl)}get uvs(){return this._z.face_mesh_uvs(this._impl)}get normals(){return this._z.face_mesh_normals(this._impl)}_getImpl(){return this._impl}}class ty{constructor(e,t){this._z=tm(),this._impl=this._z.camera_source_create(e._getImpl(),t)}destroy(){this._z.camera_source_destroy(this._impl)}start(){this._z.camera_source_start(this._impl)}pause(){this._z.camera_source_pause(this._impl)}}class tA{constructor(e,t){this._z=tm(),this._impl=this._z.html_element_source_create(e._getImpl(),t)}destroy(){this._z.html_element_source_destroy(this._impl)}start(){this._z.html_element_source_start(this._impl)}pause(){this._z.html_element_source_pause(this._impl)}}class tT{constructor(){this.onFrameUpdate=new d,this._onFrameUpdateInternal=new d,this._lastFrameNumber=-1,this._z=tm(),this._impl=this._z.pipeline_create()}destroy(){this._z.pipeline_destroy(this._impl)}frameUpdate(){this._z.pipeline_frame_update(this._impl);let e=this._z.pipeline_frame_number(this._impl);e!==this._lastFrameNumber&&(this._lastFrameNumber=e,this._onFrameUpdateInternal.emit(),this.onFrameUpdate.emit())}_getImpl(){return this._impl}glContextSet(e){this._z.pipeline_gl_context_set(this._impl,e)}glContextLost(){this._z.pipeline_gl_context_lost(this._impl)}cameraFrameTextureGL(){return this._z.pipeline_camera_frame_texture_gl(this._impl)}cameraFrameTextureMatrix(e,t,r){return this._z.pipeline_camera_frame_texture_matrix(this._impl,e,t,!0===r)}cameraFrameDrawGL(e,t,r){this._z.pipeline_camera_frame_draw_gl(this._impl,e,t,r)}cameraFrameUploadGL(){this._z.pipeline_camera_frame_upload_gl(this._impl)}processGL(){this._z.pipeline_process_gl(this._impl)}cameraModel(){return this._z.pipeline_camera_model(this._impl)}cameraPoseDefault(){return this._z.pipeline_camera_pose_default(this._impl)}cameraPoseWithAttitude(e){return this._z.pipeline_camera_pose_with_attitude(this._impl,e||!1)}cameraPoseWithOrigin(e){return this._z.pipeline_camera_pose_with_origin(this._impl,e)}cameraFrameUserFacing(){return this._z.pipeline_camera_frame_user_facing(this._impl)}drawFace(e,t,r,i){this._z.pipeline_draw_face(this._impl,e,t,r,i._getImpl())}frameNumber(){return this._z.pipeline_frame_number(this._impl)}sequenceRecordStart(e){void 0===e&&(e=150),this._z.pipeline_sequence_record_start(this._impl,e)}sequenceRecordStop(){this._z.pipeline_sequence_record_stop(this._impl)}sequenceRecordClear(){this._z.pipeline_sequence_record_clear(this._impl)}sequenceRecordData(){return this._z.pipeline_sequence_record_data(this._impl)}}!function(e){e[e.CAMERA=0]="CAMERA",e[e.MOTION=1]="MOTION"}(A||(A={}));let tE=r(7431),tw=new d;function tx(){return c||(c=new tT).onFrameUpdate.bind(()=>tw.emit()),c}class tR extends tg{constructor(e){super(e||tx())}}class tM extends ty{constructor(e,t){super(t||tx(),e)}}function tS(e){tx().glContextSet(e)}let tI=`
      precision highp float;
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
      }
    `,tC=`
      precision highp float;
      uniform sampler2D u_texture;
      varying vec2 vUv;
      void main() {
        vec4 texColor = texture2D(u_texture, vUv);
        texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
        gl_FragColor = texColor;
      }
    `;class tF extends tE.Texture{constructor(){super(),this.MirrorMode=E.None,this.onTextureUpdated=new u,this.viewMatrix=new tE.Matrix4,this.textureMatrix3=new tE.Matrix3}update(){}updateFromPipeline(e,t){t.cameraFrameUploadGL();let r=t.cameraFrameTextureGL();if(!r)return;let i=e.properties.get(this);i.__webglTexture=r,i.__webglInit=!0,this.viewMatrix.fromArray(t.cameraFrameTextureMatrix(e.domElement.width,e.domElement.height,this.MirrorMode===E.Poses)),this.textureMatrix3.setFromMatrix4(this.viewMatrix),this.textureMatrix3.elements[6]=this.viewMatrix.elements[12],this.textureMatrix3.elements[7]=this.viewMatrix.elements[13],this.textureMatrix3.elements[8]=1,this.matrixAutoUpdate=!1,this.matrix=this.textureMatrix3,this.onTextureUpdated.emit({texture:this,renderer:e})}dispose(){super.dispose()}}class tk{constructor(e){this.shaderScene=new tE.Scene,this.shaderRenderTarget=new tE.WebGLRenderTarget(1024,1024),this.shaderCamera=new tE.OrthographicCamera(-1,1,1,-1,0,1),this.intermediateRenderTarget=new tE.WebGLRenderTarget(1024,1024),ec("Inline decoder initialized"),this.shaderMaterial=new tE.ShaderMaterial({uniforms:{u_texture:{value:null}},vertexShader:tI,fragmentShader:tC});let t=new tE.PlaneGeometry(2,2),r=new tE.Mesh(t,this.shaderMaterial);this.shaderScene.add(r),this.shaderRenderTarget.texture.generateMipmaps=!1,this.shaderRenderTarget.texture.minFilter=tE.LinearFilter,this.shaderRenderTarget.texture.magFilter=tE.LinearFilter,r.position.z=-1,this.shaderMaterial.uniforms.u_texture.value=e,e.onTextureUpdated.bind(({texture:e,renderer:t})=>{this.update(t,e)})}get texture(){return this.shaderRenderTarget.texture}update(e,t){let r=!0;if(tE.SRGBColorSpace&&e.outputColorSpace?r=e.outputColorSpace===tE.SRGBColorSpace:tE.sRGBEncoding&&e.outputEncoding&&(r=e.outputEncoding===tE.sRGBEncoding),!r)return;let i=e.getRenderTarget();this.shaderMaterial.uniforms.u_texture.value=t,e.setRenderTarget(this.intermediateRenderTarget),e.render(this.shaderScene,this.shaderCamera),this.shaderRenderTarget.texture=this.intermediateRenderTarget.texture,e.setRenderTarget(i),this.texture.matrixAutoUpdate=!1,this.texture.matrix=t.matrix;let a=e.properties.get(t);a.__webglTexture=e.properties.get(this.texture).__webglTexture,a.__webglInit=!0}dispose(){this.shaderRenderTarget.dispose()}}!function(e){e[e.Default=0]="Default",e[e.Attitude=1]="Attitude",e[e.AnchorOrigin=2]="AnchorOrigin"}(T||(T={})),function(e){e[e.None=0]="None",e[e.Poses=1]="Poses",e[e.CSS=2]="CSS"}(E||(E={})),function(e){e[e.None=0]="None",e[e.User=1]="User",e[e.Rear=2]="Rear"}(w||(w={}));class tL extends tE.Camera{constructor(e){super(),this.poseMode=T.Default,this.rearCameraMirrorMode=E.None,this.userCameraMirrorMode=E.Poses,this._currentMirrorMode=E.None,this.isPerspectiveCamera=!0,this.cameraDirection=w.None,this.hasSetCSSScaleX=!1,this.renderWidth=0,this.renderHeight=0,this.pipeline=e instanceof tT?e:(null==e?void 0:e.pipeline)||tx(),this.rawPose=this.pipeline.cameraPoseDefault(),!e||e instanceof tT?(this.rearCameraSource=new tM(tp(),this.pipeline),this.userCameraSource=new tM(tp(!0),this.pipeline),this.backgroundTexture=new tF):(this.zNear=e.zNear?e.zNear:.01,this.zFar=e.zFar?e.zFar:100,this.rearCameraSource=this.cameraSourceFromOpts(e.rearCameraSource),this.userCameraSource=this.cameraSourceFromOpts(e.userCameraSource,!0),this.backgroundTexture=e.backgroundTexture?e.backgroundTexture:new tF),this.matrixAutoUpdate=!1,document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?this.resume():this.pause()})}set far(e){this.zFar=e}get far(){var e;return null!=(e=this.zFar)?e:100}set near(e){this.zNear=e}get near(){var e;return null!=(e=this.zNear)?e:.01}cameraSourceFromOpts(e,t=!1){return e instanceof Element?new tA(this.pipeline,e):new tM(e||tp(t),this.pipeline)}pause(){this.userCameraSource.pause(),this.rearCameraSource.pause()}resume(){switch(this.cameraDirection){case w.User:this.userCameraSource.start();break;case w.Rear:this.rearCameraSource.start()}}start(e){this.cameraDirection=e?w.User:w.Rear,this.resume()}stop(){this.cameraDirection=w.None,this.pause()}setPoseModeAnchorOrigin(e){this.poseAnchorOrigin=e,this.poseMode=T.AnchorOrigin}get currentMirrorMode(){return this._currentMirrorMode}handleColorSpace(e){let t=!1;(null==e?void 0:e.outputColorSpace)&&(null==tE?void 0:tE.SRGBColorSpace)?t=(null==e?void 0:e.outputColorSpace)===(null==tE?void 0:tE.SRGBColorSpace):(null==tE?void 0:tE.sRGBEncoding)&&(null==e?void 0:e.outputEncoding)&&(t=(null==e?void 0:e.outputEncoding)===(null==tE?void 0:tE.sRGBEncoding)),t?this.inlineDecoder||(this.inlineDecoder=new tk(this.backgroundTexture)):152>=parseInt(tE.REVISION,10)?this.backgroundTexture.encoding=e.outputEncoding:this.backgroundTexture.colorSpace=e.outputColorSpace}updateFrame(e){this.pipeline.processGL(),this.pipeline.frameUpdate(),this._currentMirrorMode=this.pipeline.cameraFrameUserFacing()?this.userCameraMirrorMode:this.rearCameraMirrorMode;let{domElement:t}=e;switch(this.currentMirrorMode!==E.CSS&&this.hasSetCSSScaleX?(t.style.transform="",this.hasSetCSSScaleX=!1):this.currentMirrorMode===E.CSS&&!this.hasSetCSSScaleX&&(t.style.transform="scaleX(-1)",this.hasSetCSSScaleX=!0),this.renderWidth=e.domElement.width,this.renderHeight=e.domElement.height,this._updateProjectionMatrix(),this.poseMode){case T.Default:this.rawPose=this.pipeline.cameraPoseDefault();break;case T.Attitude:this.rawPose=this.pipeline.cameraPoseWithAttitude(this.currentMirrorMode===E.Poses);break;case T.AnchorOrigin:this.rawPose=this.poseAnchorOrigin?this.getOriginPose():this.pipeline.cameraPoseDefault();break;default:this.rawPose=this.pipeline.cameraPoseDefault()}this.matrixWorldNeedsUpdate=!0,this.backgroundTexture.MirrorMode=this.currentMirrorMode,this.backgroundTexture.updateFromPipeline(e,this.pipeline),this.handleColorSpace(e)}_updateProjectionMatrix(){let e=function(e,t,r,i=.1,a=100){return tm().projection_matrix_from_camera_model_ext(e,t,r,i,a)}(this.pipeline.cameraModel(),this.renderWidth,this.renderHeight,this.zNear,this.zFar);this.projectionMatrix.fromArray(e),"function"==typeof this.projectionMatrixInverse.invert?this.projectionMatrixInverse.copy(this.projectionMatrix).invert():this.projectionMatrixInverse.getInverse(this.projectionMatrix)}updateMatrixWorld(e){this.matrix.fromArray(this.rawPose),this.matrix.decompose(this.position,this.quaternion,this.scale),super.updateMatrixWorld(e)}getOriginPose(){return this.poseAnchorOrigin?this.pipeline.cameraPoseWithOrigin(this.poseAnchorOrigin.poseCameraRelative(this.currentMirrorMode===E.Poses)):this.pipeline.cameraPoseDefault()}dispose(){this.rearCameraSource.destroy(),this.userCameraSource.destroy()}}tE.Group,tE.Loader,tE.Group,tE.Group,tE.Group,tE.Loader;class tD extends tE.Loader{load(e,t,r,i){let a=new tb,s=`__zappar_threejs_face_mesh_${JSON.stringify(e||"default")}`;return this.manager.itemStart(s),(e?"string"==typeof e?a.load(e):e.customModel?a.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):a.loadDefaultFace(e.fillMouth,e.fillEyeLeft,e.fillEyeRight):a.loadDefaultFace()).then(()=>{null==t||t(a),this.manager.itemEnd(s)}).catch(e=>{null==i||i(e),this.manager.itemError(s),this.manager.itemEnd(s)}),a}loadFace(e,t,r,i){let a=new tb,s=`__zappar_threejs_face_mesh_face_${JSON.stringify(e||"default")}`;return(e?e.customModel?a.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):a.loadDefaultFace(e.fillMouth,e.fillEyeLeft,e.fillEyeRight):a.loadDefaultFace()).then(()=>{null==t||t(a),this.manager.itemEnd(s)}).catch(e=>{null==i||i(e),this.manager.itemError(s),this.manager.itemEnd(s)}),a}loadFullHeadSimplified(e,t,r,i){let a=new tb,s=`__zappar_threejs_face_mesh_full_head_${JSON.stringify(e||"default")}`;return(e?e.customModel?a.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):a.loadDefaultFullHeadSimplified(e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):a.loadDefaultFullHeadSimplified()).then(()=>{null==t||t(a),this.manager.itemEnd(s)}).catch(e=>{null==i||i(e),this.manager.itemError(s),this.manager.itemEnd(s)}),a}parse(){}}class tP extends tE.BufferGeometry{constructor(e){super(),this.hasSetIndices=!1,this.hasSetUVs=!1,this.recalculateNormals=!0,this.setIndex([]),this.setAttribute("position",new tE.Float32BufferAttribute([],3)),this.setAttribute("normal",new tE.Float32BufferAttribute([],3)),this.setAttribute("uv",new tE.Float32BufferAttribute([],2)),e||(h||(h=new tD().load()),e=h),this._faceMesh=e}_updateIndices(){this.hasSetIndices||0!==this._faceMesh.indices.length&&(this.setIndex(new tE.Uint16BufferAttribute(this._faceMesh.indices,1)),this.hasSetIndices=!0)}_updateUVs(){this.hasSetUVs||0!==this._faceMesh.uvs.length&&(this.setAttribute("uv",new tE.BufferAttribute(this._faceMesh.uvs,2)),this.hasSetUVs=!0)}get calculateNormals(){return this.recalculateNormals}set calculateNormals(e){this.recalculateNormals=e,this.recalculateNormals||("function"==typeof this.removeAttribute&&this.removeAttribute("normal"),delete this.normals)}updateFromFaceAnchorGroup(e){0!==this._faceMesh.vertices.length&&e.currentAnchor&&this.updateFromFaceAnchor(e.currentAnchor)}updateFromFaceAnchor(e){this.updateFromIdentityExpression(e.identity,e.expression)}updateFromIdentityExpression(e,t){0!==this._faceMesh.vertices.length&&(this._updateIndices(),this._updateUVs(),this._faceMesh.updateFromIdentityExpression(e,t),this.vertices||(this.vertices=new Float32Array(this._faceMesh.vertices.length),this.verticesAttribute=new tE.BufferAttribute(this.vertices,3),this.setAttribute("position",this.verticesAttribute)),this.vertices.set(this._faceMesh.vertices),this.verticesAttribute&&(this.verticesAttribute.needsUpdate=!0),this.computeBoundingSphere(),this.calculateNormals&&(this.normals||(this.normals=new Float32Array(this._faceMesh.normals.length),this.normalsAttribute=new tE.BufferAttribute(this.normals,3),this.setAttribute("normal",this.normalsAttribute)),this.normals.set(this._faceMesh.normals),this.normalsAttribute&&(this.normalsAttribute.needsUpdate=!0)))}}tE.Mesh;tE.Loader;tE.Loader;tE.LoadingManager;class tU extends tE.BufferGeometry{constructor(e){if(super(),this.imageTarget=e,this.hasSetIndices=!1,this.hasSetUVs=!1,this.recalculateNormals=!0,0===this.imageTarget.preview.vertices.length)throw Error("No vertices found in the image target.");let t=this.imageTarget.preview.vertices.length/3;this.vertices=new Float32Array(3*t),this.vertices.set(this.imageTarget.preview.vertices),this.setAttribute("position",new tE.BufferAttribute(this.vertices,3)),this.setAttribute("normal",new tE.Float32BufferAttribute(3*t,3)),this._updateUVs(),this._updateIndices(),this.computeBoundingSphere(),this.computeVertexNormals(),this.attributes.position.needsUpdate=!0,this.attributes.normal.needsUpdate=!0,this.attributes.uv&&(this.attributes.uv.needsUpdate=!0)}_updateIndices(){var e;!this.hasSetIndices&&(null==(e=this.imageTarget)?void 0:e.preview.indices.length)>0&&(this.setIndex(new tE.Uint16BufferAttribute(this.imageTarget.preview.indices,1)),this.hasSetIndices=!0)}_updateUVs(){!this.hasSetUVs&&this.imageTarget.preview.uvs.length>0&&(this.setAttribute("uv",new tE.BufferAttribute(new Float32Array(this.imageTarget.preview.uvs),2)),this.hasSetUVs=!0)}get calculateNormals(){return this.recalculateNormals}}tE.Mesh,console.log("Zappar for ThreeJS v2.5.2")},5169:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5198:(e,t,r)=>{r.d(t,{B:()=>c});var i=r(3264);function a(e,t){if(t===i.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==i.rYR&&t!==i.O49)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let r=e.getIndex();if(null===r){let t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}let a=r.count-2,s=[];if(r)if(t===i.rYR)for(let e=1;e<=a;e++)s.push(r.getX(0)),s.push(r.getX(e)),s.push(r.getX(e+1));else for(let e=0;e<a;e++)e%2==0?(s.push(r.getX(e)),s.push(r.getX(e+1)),s.push(r.getX(e+2))):(s.push(r.getX(e+2)),s.push(r.getX(e+1)),s.push(r.getX(e)));s.length/3!==a&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let n=e.clone();return n.setIndex(s),n.clearGroups(),n}}let s=parseInt(i.sPf.replace(/\D+/g,""));function n(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(e){return t}}let o="srgb",l="srgb-linear";class c extends i.aHM{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new p(e)}),this.register(function(e){return new f(e)}),this.register(function(e){return new x(e)}),this.register(function(e){return new R(e)}),this.register(function(e){return new M(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new T(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new w(e)}),this.register(function(e){return new E(e)}),this.register(function(e){return new u(e)}),this.register(function(e){return new S(e)}),this.register(function(e){return new I(e)})}load(e,t,r,a){let s,n=this;if(""!==this.resourcePath)s=this.resourcePath;else if(""!==this.path){let t=i.r6x.extractUrlBase(e);s=i.r6x.resolveURL(t,this.path)}else s=i.r6x.extractUrlBase(e);this.manager.itemStart(e);let o=function(t){a?a(t):console.error(t),n.manager.itemError(e),n.manager.itemEnd(e)},l=new i.Y9S(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(r){try{n.parse(r,s,function(r){t(r),n.manager.itemEnd(e)},o)}catch(e){o(e)}},r,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let a,s={},o={};if("string"==typeof e)a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(n(new Uint8Array(e.slice(0,4)))===C){try{s[d.KHR_BINARY_GLTF]=new k(e)}catch(e){i&&i(e);return}a=JSON.parse(s[d.KHR_BINARY_GLTF].content)}else a=JSON.parse(n(new Uint8Array(e)));else a=e;if(void 0===a.asset||a.asset.version[0]<2){i&&i(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new J(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](l);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,s[t.name]=!0}if(a.extensionsUsed)for(let e=0;e<a.extensionsUsed.length;++e){let t=a.extensionsUsed[e],r=a.extensionsRequired||[];switch(t){case d.KHR_MATERIALS_UNLIT:s[t]=new _;break;case d.KHR_DRACO_MESH_COMPRESSION:s[t]=new L(a,this.dracoLoader);break;case d.KHR_TEXTURE_TRANSFORM:s[t]=new D;break;case d.KHR_MESH_QUANTIZATION:s[t]=new P;break;default:r.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(r,i)}parseAsync(e,t){let r=this;return new Promise(function(i,a){r.parse(e,t,i,a)})}}function h(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let d={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class u{constructor(e){this.parser=e,this.name=d.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){let i=t[r];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){let t,r=this.parser,a="light:"+e,s=r.cache.get(a);if(s)return s;let n=r.json,o=((n.extensions&&n.extensions[this.name]||{}).lights||[])[e],c=new i.Q1f(0xffffff);void 0!==o.color&&c.setRGB(o.color[0],o.color[1],o.color[2],l);let h=void 0!==o.range?o.range:0;switch(o.type){case"directional":(t=new i.ZyN(c)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new i.HiM(c)).distance=h;break;case"spot":(t=new i.nCl(c)).distance=h,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,t.angle=o.spot.outerConeAngle,t.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return t.position.set(0,0,0),t.decay=2,K(t,o),void 0!==o.intensity&&(t.intensity=o.intensity),t.name=r.createUniqueName(o.name||"light_"+e),s=Promise.resolve(t),r.cache.add(a,s),s}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,r=this.parser,i=r.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(e){return r._getNodeRef(t.cache,a,e)})}}class _{constructor(){this.name=d.KHR_MATERIALS_UNLIT}getMaterialType(){return i.V9B}extendParams(e,t,r){let a=[];e.color=new i.Q1f(1,1,1),e.opacity=1;let s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){let t=s.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],l),e.opacity=t[3]}void 0!==s.baseColorTexture&&a.push(r.assignTexture(e,"map",s.baseColorTexture,o))}return Promise.all(a)}}class m{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=r.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();let s=[],n=a.extensions[this.name];if(void 0!==n.clearcoatFactor&&(t.clearcoat=n.clearcoatFactor),void 0!==n.clearcoatTexture&&s.push(r.assignTexture(t,"clearcoatMap",n.clearcoatTexture)),void 0!==n.clearcoatRoughnessFactor&&(t.clearcoatRoughness=n.clearcoatRoughnessFactor),void 0!==n.clearcoatRoughnessTexture&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",n.clearcoatRoughnessTexture)),void 0!==n.clearcoatNormalTexture&&(s.push(r.assignTexture(t,"clearcoatNormalMap",n.clearcoatNormalTexture)),void 0!==n.clearcoatNormalTexture.scale)){let e=n.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.I9Y(e,e)}return Promise.all(s)}}class f{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=r.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class g{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&a.push(r.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&a.push(r.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class v{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();let s=[];t.sheenColor=new i.Q1f(0,0,0),t.sheenRoughness=0,t.sheen=1;let n=a.extensions[this.name];if(void 0!==n.sheenColorFactor){let e=n.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],l)}return void 0!==n.sheenRoughnessFactor&&(t.sheenRoughness=n.sheenRoughnessFactor),void 0!==n.sheenColorTexture&&s.push(r.assignTexture(t,"sheenColorMap",n.sheenColorTexture,o)),void 0!==n.sheenRoughnessTexture&&s.push(r.assignTexture(t,"sheenRoughnessMap",n.sheenRoughnessTexture)),Promise.all(s)}}class b{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&a.push(r.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class y{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();let s=[],n=a.extensions[this.name];t.thickness=void 0!==n.thicknessFactor?n.thicknessFactor:0,void 0!==n.thicknessTexture&&s.push(r.assignTexture(t,"thicknessMap",n.thicknessTexture)),t.attenuationDistance=n.attenuationDistance||1/0;let o=n.attenuationColor||[1,1,1];return t.attenuationColor=new i.Q1f().setRGB(o[0],o[1],o[2],l),Promise.all(s)}}class A{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=r.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class T{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();let s=[],n=a.extensions[this.name];t.specularIntensity=void 0!==n.specularFactor?n.specularFactor:1,void 0!==n.specularTexture&&s.push(r.assignTexture(t,"specularIntensityMap",n.specularTexture));let c=n.specularColorFactor||[1,1,1];return t.specularColor=new i.Q1f().setRGB(c[0],c[1],c[2],l),void 0!==n.specularColorTexture&&s.push(r.assignTexture(t,"specularColorMap",n.specularColorTexture,o)),Promise.all(s)}}class E{constructor(e){this.parser=e,this.name=d.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];return t.bumpScale=void 0!==s.bumpFactor?s.bumpFactor:1,void 0!==s.bumpTexture&&a.push(r.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(a)}}class w{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&a.push(r.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(a)}}class x{constructor(e){this.parser=e,this.name=d.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;let a=i.extensions[this.name],s=t.options.ktx2Loader;if(!s)if(!(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0))return null;else throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return t.loadTextureImage(e,a.source,s)}}class R{constructor(e){this.parser=e,this.name=d.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,i=r.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;let s=a.extensions[t],n=i.images[s.source],o=r.textureLoader;if(n.uri){let e=r.options.manager.getHandler(n.uri);null!==e&&(o=e)}return this.detectSupport().then(function(a){if(a)return r.loadTextureImage(e,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class M{constructor(e){this.parser=e,this.name=d.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,i=r.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;let s=a.extensions[t],n=i.images[s.source],o=r.textureLoader;if(n.uri){let e=r.options.manager.getHandler(n.uri);null!==e&&(o=e)}return this.detectSupport().then(function(a){if(a)return r.loadTextureImage(e,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class S{constructor(e){this.name=d.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,r=t.bufferViews[e];if(!r.extensions||!r.extensions[this.name])return null;{let e=r.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported)if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;else throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return i.then(function(t){let r=e.byteOffset||0,i=e.byteLength||0,s=e.count,n=e.byteStride,o=new Uint8Array(t,r,i);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(s,n,o,e.mode,e.filter).then(function(e){return e.buffer}):a.ready.then(function(){let t=new ArrayBuffer(s*n);return a.decodeGltfBuffer(new Uint8Array(t),s,n,o,e.mode,e.filter),t})})}}}class I{constructor(e){this.name=d.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;for(let e of t.meshes[r.mesh].primitives)if(e.mode!==N.TRIANGLES&&e.mode!==N.TRIANGLE_STRIP&&e.mode!==N.TRIANGLE_FAN&&void 0!==e.mode)return null;let a=r.extensions[this.name].attributes,s=[],n={};for(let e in a)s.push(this.parser.getDependency("accessor",a[e]).then(t=>(n[e]=t,n[e])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(e=>{let t=e.pop(),r=t.isGroup?t.children:[t],a=e[0].count,s=[];for(let e of r){let t=new i.kn4,r=new i.Pq0,o=new i.PTz,l=new i.Pq0(1,1,1),c=new i.ZLX(e.geometry,e.material,a);for(let e=0;e<a;e++)n.TRANSLATION&&r.fromBufferAttribute(n.TRANSLATION,e),n.ROTATION&&o.fromBufferAttribute(n.ROTATION,e),n.SCALE&&l.fromBufferAttribute(n.SCALE,e),c.setMatrixAt(e,t.compose(r,o,l));for(let t in n)if("_COLOR_0"===t){let e=n[t];c.instanceColor=new i.uWO(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,n[t]);i.B69.prototype.copy.call(c,e),this.parser.assignFinalMaterial(c),s.push(c)}return t.isGroup?(t.clear(),t.add(...s),t):s[0]}))}}let C="glTF",F={JSON:0x4e4f534a,BIN:5130562};class k{constructor(e){this.name=d.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:n(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==C)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-12,i=new DataView(e,12),a=0;for(;a<r;){let t=i.getUint32(a,!0);a+=4;let r=i.getUint32(a,!0);if(a+=4,r===F.JSON){let r=new Uint8Array(e,12+a,t);this.content=n(r)}else if(r===F.BIN){let r=12+a;this.body=e.slice(r,r+t)}a+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class L{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=d.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let r=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,n={},o={},c={};for(let e in s)n[j[e]||e.toLowerCase()]=s[e];for(let t in e.attributes){let i=j[t]||t.toLowerCase();if(void 0!==s[t]){let a=r.accessors[e.attributes[t]],s=z[a.componentType];c[i]=s.name,o[i]=!0===a.normalized}}return t.getDependency("bufferView",a).then(function(e){return new Promise(function(t,r){i.decodeDracoFile(e,function(e){for(let t in e.attributes){let r=e.attributes[t],i=o[t];void 0!==i&&(r.normalized=i)}t(e)},n,c,l,r)})})}}class D{constructor(){this.name=d.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class P{constructor(){this.name=d.KHR_MESH_QUANTIZATION}}class U extends i.lGw{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i*3+i;for(let e=0;e!==i;e++)t[e]=r[a+e];return t}interpolate_(e,t,r,i){let a=this.resultBuffer,s=this.sampleValues,n=this.valueSize,o=2*n,l=3*n,c=i-t,h=(r-t)/c,d=h*h,u=d*h,_=e*l,m=_-l,p=-2*u+3*d,f=u-d,g=1-p,v=f-d+h;for(let e=0;e!==n;e++){let t=s[m+e+n],r=s[m+e+o]*c,i=s[_+e+n],l=s[_+e]*c;a[e]=g*t+v*r+p*i+f*l}return a}}let O=new i.PTz;class B extends U{interpolate_(e,t,r,i){let a=super.interpolate_(e,t,r,i);return O.fromArray(a).normalize().toArray(a),a}}let N={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},z={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},V={9728:i.hxR,9729:i.k6q,9984:i.pHI,9985:i.kRr,9986:i.Cfg,9987:i.$_I},H={33071:i.ghU,33648:i.kTW,10497:i.GJx},G={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},j={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...s>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},X={CUBICSPLINE:void 0,LINEAR:i.PJ3,STEP:i.ljd},Y={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function W(e,t,r){for(let i in r.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=r.extensions[i])}function K(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Z(e){let t="",r=Object.keys(e).sort();for(let i=0,a=r.length;i<a;i++)t+=r[i]+":"+e[r[i]]+";";return t}function Q(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let $=new i.kn4;class J{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new h,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,a=!1,s=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=(a=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||r||a&&s<98?this.textureLoader=new i.Tap(this.options.manager):this.textureLoader=new i.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let r=this,i=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(t){let s={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:r,userData:{}};return W(a,s,i),K(s,i),Promise.all(r._invokeAll(function(e){return e.afterRoot&&e.afterRoot(s)})).then(function(){for(let e of s.scenes)e.updateMatrixWorld();e(s)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){let i=t[r].joints;for(let t=0,r=i.length;t<r;t++)e[i[t]].isBone=!0}for(let t=0,i=e.length;t<i;t++){let i=e[t];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(r[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;let i=r.clone(),a=(e,t)=>{let r=this.associations.get(e);for(let[i,s]of(null!=r&&this.associations.set(t,r),e.children.entries()))a(s,t.children[i])};return a(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){let i=e(t[r]);if(i)return i}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let r=[];for(let i=0;i<t.length;i++){let a=e(t[i]);a&&r.push(a)}return r}getDependency(e,t){let r=e+":"+t,i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(!(i=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){let r=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,i){return r.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[d.KHR_BINARY_GLTF].body);let a=this.options;return new Promise(function(e,s){r.load(i.r6x.resolveURL(t.uri,a.path),e,void 0,function(){s(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let r=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+r)})}loadAccessor(e){let t=this,r=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse){let e=G[a.type],t=z[a.componentType],r=!0===a.normalized,s=new t(a.count*e);return Promise.resolve(new i.THS(s,e,r))}let s=[];return void 0!==a.bufferView?s.push(this.getDependency("bufferView",a.bufferView)):s.push(null),void 0!==a.sparse&&(s.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(s).then(function(e){let s,n,o=e[0],l=G[a.type],c=z[a.componentType],h=c.BYTES_PER_ELEMENT,d=h*l,u=a.byteOffset||0,_=void 0!==a.bufferView?r.bufferViews[a.bufferView].byteStride:void 0,m=!0===a.normalized;if(_&&_!==d){let e=Math.floor(u/_),r="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+e+":"+a.count,d=t.cache.get(r);d||(s=new c(o,e*_,a.count*_/h),d=new i.eB$(s,_/h),t.cache.add(r,d)),n=new i.eHs(d,l,u%_/h,m)}else s=null===o?new c(a.count*l):new c(o,u,a.count*l),n=new i.THS(s,l,m);if(void 0!==a.sparse){let t=G.SCALAR,r=z[a.sparse.indices.componentType],s=a.sparse.indices.byteOffset||0,h=a.sparse.values.byteOffset||0,d=new r(e[1],s,a.sparse.count*t),u=new c(e[2],h,a.sparse.count*l);null!==o&&(n=new i.THS(n.array.slice(),n.itemSize,n.normalized));for(let e=0,t=d.length;e<t;e++){let t=d[e];if(n.setX(t,u[e*l]),l>=2&&n.setY(t,u[e*l+1]),l>=3&&n.setZ(t,u[e*l+2]),l>=4&&n.setW(t,u[e*l+3]),l>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return n})}loadTexture(e){let t=this.json,r=this.options,i=t.textures[e].source,a=t.images[i],s=this.textureLoader;if(a.uri){let e=r.manager.getHandler(a.uri);null!==e&&(s=e)}return this.loadTextureImage(e,i,s)}loadTextureImage(e,t,r){let a=this,s=this.json,n=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+n.sampler;if(this.textureCache[l])return this.textureCache[l];let c=this.loadImageSource(t,r).then(function(t){t.flipY=!1,t.name=n.name||o.name||"",""===t.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);let r=(s.samplers||{})[n.sampler]||{};return t.magFilter=V[r.magFilter]||i.k6q,t.minFilter=V[r.minFilter]||i.$_I,t.wrapS=H[r.wrapS]||i.GJx,t.wrapT=H[r.wrapT]||i.GJx,a.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){let r=this.json,a=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let s=r.images[e],n=self.URL||self.webkitURL,o=s.uri||"",l=!1;if(void 0!==s.bufferView)o=this.getDependency("bufferView",s.bufferView).then(function(e){l=!0;let t=new Blob([e],{type:s.mimeType});return o=n.createObjectURL(t)});else if(void 0===s.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let c=Promise.resolve(o).then(function(e){return new Promise(function(r,s){let n=r;!0===t.isImageBitmapLoader&&(n=function(e){let t=new i.gPd(e);t.needsUpdate=!0,r(t)}),t.load(i.r6x.resolveURL(e,a.path),n,void 0,s)})}).then(function(e){var t;return!0===l&&n.revokeObjectURL(o),K(e,s),e.userData.mimeType=s.mimeType||((t=s.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){let a=this;return this.getDependency("texture",r.index).then(function(s){if(!s)return null;if(void 0!==r.texCoord&&r.texCoord>0&&((s=s.clone()).channel=r.texCoord),a.extensions[d.KHR_TEXTURE_TRANSFORM]){let e=void 0!==r.extensions?r.extensions[d.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=a.associations.get(s);s=a.extensions[d.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),a.associations.set(s,t)}}return void 0!==i&&("number"==typeof i&&(i=3001===i?o:l),"colorSpace"in s?s.colorSpace=i:s.encoding=i===o?3001:3e3),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,r=e.material,a=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,n=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+r.uuid,t=this.cache.get(e);t||(t=new i.BH$,i.imn.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,t.sizeAttenuation=!1,this.cache.add(e,t)),r=t}else if(e.isLine){let e="LineBasicMaterial:"+r.uuid,t=this.cache.get(e);t||(t=new i.mrM,i.imn.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,this.cache.add(e,t)),r=t}if(a||s||n){let e="ClonedMaterial:"+r.uuid+":";a&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),n&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=r.clone(),s&&(t.vertexColors=!0),n&&(t.flatShading=!0),a&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(r))),r=t}e.material=r}getMaterialType(){return i._4j}loadMaterial(e){let t,r=this,a=this.json,s=this.extensions,n=a.materials[e],c={},h=n.extensions||{},u=[];if(h[d.KHR_MATERIALS_UNLIT]){let e=s[d.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),u.push(e.extendParams(c,n,r))}else{let a=n.pbrMetallicRoughness||{};if(c.color=new i.Q1f(1,1,1),c.opacity=1,Array.isArray(a.baseColorFactor)){let e=a.baseColorFactor;c.color.setRGB(e[0],e[1],e[2],l),c.opacity=e[3]}void 0!==a.baseColorTexture&&u.push(r.assignTexture(c,"map",a.baseColorTexture,o)),c.metalness=void 0!==a.metallicFactor?a.metallicFactor:1,c.roughness=void 0!==a.roughnessFactor?a.roughnessFactor:1,void 0!==a.metallicRoughnessTexture&&(u.push(r.assignTexture(c,"metalnessMap",a.metallicRoughnessTexture)),u.push(r.assignTexture(c,"roughnessMap",a.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,c)})))}!0===n.doubleSided&&(c.side=i.$EB);let _=n.alphaMode||Y.OPAQUE;if(_===Y.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,_===Y.MASK&&(c.alphaTest=void 0!==n.alphaCutoff?n.alphaCutoff:.5)),void 0!==n.normalTexture&&t!==i.V9B&&(u.push(r.assignTexture(c,"normalMap",n.normalTexture)),c.normalScale=new i.I9Y(1,1),void 0!==n.normalTexture.scale)){let e=n.normalTexture.scale;c.normalScale.set(e,e)}if(void 0!==n.occlusionTexture&&t!==i.V9B&&(u.push(r.assignTexture(c,"aoMap",n.occlusionTexture)),void 0!==n.occlusionTexture.strength&&(c.aoMapIntensity=n.occlusionTexture.strength)),void 0!==n.emissiveFactor&&t!==i.V9B){let e=n.emissiveFactor;c.emissive=new i.Q1f().setRGB(e[0],e[1],e[2],l)}return void 0!==n.emissiveTexture&&t!==i.V9B&&u.push(r.assignTexture(c,"emissiveMap",n.emissiveTexture,o)),Promise.all(u).then(function(){let i=new t(c);return n.name&&(i.name=n.name),K(i,n),r.associations.set(i,{materials:e}),n.extensions&&W(s,i,n),i})}createUniqueName(e){let t=i.Nwf.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,r=this.extensions,a=this.primitiveCache,s=[];for(let n=0,o=e.length;n<o;n++){let o=e[n],l=function(e){let t,r=e.extensions&&e.extensions[d.KHR_DRACO_MESH_COMPRESSION];if(t=r?"draco:"+r.bufferView+":"+r.indices+":"+Z(r.attributes):e.indices+":"+Z(e.attributes)+":"+e.mode,void 0!==e.targets)for(let r=0,i=e.targets.length;r<i;r++)t+=":"+Z(e.targets[r]);return t}(o),c=a[l];if(c)s.push(c.promise);else{let e;e=o.extensions&&o.extensions[d.KHR_DRACO_MESH_COMPRESSION]?function(e){return r[d.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(r){return ee(r,e,t)})}(o):ee(new i.LoY,o,t),a[l]={primitive:o,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){let t=this,r=this.json,s=this.extensions,n=r.meshes[e],o=n.primitives,l=[];for(let e=0,t=o.length;e<t;e++){var c;let t=void 0===o[e].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new i._4j({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.hB5})),c.DefaultMaterial):this.getDependency("material",o[e].material);l.push(t)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(r){let l=r.slice(0,r.length-1),c=r[r.length-1],h=[];for(let r=0,d=c.length;r<d;r++){let d,u=c[r],_=o[r],m=l[r];if(_.mode===N.TRIANGLES||_.mode===N.TRIANGLE_STRIP||_.mode===N.TRIANGLE_FAN||void 0===_.mode)!0===(d=!0===n.isSkinnedMesh?new i.I46(u,m):new i.eaF(u,m)).isSkinnedMesh&&d.normalizeSkinWeights(),_.mode===N.TRIANGLE_STRIP?d.geometry=a(d.geometry,i.O49):_.mode===N.TRIANGLE_FAN&&(d.geometry=a(d.geometry,i.rYR));else if(_.mode===N.LINES)d=new i.DXC(u,m);else if(_.mode===N.LINE_STRIP)d=new i.N1A(u,m);else if(_.mode===N.LINE_LOOP)d=new i.FCc(u,m);else if(_.mode===N.POINTS)d=new i.ONl(u,m);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(d.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let r=0,i=t.weights.length;r<i;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){let r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(let t=0,i=r.length;t<i;t++)e.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(d,n),d.name=t.createUniqueName(n.name||"mesh_"+e),K(d,n),_.extensions&&W(s,d,_),t.assignFinalMaterial(d),h.push(d)}for(let r=0,i=h.length;r<i;r++)t.associations.set(h[r],{meshes:e,primitives:r});if(1===h.length)return n.extensions&&W(s,h[0],n),h[0];let d=new i.YJl;n.extensions&&W(s,d,n),t.associations.set(d,{meshes:e});for(let e=0,t=h.length;e<t;e++)d.add(h[e]);return d})}loadCamera(e){let t,r=this.json.cameras[e],a=r[r.type];return a?("perspective"===r.type?t=new i.ubm(i.cj9.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===r.type&&(t=new i.qUd(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),K(t,r),Promise.resolve(t)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){let t=this.json.skins[e],r=[];for(let e=0,i=t.joints.length;e<i;e++)r.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(e){let r=e.pop(),a=[],s=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];if(o){a.push(o);let e=new i.kn4;null!==r&&e.fromArray(r.array,16*n),s.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[n])}return new i.EAD(a,s)})}loadAnimation(e){let t=this.json,r=this,a=t.animations[e],s=a.name?a.name:"animation_"+e,n=[],o=[],l=[],c=[],h=[];for(let e=0,t=a.channels.length;e<t;e++){let t=a.channels[e],r=a.samplers[t.sampler],i=t.target,s=i.node,d=void 0!==a.parameters?a.parameters[r.input]:r.input,u=void 0!==a.parameters?a.parameters[r.output]:r.output;void 0!==i.node&&(n.push(this.getDependency("node",s)),o.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",u)),c.push(r),h.push(i))}return Promise.all([Promise.all(n),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(e){let t=e[0],a=e[1],n=e[2],o=e[3],l=e[4],c=[];for(let e=0,i=t.length;e<i;e++){let i=t[e],s=a[e],h=n[e],d=o[e],u=l[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();let _=r._createAnimationTracks(i,s,h,d,u);if(_)for(let e=0;e<_.length;e++)c.push(_[e])}return new i.tz3(s,void 0,c)})}createNodeMesh(e){let t=this.json,r=this,i=t.nodes[e];return void 0===i.mesh?null:r.getDependency("mesh",i.mesh).then(function(e){let t=r._getNodeRef(r.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,r=i.weights.length;t<r;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],r=this._loadNodeShallow(e),i=[],a=t.children||[];for(let e=0,t=a.length;e<t;e++)i.push(this.getDependency("node",a[e]));let s=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([r,Promise.all(i),s]).then(function(e){let t=e[0],r=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,$)});for(let e=0,i=r.length;e<i;e++)t.add(r[e]);return t})}_loadNodeShallow(e){let t=this.json,r=this.extensions,a=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let s=t.nodes[e],n=s.name?a.createUniqueName(s.name):"",o=[],l=a._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return l&&o.push(l),void 0!==s.camera&&o.push(a.getDependency("camera",s.camera).then(function(e){return a._getNodeRef(a.cameraCache,s.camera,e)})),a._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){o.push(e)}),this.nodeCache[e]=Promise.all(o).then(function(t){let o;if((o=!0===s.isBone?new i.$Kf:t.length>1?new i.YJl:1===t.length?t[0]:new i.B69)!==t[0])for(let e=0,r=t.length;e<r;e++)o.add(t[e]);if(s.name&&(o.userData.name=s.name,o.name=n),K(o,s),s.extensions&&W(r,o,s),void 0!==s.matrix){let e=new i.kn4;e.fromArray(s.matrix),o.applyMatrix4(e)}else void 0!==s.translation&&o.position.fromArray(s.translation),void 0!==s.rotation&&o.quaternion.fromArray(s.rotation),void 0!==s.scale&&o.scale.fromArray(s.scale);return a.associations.has(o)||a.associations.set(o,{}),a.associations.get(o).nodes=e,o}),this.nodeCache[e]}loadScene(e){let t=this.extensions,r=this.json.scenes[e],a=this,s=new i.YJl;r.name&&(s.name=a.createUniqueName(r.name)),K(s,r),r.extensions&&W(t,s,r);let n=r.nodes||[],o=[];for(let e=0,t=n.length;e<t;e++)o.push(a.getDependency("node",n[e]));return Promise.all(o).then(function(e){for(let t=0,r=e.length;t<r;t++)s.add(e[t]);return a.associations=(e=>{let t=new Map;for(let[e,r]of a.associations)(e instanceof i.imn||e instanceof i.gPd)&&t.set(e,r);return e.traverse(e=>{let r=a.associations.get(e);null!=r&&t.set(e,r)}),t})(s),s})}_createAnimationTracks(e,t,r,a,s){let n,o=[],l=e.name?e.name:e.uuid,c=[];switch(q[s.path]===q.weights?e.traverse(function(e){e.morphTargetInfluences&&c.push(e.name?e.name:e.uuid)}):c.push(l),q[s.path]){case q.weights:n=i.Hit;break;case q.rotation:n=i.MBL;break;case q.position:case q.scale:n=i.RiT;break;default:n=1===r.itemSize?i.Hit:i.RiT}let h=void 0!==a.interpolation?X[a.interpolation]:i.PJ3,d=this._getArrayFromAccessor(r);for(let e=0,r=c.length;e<r;e++){let r=new n(c[e]+"."+q[s.path],t.array,d,h);"CUBICSPLINE"===a.interpolation&&this._createCubicSplineTrackInterpolant(r),o.push(r)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=Q(t.constructor),r=new Float32Array(t.length);for(let i=0,a=t.length;i<a;i++)r[i]=t[i]*e;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof i.MBL?B:U)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ee(e,t,r){let a=t.attributes,s=[];for(let t in a){let i=j[t]||t.toLowerCase();i in e.attributes||s.push(function(t,i){return r.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}(a[t],i))}if(void 0!==t.indices&&!e.index){let i=r.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});s.push(i)}return K(e,t),!function(e,t,r){let a=t.attributes,s=new i.NRn;if(void 0===a.POSITION)return;{let e=r.json.accessors[a.POSITION],t=e.min,n=e.max;if(void 0===t||void 0===n)return console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new i.Pq0(t[0],t[1],t[2]),new i.Pq0(n[0],n[1],n[2])),e.normalized){let t=Q(z[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}let n=t.targets;if(void 0!==n){let e=new i.Pq0,t=new i.Pq0;for(let i=0,a=n.length;i<a;i++){let a=n[i];if(void 0!==a.POSITION){let i=r.json.accessors[a.POSITION],s=i.min,n=i.max;if(void 0!==s&&void 0!==n){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(n[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(n[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(n[2]))),i.normalized){let e=Q(z[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;let o=new i.iyt;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=o}(e,t,r),Promise.all(s).then(function(){return void 0!==t.targets?function(e,t,r){let i=!1,a=!1,s=!1;for(let e=0,r=t.length;e<r;e++){let r=t[e];if(void 0!==r.POSITION&&(i=!0),void 0!==r.NORMAL&&(a=!0),void 0!==r.COLOR_0&&(s=!0),i&&a&&s)break}if(!i&&!a&&!s)return Promise.resolve(e);let n=[],o=[],l=[];for(let c=0,h=t.length;c<h;c++){let h=t[c];if(i){let t=void 0!==h.POSITION?r.getDependency("accessor",h.POSITION):e.attributes.position;n.push(t)}if(a){let t=void 0!==h.NORMAL?r.getDependency("accessor",h.NORMAL):e.attributes.normal;o.push(t)}if(s){let t=void 0!==h.COLOR_0?r.getDependency("accessor",h.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(n),Promise.all(o),Promise.all(l)]).then(function(t){let r=t[0],n=t[1],o=t[2];return i&&(e.morphAttributes.position=r),a&&(e.morphAttributes.normal=n),s&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,r):e})}},6637:(e,t,r)=>{r.d(t,{$0:()=>c,$h:()=>h,B8:()=>s,CV:()=>l,kN:()=>o,lw:()=>n,vt:()=>a});var i=r(1142);function a(){var e=new i.tb(16);return i.tb!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function s(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],h=t[8],d=t[9],u=t[10],_=t[11],m=t[12],p=t[13],f=t[14],g=t[15],v=r*o-i*n,b=r*l-a*n,y=r*c-s*n,A=i*l-a*o,T=i*c-s*o,E=a*c-s*l,w=h*p-d*m,x=h*f-u*m,R=h*g-_*m,M=d*f-u*p,S=d*g-_*p,I=u*g-_*f,C=v*I-b*S+y*M+A*R-T*x+E*w;return C?(C=1/C,e[0]=(o*I-l*S+c*M)*C,e[1]=(a*S-i*I-s*M)*C,e[2]=(p*E-f*T+g*A)*C,e[3]=(u*T-d*E-_*A)*C,e[4]=(l*R-n*I-c*x)*C,e[5]=(r*I-a*R+s*x)*C,e[6]=(f*y-m*E-g*b)*C,e[7]=(h*E-u*y+_*b)*C,e[8]=(n*S-o*R+c*w)*C,e[9]=(i*R-r*S-s*w)*C,e[10]=(m*T-p*y+g*v)*C,e[11]=(d*y-h*T-_*v)*C,e[12]=(o*x-n*M-l*w)*C,e[13]=(r*M-i*x+a*w)*C,e[14]=(p*b-m*A-f*v)*C,e[15]=(h*A-d*b+u*v)*C,e):null}function n(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],h=t[7],d=t[8],u=t[9],_=t[10],m=t[11],p=t[12],f=t[13],g=t[14],v=t[15],b=r[0],y=r[1],A=r[2],T=r[3];return e[0]=b*i+y*o+A*d+T*p,e[1]=b*a+y*l+A*u+T*f,e[2]=b*s+y*c+A*_+T*g,e[3]=b*n+y*h+A*m+T*v,b=r[4],y=r[5],A=r[6],T=r[7],e[4]=b*i+y*o+A*d+T*p,e[5]=b*a+y*l+A*u+T*f,e[6]=b*s+y*c+A*_+T*g,e[7]=b*n+y*h+A*m+T*v,b=r[8],y=r[9],A=r[10],T=r[11],e[8]=b*i+y*o+A*d+T*p,e[9]=b*a+y*l+A*u+T*f,e[10]=b*s+y*c+A*_+T*g,e[11]=b*n+y*h+A*m+T*v,b=r[12],y=r[13],A=r[14],T=r[15],e[12]=b*i+y*o+A*d+T*p,e[13]=b*a+y*l+A*u+T*f,e[14]=b*s+y*c+A*_+T*g,e[15]=b*n+y*h+A*m+T*v,e}function o(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function l(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t,r){var a,s,n,o=r[0],l=r[1],c=r[2],h=Math.hypot(o,l,c);return h<i.p8?null:(o*=h=1/h,l*=h,c*=h,a=Math.sin(t),n=1-(s=Math.cos(t)),e[0]=o*o*n+s,e[1]=l*o*n+c*a,e[2]=c*o*n-l*a,e[3]=0,e[4]=o*l*n-c*a,e[5]=l*l*n+s,e[6]=c*l*n+o*a,e[7]=0,e[8]=o*c*n+l*a,e[9]=l*c*n-o*a,e[10]=c*c*n+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function h(e,t,r,i,a,s,n){var o=1/(r-t),l=1/(a-i),c=1/(s-n);return e[0]=2*s*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(a+i)*l,e[10]=(n+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=n*s*2*c,e[15]=0,e}},6707:(e,t,r)=>{e.exports=r.p+"static/media/face_tracking_model.c3b15d03.zbin"},8832:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(9946).A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},9477:(e,t,r)=>{r.d(t,{useGesture:()=>e_});let i={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function a(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function s(e,t,r,i=.15){return 0===i?Math.max(t,Math.min(e,r)):e<t?-a(t-e,r-t,i)+t:e>r?+a(e-r,r-t,i)+r:e}function n(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function h(e){return e?e[0].toUpperCase()+e.slice(1):""}let d=["enter","leave"],u=["gotpointercapture","lostpointercapture"];function _(e){return"touches"in e}function m(e){return _(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function p(e){return _(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function f(e,t){try{let r=t.clientX-e.clientX,i=t.clientY-e.clientY,a=(t.clientX+e.clientX)/2,s=(t.clientY+e.clientY)/2,n=Math.hypot(r,i);return{angle:-(180*Math.atan2(r,i))/Math.PI,distance:n,origin:[a,s]}}catch(e){}return null}function g(e,t){let[r,i]=Array.from(e.touches).filter(e=>t.includes(e.identifier));return f(r,i)}function v(e){let t=p(e);return _(e)?t.identifier:t.pointerId}function b(e){let t=p(e);return[t.clientX,t.clientY]}function y(e){let{deltaX:t,deltaY:r,deltaMode:i}=e;return 1===i?(t*=40,r*=40):2===i&&(t*=800,r*=800),[t,r]}function A(e,...t){return"function"==typeof e?e(...t):e}function T(){}function E(e,t){return Object.assign({},t,e||{})}class w{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?A(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:r,shared:a}=this;t.args=this.args;let n=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,a.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,a.locked=!!document.pointerLockElement,Object.assign(a,function(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:r,altKey:i,metaKey:a,ctrlKey:s}=e;Object.assign(t,{shiftKey:r,altKey:i,metaKey:a,ctrlKey:s})}return t}(e)),a.down=a.pressed=a.buttons%2==1||a.touches>0,n=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let e=t._delta.map(Math.abs);i.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);let[o,l]=t._movement,[c,h]=r.threshold,{_step:d,values:u}=t;if(r.hasCustomTransform?(!1===d[0]&&(d[0]=Math.abs(o)>=c&&u[0]),!1===d[1]&&(d[1]=Math.abs(l)>=h&&u[1])):(!1===d[0]&&(d[0]=Math.abs(o)>=c&&Math.sign(o)*c),!1===d[1]&&(d[1]=Math.abs(l)>=h&&Math.sign(l)*h)),t.intentional=!1!==d[0]||!1!==d[1],!t.intentional)return;let _=[0,0];if(r.hasCustomTransform){let[e,t]=u;_[0]=!1!==d[0]?e-d[0]:0,_[1]=!1!==d[1]?t-d[1]:0}else _[0]=!1!==d[0]?o-d[0]:0,_[1]=!1!==d[1]?l-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(_);let m=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=a[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=A(r.bounds,t)),this.setup&&this.setup()),t.movement=_,this.computeOffset()));let[f,g]=t.offset,[[v,b],[y,T]]=t._bounds;t.overflow=[f<v?-1:+(f>b),g<y?-1:+(g>T)],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);let E=t._active&&r.rubberband||[0,0];if(t.offset=function(e,[t,r],[i,a]){let[[n,o],[l,c]]=e;return[s(t,n,o,i),s(r,l,c,a)]}(t._bounds,t.offset,E),t.delta=i.sub(t.offset,m),this.computeMovement(),p&&(!t.last||n>32)){t.delta=i.sub(t.offset,m);let e=t.delta.map(Math.abs);i.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&n>0&&(t.velocity=[e[0]/n,e[1]/n],t.timeDelta=n)}}emit(){let e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;let i=this.handler(l(l(l({},t),e),{},{[this.aliasKey]:e.values}));void 0!==i&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class x extends w{constructor(...e){super(...e),n(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=i.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=i.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,r=this.config;if(!t.axis&&e){let i="object"==typeof r.axisThreshold?r.axisThreshold[m(e)]:r.axisThreshold;t.axis=function([e,t],r){let i=Math.abs(e),a=Math.abs(t);return i>a&&i>r?"x":a>i&&a>r?"y":void 0}(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}let R=e=>e,M={enabled:(e=!0)=>e,eventOptions:(e,t,r)=>l(l({},r.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return i.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?i.toVector(e):void 0,transform(e,t,r){let i=e||r.shared.transform;return this.hasCustomTransform=!!i,i||R},threshold:e=>i.toVector(e,0)},S=0,I=l(l({},M),{},{axis(e,t,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:(e=S)=>e,bounds(e={}){if("function"==typeof e)return t=>I.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:r=1/0,top:i=-1/0,bottom:a=1/0}=e;return[[t,r],[i,a]]}}),C={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class F extends x{constructor(...e){super(...e),n(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=I.bounds(i)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,r=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;let i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&r._pointerActive||(this.start(e),this.setupPointer(e),r._pointerId=v(e),r._pointerActive=!0,this.computeValues(b(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==m(e)?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,r=this.config;if(!t._pointerActive)return;let a=v(e);if(void 0!==t._pointerId&&a!==t._pointerId)return;let s=b(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=i.sub(s,t._values),this.computeValues(s)),i.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(!t.axis)return;else if(t.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){}let t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;let i=v(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[a,s]=t._distance;if(t.tap=a<=r.tapsThreshold&&s<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{let[e,i]=t._delta,[a,s]=t._movement,[n,o]=r.swipe.velocity,[l,c]=r.swipe.distance,h=r.swipe.duration;if(t.elapsedTime<h){let r=Math.abs(e/t.timeDelta),h=Math.abs(i/t.timeDelta);r>n&&Math.abs(a)>l&&(t.swipe[0]=Math.sign(e)),h>o&&Math.abs(s)>c&&(t.swipe[1]=Math.sign(i))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){var t;this.state._preventScroll=!1,"persist"in(t=e)&&"function"==typeof t.persist&&t.persist();let r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=C[e.key];if(t){let r=this.state,a=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,a),r._keyboardActive=!0,i.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in C&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}let k="undefined"!=typeof window&&window.document&&window.document.createElement;function L(){return k&&"ontouchstart"in window}let D={isBrowser:k,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:L(),touchscreen:L()||k&&window.navigator.maxTouchPoints>1,pointer:k&&"onpointerdown"in window,pointerLock:k&&"exitPointerLock"in window.document},P=10,U={mouse:0,touch:0,pen:8},O=l(l({},I),{},{device(e,t,{pointer:{touch:r=!1,lock:i=!1,mouse:a=!1}={}}){return(this.pointerLock=i&&D.pointerLock,D.touch&&r)?"touch":this.pointerLock?"mouse":D.pointer&&!a?"pointer":D.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:r}){if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,D.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:i=1,keys:a=!0}={}}){return this.pointerButtons=i,this.keys=a,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,{filterTaps:r=!1,tapsThreshold:a=3,axis:s}){let n=i.toVector(e,r?a:+!!s);return this.filterTaps=r,this.tapsThreshold=a,n},swipe({velocity:e=.5,distance:t=50,duration:r=250}={}){return{velocity:this.transform(i.toVector(e)),distance:this.transform(i.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?l(l({},U),e):U,keyboardDisplacement:(e=P)=>e});function B(e){let[t,r]=e.overflow,[i,a]=e._delta,[s,n]=e._direction;(t<0&&i>0&&s<0||t>0&&i<0&&s>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&a>0&&n<0||r>0&&a<0&&n>0)&&(e._movement[1]=e._movementBound[1])}class N extends w{constructor(...e){super(...e),n(this,"ingKey","pinching"),n(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){let{type:e,movement:t,lastOffset:r}=this.state;"wheel"===e?this.state.offset=i.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){let{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){let e=this.state,[t,r]=e._movement;if(!e.axis){let i=30*Math.abs(t)-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){let e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);let t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(e=>r.has(e))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);let i=g(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);let t=this.state,r=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(e=>i.has(e))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);let a=f(...Array.from(r.values()));a&&this.pinchStart(e,a)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;let t=g(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){let t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;let r=f(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){let r=this.state,i=r._values[1],a=t.angle-i,s=0;Math.abs(a)>270&&(s+=Math.sign(a)),this.computeValues([t.distance,t.angle-360*s]),r.origin=t.origin,r.turns=s,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){let t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(e){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();let t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;let t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];let r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=i.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){let t=this.config.modifierKey;(!t||(Array.isArray(t)?t.find(t=>e[t]):e[t]))&&(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();let t=this.state;t._delta=[-y(e)[1]/100*t.offset[0],0],i.addTo(t._movement,t._delta),B(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){let t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}let z=l(l({},M),{},{device(e,t,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!D.touch&&D.gesture)return"gesture";if(D.touch&&i)return"touch";if(D.touchscreen){if(D.pointer)return"pointer";if(D.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:i={}}){let a=e=>{let t=E(A(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},s=e=>{let t=E(A(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof i?[a(),s()]:e=>[a(e),s(e)]},threshold(e,t,r){return this.lockDirection="lock"===r.axis,i.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});class V extends x{constructor(...e){super(...e),n(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(b(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;let t=b(e),r=this.state;r._delta=i.sub(t,r._values),i.addTo(r._movement,r._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}let H=l(l({},I),{},{mouseOnly:(e=!0)=>e});class G extends x{constructor(...e){super(...e),n(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();let t=this.state,r=function(e){var t,r;let{scrollX:i,scrollY:a,scrollLeft:s,scrollTop:n}=e.currentTarget;return[null!=(t=null!=i?i:s)?t:0,null!=(r=null!=a?a:n)?r:0]}(e);t._delta=i.sub(r,t._values),i.addTo(t._movement,t._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}class j extends x{constructor(...e){super(...e),n(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){let t=this.state;t._delta=y(e),i.addTo(t._movement,t._delta),B(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}class q extends x{constructor(...e){super(...e),n(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(b(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;let t=this.state;if(!t._active)return;t._active=!1;let r=b(e);t._movement=t._delta=i.sub(r,t._values),this.computeValues(r),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}let X=l(l({},I),{},{mouseOnly:(e=!0)=>e}),Y=new Map,W=new Map;function K(e){Y.set(e.key,e.engine),W.set(e.key,e.resolver)}let Z={key:"drag",engine:F,resolver:O},Q={key:"hover",engine:q,resolver:X},$={key:"move",engine:V,resolver:H},J={key:"pinch",engine:N,resolver:z},ee={key:"scroll",engine:G,resolver:I},et={key:"wheel",engine:j,resolver:I};var er=r(2115);let ei={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=D.isBrowser?window:void 0)=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},ea=["target","eventOptions","window","enabled","transform"];function es(e={},t){let r={};for(let[i,a]of Object.entries(t))switch(typeof a){case"function":r[i]=a.call(r,e[i],i,e);break;case"object":r[i]=es(e[i],a);break;case"boolean":a&&(r[i]=e[i])}return r}class en{constructor(e,t){n(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,a){let s=this._listeners,n=function(e,t=""){let r=c[e];return e+(r&&r[t]||t)}(t,r),o=l(l({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),a);e.addEventListener(n,i,o);let h=()=>{e.removeEventListener(n,i,o),s.delete(h)};return s.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class eo{constructor(){n(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class el{constructor(e){n(this,"gestures",new Set),n(this,"_targetEventStore",new en(this)),n(this,"gestureEventStores",{}),n(this,"gestureTimeoutStores",{}),n(this,"handlers",{}),n(this,"config",{}),n(this,"pointerIds",new Set),n(this,"touchIds",new Set),n(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&ec(e,"drag"),t.wheel&&ec(e,"wheel"),t.scroll&&ec(e,"scroll"),t.move&&ec(e,"move"),t.pinch&&ec(e,"pinch"),t.hover&&ec(e,"hover")}(this,e)}setEventIds(e){if(_(e))return this.touchIds=new Set(Array.from(e.touches).filter(t=>{var r,i;return t.target===e.currentTarget||(null==(r=e.currentTarget)||null==(i=r.contains)?void 0:i.call(r,t.target))}).map(e=>e.identifier)),this.touchIds;if("pointerId"in e)return"pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,r={}){let{target:i,eventOptions:a,window:s,enabled:n,transform:o}=e,c=function(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,ea);if(r.shared=es({target:i,eventOptions:a,window:s,enabled:n,transform:o},ei),t){let e=W.get(t);r[t]=es(l({shared:r.shared},c),e)}else for(let e in c){let t=W.get(e);t&&(r[e]=es(l({shared:r.shared},c[e]),t))}return r}(e,t,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t,r=this.config.shared,i={};if(!r.target||(t=r.target())){if(r.enabled){for(let r of this.gestures){let a=this.config[r],s=eh(i,a.eventOptions,!!t);a.enabled&&new(Y.get(r))(this,e,r).bind(s)}let a=eh(i,r.eventOptions,!!t);for(let t in this.nativeHandlers)a(t,"",r=>this.nativeHandlers[t](l(l({},this.state.shared),{},{event:r,args:e})),void 0,!0)}for(let e in i)i[e]=function(...e){return 0===e.length?T:1===e.length?e[0]:function(){let t;for(let r of e)t=r.apply(this,arguments)||t;return t}}(...i[e]);if(!t)return i;for(let e in i){let{device:r,capture:a,passive:s}=function(e){let t=e.substring(2).toLowerCase(),r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));let i=u.includes(t)?"capturecapture":"capture",a=!!~t.indexOf(i);return a&&(t=t.replace("capture","")),{device:t,capture:a,passive:r}}(e);this._targetEventStore.add(t,r,"",i[e],{capture:a,passive:s})}}}}function ec(e,t){e.gestures.add(t),e.gestureEventStores[t]=new en(e,t),e.gestureTimeoutStores[t]=new eo}let eh=(e,t,r)=>(i,a,s,n={},o=!1)=>{var l,u;let _=null!=(l=n.capture)?l:t.capture,m=null!=(u=n.passive)?u:t.passive,p=o?i:function(e,t="",r=!1){let i=c[e],a=i&&i[t]||t;return"on"+h(e)+h(a)+(!function(e=!1,t){return e&&!d.includes(t)}(r,a)?"":"Capture")}(i,a,_);r&&m&&(p+="Passive"),e[p]=e[p]||[],e[p].push(s)},ed=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function eu(e,t,r,i,a,s){if(!e.has(r)||!Y.has(i))return;let n=r+"Start",o=r+"End";a[i]=e=>{let i;return e.first&&n in t&&t[n](e),r in t&&(i=t[r](e)),e.last&&o in t&&t[o](e),i},s[i]=s[i]||{}}function e_(e,t){return([Z,J,ee,et,$,Q].forEach(K),function(e,t){let{handlers:r,nativeHandlers:i,config:a}=function(e,t){let[r,i,a]=function(e){let t={},r={},i=new Set;for(let a in e)ed.test(a)?(i.add(RegExp.lastMatch),r[a]=e[a]):t[a]=e[a];return[r,t,i]}(e),s={};return eu(a,r,"onDrag","drag",s,t),eu(a,r,"onWheel","wheel",s,t),eu(a,r,"onScroll","scroll",s,t),eu(a,r,"onPinch","pinch",s,t),eu(a,r,"onMove","move",s,t),eu(a,r,"onHover","hover",s,t),{handlers:s,config:t,nativeHandlers:i}}(e,t||{});return function(e,t={},r,i){let a=er.useMemo(()=>new el(e),[]);if(a.applyHandlers(e,i),a.applyConfig(t,r),er.useEffect(a.effect.bind(a)),er.useEffect(()=>a.clean.bind(a),[]),void 0===t.target)return a.bind.bind(a)}(r,a,void 0,i)})(e,t||{})}},9881:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(9946).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},9946:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,i.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:h,iconNode:d,...u}=e;return(0,i.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:l?24*Number(o)/Number(a):o,className:s("lucide",c),...!h&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...d.map(e=>{let[t,r]=e;return(0,i.createElement)(t,r)}),...Array.isArray(h)?h:[h]])}),l=(e,t)=>{let r=(0,i.forwardRef)((r,n)=>{let{className:l,...c}=r;return(0,i.createElement)(o,{ref:n,iconNode:t,className:s("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return r.displayName=a(e),r}}}]);