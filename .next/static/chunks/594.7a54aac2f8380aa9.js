"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[594],{1594:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var o=n(5155),i=n(2115),r=n(7650),a=n(5169),s=n(4355),l=n(5695);let c=()=>{let e=(0,l.useRouter)(),t=(0,i.useRef)(null),[n,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),[g,h]=(0,i.useState)(.114),[b,f]=(0,i.useState)(.0095),v=(0,i.useRef)(null),y=(0,i.useRef)(.114),x=(0,i.useRef)(.0095),[w,A]=(0,i.useState)(!1),k=(0,i.useRef)({});(0,i.useEffect)(()=>{A(!0);let e=async()=>{try{if(!window.MINDAR||!window.AFRAME){for(let e of(console.log("Loading MindAR and A-Frame libraries..."),["https://aframe.io/releases/1.3.0/aframe.min.js","https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"]))await new Promise((t,n)=>{let o=document.createElement("script");o.src=e,o.async=!1,o.onload=()=>{console.log("Loaded: ".concat(e)),t()},o.onerror=()=>{console.error("Failed to load: ".concat(e)),n(Error("Failed to load ".concat(e)))},document.head.appendChild(o)});await new Promise(e=>setTimeout(e,500)),console.log("All libraries loaded")}c(!0)}catch(e){console.error("Failed to load libraries:",e),p("ARライブラリの読み込みに失敗しました。")}},t=async()=>{console.log("\uD83D\uDD04 Page hide detected, cleaning up AR..."),await R()},n=async()=>{document.hidden&&(console.log("\uD83D\uDD04 Page became hidden, cleaning up AR..."),await R())},o=async()=>{console.log("\uD83D\uDD04 Page unloading, cleaning up AR..."),await R()},i=async()=>{console.log("\uD83D\uDD04 Browser back detected, cleaning up AR..."),await R()};return window.addEventListener("pagehide",t),document.addEventListener("visibilitychange",n),window.addEventListener("beforeunload",o),window.addEventListener("popstate",i),e(),()=>{console.log("MarkerARFrame component unmounting, cleaning up..."),A(!1),window.removeEventListener("pagehide",t),document.removeEventListener("visibilitychange",n),window.removeEventListener("beforeunload",o),window.removeEventListener("popstate",i),(async()=>{await R()})()}},[]);let E=async()=>{if(!t.current)return void p("コンテナが見つかりません");try{console.log("Starting AR initialization..."),console.log("Requesting camera permission...");try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});console.log("✅ Camera permission granted"),e.getTracks().forEach(e=>e.stop())}catch(e){console.error("Camera permission denied:",e),p("カメラへのアクセスが拒否されました。ブラウザの設定を確認してください。");return}console.log("Starting AR initialization with both targets"),console.log("Checking targets.mind file...");try{let e=await fetch("/targets.mind");if(!e.ok)throw Error("targets.mind not found: ".concat(e.status));console.log("✅ targets.mind file found")}catch(e){console.error("targets.mind check failed:",e),p("ターゲットファイルが見つかりません");return}let e=document.createElement("style");e.setAttribute("data-mindar-fullscreen","true"),e.textContent="\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          overflow: hidden !important;\n          width: 100% !important;\n          height: 100% !important;\n        }\n        /* 標準 UI は完全に隠す */\n        .mindar-ui-overlay,\n        .mindar-ui-scanning,\n        .mindar-ui-loading {\n          display: none !important;\n          pointer-events: none !important;\n        }\n        a-scene {\n          position: fixed !important;\n          top: 0 !important;\n          left: 0 !important;\n          width: 100vw !important;\n          height: 100vh !important;\n          display: block !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          z-index: 1 !important;\n        }\n        a-scene canvas {\n          position: fixed !important;\n          top: 0 !important;\n          left: 0 !important;\n          width: 100% !important;\n          height: 100% !important;\n          display: block !important;\n          z-index: 1 !important;\n          pointer-events: none !important;\n        }\n        video {\n          position: fixed !important;\n          top: 0 !important;\n          left: 0 !important;\n          width: 100% !important;\n          height: 100% !important;\n          object-fit: cover !important;\n          pointer-events: none !important;\n        }\n      ",document.head.appendChild(e);let n='\n        <a-scene\n          mindar-image="imageTargetSrc: /targets.mind; autoStart: no; uiScanning: #my-scanning-ui; uiLoading: no; uiError: no; showStats: no; filterMinCF: 0.0001; filterBeta: 1000;"\n          color-space="sRGB"\n          renderer="colorManagement: true, physicallyCorrectLights"\n          vr-mode-ui="enabled: false"\n          device-orientation-permission-ui="enabled: false"\n          style="display: block; width: 100vw; height: 100vh;"\n        >\n          <a-assets>\n            <a-asset-item id="coicoi-model" src="/coicoi.glb"></a-asset-item>\n            <a-asset-item id="wkwk-model" src="/wkwk.glb"></a-asset-item>\n          </a-assets>\n          \n          <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>\n          \n          \x3c!-- Coicoi用 (index 0) --\x3e\n          <a-entity mindar-image-target="targetIndex: 0">\n            <a-gltf-model\n              id="model-coicoi"\n              rotation="0 0 0"\n              position="0 0 0"\n              scale="'.concat(g," ").concat(g," ").concat(g,'"\n              src="#coicoi-model"\n              animation-mixer\n            ></a-gltf-model>\n          </a-entity>\n          \n          \x3c!-- WKWK用 (index 1) --\x3e\n          <a-entity mindar-image-target="targetIndex: 1">\n            <a-gltf-model\n              id="model-wkwk"\n              rotation="0 0 0"\n              position="0 0 0"\n              scale="').concat(b," ").concat(b," ").concat(b,'"\n              src="#wkwk-model"\n              animation-mixer\n            ></a-gltf-model>\n          </a-entity>\n          \n          <a-light type="ambient" color="#ffffff" intensity="0.6"></a-light>\n          <a-light type="directional" position="0 1 1" intensity="0.8"></a-light>\n        </a-scene>\n      ');t.current.innerHTML='\n        <div id="my-scanning-ui" class="hidden">\n          <div style="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            background: rgba(0, 0, 0, 0.3);\n          ">\n            \x3c!-- 停止ボタン --\x3e\n            <button id="close-ar" style="\n              position: fixed;\n              top: 24px;\n              right: 24px;\n              width: 56px;\n              height: 56px;\n              border-radius: 16px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              background: linear-gradient(135deg, #ec4899, #f43f5e);\n              border: 2px solid rgba(255, 255, 255, 0.4);\n              cursor: pointer;\n              z-index: 10000;\n              color: white;\n              font-size: 28px;\n              font-weight: bold;\n              box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4);\n            ">✕</button>\n\n            \x3c!-- 上部の説明テキスト --\x3e\n            <div style="\n              position: fixed;\n              top: 24px;\n              left: 24px;\n              right: 96px;\n            ">\n              <div style="\n                background: linear-gradient(135deg, rgba(147, 51, 234, 0.7), rgba(236, 72, 153, 0.7));\n                backdrop-filter: blur(16px);\n                border-radius: 16px;\n                padding: 24px;\n                border: 1px solid rgba(255, 255, 255, 0.2);\n                box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);\n              ">\n                <h2 style="\n                  font-size: 20px;\n                  font-weight: bold;\n                  background: linear-gradient(135deg, #fce7f3, #e879f9);\n                  -webkit-background-clip: text;\n                  -webkit-text-fill-color: transparent;\n                  margin: 0 0 8px 0;\n                ">画像を認識中...</h2>\n                <p style="\n                  font-size: 14px;\n                  margin: 0;\n                  color: #fce7f3;\n                ">coicoi または wkwk の画像をカメラに向けてください</p>\n              </div>\n            </div>\n\n            \x3c!-- 中央のスキャナーフレーム --\x3e\n            <div class="scanner-frame" style="\n              width: 288px;\n              height: 288px;\n              border: 3px solid rgba(236, 72, 153, 0.6);\n              border-radius: 24px;\n              position: relative;\n              box-shadow: 0 0 50px rgba(236, 72, 153, 0.3);\n            ">\n              \x3c!-- 四隅のマーカー --\x3e\n              <div style="position: absolute; top: -8px; left: -8px; width: 40px; height: 40px; border-left: 4px solid #ec4899; border-top: 4px solid #ec4899; border-top-left-radius: 16px;"></div>\n              <div style="position: absolute; top: -8px; right: -8px; width: 40px; height: 40px; border-right: 4px solid #ec4899; border-top: 4px solid #ec4899; border-top-right-radius: 16px;"></div>\n              <div style="position: absolute; bottom: -8px; left: -8px; width: 40px; height: 40px; border-left: 4px solid #ec4899; border-bottom: 4px solid #ec4899; border-bottom-left-radius: 16px;"></div>\n              <div style="position: absolute; bottom: -8px; right: -8px; width: 40px; height: 40px; border-right: 4px solid #ec4899; border-bottom: 4px solid #ec4899; border-bottom-right-radius: 16px;"></div>\n              \n              \x3c!-- スキャンライン --\x3e\n              <div class="scan-line" style="\n                position: absolute;\n                width: 100%;\n                height: 2px;\n                background: linear-gradient(90deg, transparent, #ec4899, transparent);\n                animation: scan 2s infinite;\n              "></div>\n              \n              \x3c!-- 中央のクロスヘア --\x3e\n              <div style="\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                width: 40px;\n                height: 40px;\n              ">\n                <div style="position: absolute; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, #ec4899, transparent); top: 50%; transform: translateY(-50%);"></div>\n                <div style="position: absolute; height: 100%; width: 2px; background: linear-gradient(180deg, transparent, #ec4899, transparent); left: 50%; transform: translateX(-50%);"></div>\n              </div>\n            </div>\n\n            \x3c!-- 下部のターゲット画像インジケーター --\x3e\n            <div style="\n              position: fixed;\n              bottom: 32px;\n              left: 50%;\n              transform: translateX(-50%);\n              display: flex;\n              gap: 24px;\n            ">\n              <div style="\n                background: linear-gradient(135deg, rgba(236, 72, 153, 0.8), rgba(147, 51, 234, 0.8));\n                backdrop-filter: blur(16px);\n                border-radius: 16px;\n                padding: 12px 20px;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                border: 1px solid rgba(236, 72, 153, 0.3);\n              ">\n                <div style="\n                  width: 16px;\n                  height: 16px;\n                  border-radius: 50%;\n                  background: linear-gradient(135deg, #ec4899, #f43f5e);\n                  animation: pulse 1.5s infinite;\n                "></div>\n                <span style="color: #fce7f3; font-weight: 500;">coicoi</span>\n              </div>\n              <div style="\n                background: linear-gradient(135deg, rgba(147, 51, 234, 0.8), rgba(236, 72, 153, 0.8));\n                backdrop-filter: blur(16px);\n                border-radius: 16px;\n                padding: 12px 20px;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                border: 1px solid rgba(147, 51, 234, 0.3);\n              ">\n                <div style="\n                  width: 16px;\n                  height: 16px;\n                  border-radius: 50%;\n                  background: linear-gradient(135deg, #9333ea, #ec4899);\n                  animation: pulse 1.5s infinite;\n                "></div>\n                <span style="color: #e879f9; font-weight: 500;">wkwk</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <style>\n          #my-scanning-ui.hidden {\n            display: none !important;\n          }\n          @keyframes scan {\n            0% { top: 0; }\n            50% { top: calc(100% - 2px); }\n            100% { top: 0; }\n          }\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n          }\n        </style>\n      '+n,setTimeout(()=>{let e=document.getElementById("close-ar");e&&e.addEventListener("click",async()=>{console.log("❌ Stopping AR from custom UI button"),await R()})},100),await new Promise(e=>{var n;let o=null==(n=t.current)?void 0:n.querySelector("a-scene");o?(console.log("Setting up A-Frame scene..."),o.addEventListener("loaded",()=>{console.log("✅ A-Frame scene loaded successfully"),console.log("Scene element:",o),console.log("Scene innerHTML preview:",o.innerHTML.substring(0,200));let t=o.querySelector("a-box");console.log("Test box found:",t);let n=o.querySelectorAll("[mindar-image-target]");console.log("Found ".concat(n.length," target(s) in scene")),n.forEach((e,t)=>{console.log("Setting up anchor ".concat(t,":"),e);let n=e.querySelector("a-gltf-model");if(n){console.log("Found GLTF model ".concat(t,":"),n.getAttribute("src")),console.log("Model ".concat(t," element:"),n),console.log("Model ".concat(t," attributes:"),Array.from(n.attributes).map(e=>"".concat(e.name,'="').concat(e.value,'"')));let e=n.getAttribute("src");fetch(e||"").then(t=>{if(t.ok)return console.log("✅ GLB file ".concat(e," is accessible (status: ").concat(t.status,")")),t.blob();throw Error("HTTP ".concat(t.status))}).then(t=>{console.log("✅ GLB file ".concat(e," downloaded successfully, size: ").concat(t.size," bytes"))}).catch(t=>{console.error("❌ GLB file ".concat(e," fetch failed:"),t)}),n.addEventListener("model-loaded",e=>{console.log("\uD83C\uDF89 GLTF Model ".concat(t," LOADED successfully from ").concat(n.getAttribute("src"))),console.log("Model ".concat(t," loaded event:"),e),n.object3D&&(console.log("✅ Model ".concat(t," object3D available:"),n.object3D),console.log("Model ".concat(t," children count:"),n.object3D.children.length))}),n.addEventListener("model-error",e=>{console.error("❌ GLTF Model ".concat(t," FAILED to load from ").concat(n.getAttribute("src"),":")),console.error("Model error details:",e)}),setTimeout(()=>{console.log("Checking model ".concat(t," status after 3 seconds...")),n.object3D?(console.log("✅ Model ".concat(t," has object3D:"),n.object3D),console.log("Model ".concat(t," visible:"),n.object3D.visible),console.log("Model ".concat(t," children:"),n.object3D.children),n.object3D.visible=!0,n.setAttribute("visible","true"),n.object3D.children.length>0?console.log("\uD83C\uDFAF Model ".concat(t," has ").concat(n.object3D.children.length," children - model should be visible!")):console.warn("⚠️ Model ".concat(t," object3D has no children - model may not be loaded"))):console.warn("❌ Model ".concat(t," has no object3D after 3 seconds"))},3e3)}e.addEventListener("targetFound",n=>{console.log("\uD83C\uDFAF\uD83C\uDFAF\uD83C\uDFAF Target ".concat(t," FOUND! Image recognized successfully!")),console.log("Target ".concat(t," event:"),n);let o=e.querySelector("a-entity");o&&(o.setAttribute("visible","true"),o.setAttribute("animation","property: rotation; to: 0 360 0; dur: 2000; loop: true"),console.log("✅ Entity ".concat(t," is now visible and rotating"))),e.querySelectorAll("a-box, a-text, a-sphere, a-cylinder, a-gltf-model").forEach((e,n)=>{e.setAttribute("visible","true"),console.log("Setting element ".concat(n," (").concat(e.tagName,") visible in anchor ").concat(t))});let i=e.querySelector("a-gltf-model");if(i){console.log("\uD83C\uDFAF Forcing GLTF model visibility for anchor ".concat(t)),i.setAttribute("visible","true"),i.object3D.visible=!0;let e=i.getAttribute("scale"),n=i.getAttribute("position");console.log("Model ".concat(t," current scale: ").concat(e,", position: ").concat(n)),0===t?i.setAttribute("scale","".concat(g," ").concat(g," ").concat(g)):1===t&&i.setAttribute("scale","".concat(b," ").concat(b," ").concat(b)),i.setAttribute("position","0 0 0"),console.log("✅ GLTF model ".concat(t," should now be VISIBLE with proper scale"))}console.log("✅ All elements in anchor ".concat(t," should be visible now"))}),e.addEventListener("targetLost",()=>{console.log("❌ Target ".concat(t," lost! (but keeping model visible for simultaneous display)"));let n=e.querySelector("a-box"),o=e.querySelector("a-cylinder"),i=e.querySelector("a-sphere");n&&n.setAttribute("material",0===t?"color: red":"color: yellow"),o&&o.setAttribute("material","color: cyan"),i&&i.setAttribute("material","color: purple")})}),console.log("⏳ Waiting for MindAR to initialize..."),setTimeout(()=>{let e=o.systems["mindar-image-system"];e?(console.log("✅ MindAR system found:",e),console.log("MindAR system initialized:",e.el),console.log("MindAR system data:",e.data)):console.error("❌ MindAR system NOT found!")},2e3),o.addEventListener("arReady",()=>{console.log("\uD83C\uDFAF\uD83C\uDFAF\uD83C\uDFAF MindAR is READY! AR system initialized successfully!");let e=o.systems["mindar-image-system"];e&&e.controller&&(console.log("MindAR controller found:",e.controller),console.log("Number of targets:",e.controller.maxTrack||"unknown"),e.start&&(console.log("Starting MindAR system manually..."),e.start()));let t=document.querySelector("video"),n=document.querySelector("canvas");console.log("Initial check - Video:",!!t,"Canvas:",!!n),setTimeout(()=>{let e=document.querySelectorAll("video"),t=document.querySelectorAll("canvas");if(console.log("Found ".concat(e.length," video element(s)")),console.log("Found ".concat(t.length," canvas element(s)")),e.forEach((e,t)=>{console.log("Video ".concat(t,":"),{src:e.src||"no src",width:e.videoWidth||0,height:e.videoHeight||0,readyState:e.readyState,paused:e.paused,ended:e.ended,playing:!e.paused&&!e.ended&&e.readyState>2})}),window.AFRAME&&window.AFRAME.scenes&&window.AFRAME.scenes[0]){let e=window.AFRAME.scenes[0];console.log("A-Frame scene systems:",Object.keys(e.systems))}},3e3)}),o.addEventListener("arError",e=>{console.error("❌ MindAR error:",e.detail||e),p("カメラ初期化に失敗しました")}),o.querySelectorAll("canvas").forEach(e=>{e.style.pointerEvents="none"}),document.querySelectorAll("video").forEach(e=>{e.style.pointerEvents="none"}),window.dispatchEvent(new Event("resize")),setTimeout(()=>window.dispatchEvent(new Event("resize")),100),e()})):setTimeout(e,1e3)}),window.stopAR=R,u(!0),console.log("AR initialized successfully");let o=e=>{if(2===e.touches.length){let t=e.touches[0],n=e.touches[1];v.current=Math.hypot(n.clientX-t.clientX,n.clientY-t.clientY)}},i=e=>{if(2===e.touches.length&&v.current){let t=e.touches[0],n=e.touches[1],o=Math.hypot(n.clientX-t.clientX,n.clientY-t.clientY),i=o/v.current,r=Math.max(.01,Math.min(.5,y.current*i)),a=Math.max(.01,Math.min(.5,x.current*i)),s=document.querySelector("#model-coicoi"),l=document.querySelector("#model-wkwk");s&&s.setAttribute("scale","".concat(r," ").concat(r," ").concat(r)),l&&l.setAttribute("scale","".concat(a," ").concat(a," ").concat(a)),y.current=r,x.current=a,h(r),f(a),v.current=o}},r=()=>{v.current=null};k.current={handleTouchStart:o,handleTouchMove:i,handleTouchEnd:r},document.addEventListener("touchstart",o,{passive:!0}),document.addEventListener("touchmove",i,{passive:!0}),document.addEventListener("touchend",r,{passive:!0})}catch(e){console.error("AR initialization failed:",e),p("AR初期化に失敗しました")}},R=async()=>{console.log("Stopping AR session...");try{var e,n;let o=null==(e=t.current)?void 0:e.querySelector("a-scene");if(o&&o.systems&&o.systems["mindar-image-system"]){console.log("Stopping MindAR system...");let e=o.systems["mindar-image-system"];if(e.stop)try{await e.stop(),console.log("MindAR system stopped")}catch(e){console.error("Error stopping MindAR:",e)}if(e.pause)try{e.pause(),console.log("MindAR system paused")}catch(e){console.error("Error pausing MindAR:",e)}}if(((null==(n=t.current)?void 0:n.querySelectorAll("video"))||[]).forEach(e=>{console.log("Stopping AR video stream..."),e.srcObject&&(e.srcObject.getTracks().forEach(e=>{console.log("Stopping ".concat(e.kind," track...")),e.stop(),e.enabled=!1}),e.srcObject=null),e.pause(),e.src="",e.load()}),document.querySelectorAll("video").forEach(e=>{e.autoplay&&e.muted&&e.playsInline&&(e.width>100||e.height>100)&&(console.log("Removing AR camera video element"),e.srcObject&&e.srcObject.getTracks().forEach(e=>e.stop()),e.remove())}),navigator.mediaDevices)try{let e=await navigator.mediaDevices.enumerateDevices();console.log("Found media devices:",e.length)}catch(e){console.error("Error enumerating devices:",e)}if(t.current){let e=t.current.querySelector("a-scene");e&&(e.removeEventListener("loaded",()=>{}),e.removeEventListener("arReady",()=>{}),e.removeEventListener("arError",()=>{})),t.current.innerHTML=""}let i=document.querySelector("style[data-mindar-fullscreen]");i&&i.remove(),document.querySelectorAll(".mindar-ui-overlay, .mindar-ui-scanning, .mindar-ui-loading, .mindar-ui, .mindar-camera").forEach(e=>{console.log("Removing MindAR UI element:",e.className),e.remove()}),document.querySelectorAll("a-scene, a-assets, a-camera, a-entity").forEach(e=>{console.log("Removing A-Frame element:",e.tagName),e.remove()}),document.querySelectorAll("*").forEach(e=>{(e.classList.contains("mindar-ui-overlay")||e.classList.contains("mindar-ui-scanning")||e.classList.contains("mindar-ui-loading")||"fixed"===e.style.position&&"10000"===e.style.zIndex)&&(console.log("Force removing MindAR overlay:",e),e.remove())}),document.querySelectorAll("canvas").forEach(e=>{e.width>100&&e.height>100&&(console.log("Removing AR canvas element"),e.remove())}),document.body.style.cssText="",document.documentElement.style.cssText="",k.current.handleTouchStart&&document.removeEventListener("touchstart",k.current.handleTouchStart,{passive:!0}),k.current.handleTouchMove&&document.removeEventListener("touchmove",k.current.handleTouchMove,{passive:!0}),k.current.handleTouchEnd&&document.removeEventListener("touchend",k.current.handleTouchEnd,{passive:!0}),k.current={},u(!1),console.log("AR session stopped successfully")}catch(e){console.error("Error stopping AR:",e),u(!1)}};return(0,o.jsxs)("div",{className:"fixed inset-0 bg-black overflow-hidden",children:[(0,o.jsx)("div",{ref:t,className:"fixed inset-0",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0,zIndex:1}}),w&&"undefined"!=typeof document&&(0,r.createPortal)((0,o.jsx)(()=>{let t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let n=t.current;if(!n)return;let o=async t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),console.log("\uD83D\uDFE2 Back button activated (simple)!"),d&&(console.log("\uD83D\uDD04 Stopping AR before navigation..."),await R()),e.replace("/start")},i=e=>{console.log("\uD83D\uDFE2 Back button touchstart!"),o(e)},r=e=>{console.log("\uD83D\uDFE2 Back button click!"),o(e)},a=e=>{console.log("\uD83D\uDFE2 Back button pointerdown!"),o(e)};return n.addEventListener("touchstart",i,{passive:!1,capture:!0}),n.addEventListener("click",r,{passive:!1,capture:!0}),n.addEventListener("pointerdown",a,{passive:!1,capture:!0}),()=>{n.removeEventListener("touchstart",i,{capture:!0}),n.removeEventListener("click",r,{capture:!0}),n.removeEventListener("pointerdown",a,{capture:!0})}},[d]),(0,o.jsx)("button",{ref:t,type:"button",className:"fixed bottom-6 left-6 w-16 h-16 rounded-full flex items-center justify-center backdrop-blur-md border-2 border-white/50 transition-all duration-200 active:scale-90 hover:scale-110 hover:border-white/70 cursor-pointer",style:{zIndex:0x7fffffff,background:"linear-gradient(135deg, rgba(75, 85, 99, 0.8), rgba(55, 65, 81, 0.6))",boxShadow:"0 12px 40px rgba(75, 85, 99, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.4)",position:"fixed",pointerEvents:"auto",display:"flex",visibility:"visible"},"aria-label":"戻る",onClick:async t=>{t.preventDefault(),t.stopPropagation(),console.log("\uD83D\uDFE2 React onClick triggered!"),d&&await R(),e.replace("/start")},children:(0,o.jsx)(a.A,{className:"w-7 h-7 text-white"})})},{}),document.body),n&&!d&&!m&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",style:{zIndex:20},children:(0,o.jsx)("div",{className:"text-white text-center",children:(0,o.jsxs)("button",{type:"button",onClick:E,className:"flex items-center gap-3 px-8 py-4 bg-green-600 hover:bg-green-700 text-white rounded-lg text-lg font-semibold transition-colors mx-auto",children:[(0,o.jsx)(s.A,{className:"w-6 h-6"}),"ARを開始"]})})}),!n&&!m&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black",style:{zIndex:20},children:(0,o.jsxs)("div",{className:"text-white text-center",children:[(0,o.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-cyan-600 border-t-transparent rounded-full mx-auto mb-4"}),(0,o.jsx)("p",{children:"ARライブラリを読み込み中..."})]})}),m&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black",style:{zIndex:20},children:(0,o.jsxs)("div",{className:"text-white text-center max-w-md mx-4",children:[(0,o.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),(0,o.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"エラーが発生しました"}),(0,o.jsx)("p",{className:"text-gray-300 mb-4",children:m}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:"再試行"})]})})]})}},4355:(e,t,n)=>{n.d(t,{A:()=>o});let o=(0,n(9946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},5169:(e,t,n)=>{n.d(t,{A:()=>o});let o=(0,n(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5695:(e,t,n)=>{var o=n(8999);n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}})},9946:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(2115);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,o.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...m}=e;return(0,o.createElement)("svg",{ref:t,...a,width:i,height:i,stroke:n,strokeWidth:l?24*Number(s)/Number(i):s,className:r("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let n=(0,o.forwardRef)((n,a)=>{let{className:l,...c}=n;return(0,o.createElement)(s,{ref:a,iconNode:t,className:r("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return n.displayName=i(e),n}}}]);